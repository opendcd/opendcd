/**
 * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.
 *
 * @version 0.6.11
 * @codingstandard ftlabs-jsv2
 * @copyright The Financial Times Limited [All Rights Reserved]
 * @license MIT License (see LICENSE.txt)
 */

/**
 * Small Cookies JavaScript Helper
 *
 * Source code available at http://github.com/tdd/cookies-js-helper
 *
 * Copyright (c) 2010 Christophe Porteneuve <tdd@tddsworld.com>
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */

//! moment.js
//! version : 2.4.0
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

/*!
 * Swiss.com
 * by Hinderling & Volkart AG / 2013
 * http://hinderlingvolkart.com/
 */

function FastClick(t){var e,i=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,this.layer=t,!t||!t.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return FastClick.prototype.onClick.apply(i,arguments)},this.onMouse=function(){return FastClick.prototype.onMouse.apply(i,arguments)},this.onTouchStart=function(){return FastClick.prototype.onTouchStart.apply(i,arguments)},this.onTouchMove=function(){return FastClick.prototype.onTouchMove.apply(i,arguments)},this.onTouchEnd=function(){return FastClick.prototype.onTouchEnd.apply(i,arguments)},this.onTouchCancel=function(){return FastClick.prototype.onTouchCancel.apply(i,arguments)},FastClick.notNeeded(t)||(this.deviceIsAndroid&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,i,n){var s=Node.prototype.removeEventListener;"click"===e?s.call(t,e,i.hijacked||i,n):s.call(t,e,i,n)},t.addEventListener=function(e,i,n){var s=Node.prototype.addEventListener;"click"===e?s.call(t,e,i.hijacked||(i.hijacked=function(t){t.propagationStopped||i(t)}),n):s.call(t,e,i,n)}),"function"==typeof t.onclick&&(e=t.onclick,t.addEventListener("click",function(t){e(t)},!1),t.onclick=null))}define("app/Config",[],function(){function t(t){for(var e in t)i[e]=t[e]}var e={language:"de",body:document.getElementById("body")},i={};return t(e),t(window.app_config),{get:function(t){return i[t]},set:function(t,e){i[t]=e}}}),FastClick.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,FastClick.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),FastClick.prototype.deviceIsIOSWithBadTarget=FastClick.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),FastClick.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(this.deviceIsIOS&&"file"===t.type||t.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(t.className)},FastClick.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!this.deviceIsAndroid;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},FastClick.prototype.sendClick=function(t,e){var i,n;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),n=e.changedTouches[0],i=document.createEvent("MouseEvents"),i.initMouseEvent(this.determineEventType(t),!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),i.forwardedTouchEvent=!0,t.dispatchEvent(i)},FastClick.prototype.determineEventType=function(t){return this.deviceIsAndroid&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},FastClick.prototype.focus=function(t){var e;this.deviceIsIOS&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},FastClick.prototype.updateScrollParent=function(t){var e,i;if(e=t.fastClickScrollParent,!e||!e.contains(t)){i=t;do{if(i.scrollHeight>i.offsetHeight){e=i,t.fastClickScrollParent=i;break}i=i.parentElement}while(i)}e&&(e.fastClickLastScrollTop=e.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},FastClick.prototype.onTouchStart=function(t){var e,i,n;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),i=t.targetTouches[0],this.deviceIsIOS){if(n=window.getSelection(),n.rangeCount&&!n.isCollapsed)return!0;if(!this.deviceIsIOS4){if(i.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=i.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=i.pageX,this.touchStartY=i.pageY,t.timeStamp-this.lastClickTime<200&&t.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],i=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>i||Math.abs(e.pageY-this.touchStartY)>i?!0:!1},FastClick.prototype.onTouchMove=function(t){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},FastClick.prototype.findControl=function(t){return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(t){var e,i,n,s,o,a=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,i=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(o=t.changedTouches[0],a=document.elementFromPoint(o.pageX-window.pageXOffset,o.pageY-window.pageYOffset)||a,a.fastClickScrollParent=this.targetElement.fastClickScrollParent),n=a.tagName.toLowerCase(),"label"===n){if(e=this.findControl(a)){if(this.focus(a),this.deviceIsAndroid)return!1;a=e}}else if(this.needsFocus(a))return t.timeStamp-i>100||this.deviceIsIOS&&window.top!==window&&"input"===n?(this.targetElement=null,!1):(this.focus(a),this.deviceIsIOS4&&"select"===n||(this.targetElement=null,t.preventDefault()),!1);return this.deviceIsIOS&&!this.deviceIsIOS4&&(s=a.fastClickScrollParent,s&&s.fastClickLastScrollTop!==s.scrollTop)?!0:(this.needsClick(a)||(t.preventDefault(),this.sendClick(a,t)),!1)},FastClick.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(t){return this.targetElement?t.forwardedTouchEvent?!0:t.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1):!0:!0:!0},FastClick.prototype.onClick=function(t){var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail?!0:(e=this.onMouse(t),e||(this.targetElement=null),e)},FastClick.prototype.destroy=function(){var t=this.layer;this.deviceIsAndroid&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(t){var e;if("undefined"==typeof window.ontouchstart)return!0;if(/Chrome\/[0-9]+/.test(navigator.userAgent)){if(!FastClick.prototype.deviceIsAndroid)return!0;if(e=document.querySelector("meta[name=viewport]"),e&&-1!==e.content.indexOf("user-scalable=no"))return!0}return"none"===t.style.msTouchAction?!0:!1},FastClick.attach=function(t){return new FastClick(t)},"undefined"!=typeof define&&define.amd?define("vendor/fastclick",[],function(){return FastClick}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick,define("lib/shim/ie8IconFontFix",[],function(){return function(t){var e=document.getElementsByTagName("head")[0],i=document.createElement("style"),n="";t?"string"==typeof t&&(t=t.split(",")):t=[""];for(var s=0;s<t.length;s++)n+=t[s]+":before,"+t[s]+":after{content:none !important;} ";i.type="text/css",i.styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n)),e.appendChild(i),setTimeout(function(){e.removeChild(i)},0)}}),define("jquery",[],function(){return jQuery}),define("app/util/dev/dev",["jquery"],function(t){function e(t){require([t],function(t){t.toggle()})}function i(){var t=document.title.match(/\(\#(\d+)\)/);if(t){var e="https://gw.hinderlingvolkart.com/tracker/issues/"+t[1];window.open(e,"_blank")}}t(document).on("keydown",function(t){var n=String.fromCharCode(t.keyCode);if(t.altKey&&n&&n.match(/[a-z]/gi))switch(n=n.toLowerCase()){case"m":e("app/util/dev/modulePicker");break;case"t":i()}})}),define("lib/util/EventDispatcher",[],function(){function t(t,e){this.target=t,this.method=e}function e(t){var e=t.indexOf(".");return e>=0?{name:t.substr(0,e),ns:t.substr(e+1)}:{name:t,ns:o}}function i(t,e,i){for(var n=t.length-1;n>=0;n--)if(t[n].isEqual(e,i))return n;return-1}function n(t,e,n){var s;if(t)if(n)s=i(t,e,n),s>=0&&t.splice(s,1);else for(s=t.length-1;s>=0;s--)e&&t[s].target!=e||t.splice(s,1)}function s(){}var o="d_e_f_a_u_l_t";return t.prototype.call=function(t,e){"string"==typeof this.method?this.target[this.method].apply(this.target||e,t):this.method.apply(this.target||e,t)},t.prototype.isEqual=function(t,e){return this.target==t&&this.method==e},s.prototype.addEventListener=function(n,s,o){var a,r,l,h=e(n);return"undefined"==typeof this.eventListeners&&(this.eventListeners={}),"undefined"==typeof this.eventListeners[h.name]&&(this.eventListeners[h.name]={}),"undefined"==typeof this.eventListeners[h.name][h.ns]&&(this.eventListeners[h.name][h.ns]=[]),l=this.eventListeners[h.name][h.ns],r=i(l,o,s),0>r&&(a=new t(o,s),l.push(a)),a},s.prototype.removeEventListener=function(t,i,s){var a,r;if("undefined"==typeof this.eventListeners&&(this.eventListeners={}),t){var l=e(t),h=l.name,u=l.ns;if(h||!u)if(r=this.eventListeners[h],i||s)if(u!==o)n(r[u],s,i);else for(a in r)n(r[a],s,i);else u!==o?r[u]=[]:this.eventListeners[h]={};else for(a in this.eventListeners)n(this.eventListeners[a][u],s,i)}else for(a in this.eventListeners)this.removeEventListener(a,i,s)},s.prototype.removeAllEventListeners=function(t){"string"==typeof t?this.removeEventListener(t):this.removeEventListenersOf(t)},s.prototype.removeEventListenersOf=function(t){this.removeEventListener(null,null,t)},s.prototype.trigger=function(t){var e,i=[];for(e=1;e<arguments.length;e++)i.push(arguments[e]);var n,s=!0;"undefined"==typeof this.eventListeners&&(this.eventListeners={});for(var o in this.eventListeners[t])for(n=this.eventListeners[t][o],e=n.length-1;e>=0;e--)s|=n[e].call(i,this)!==!1;return s},s}),define("lib/util/DeferredState",["lib/util/EventDispatcher"],function(t){function e(t,e){t[e]=function(t,i){var n=this.addEventListener(e,t,i);return n&&e==this.state&&n.call([this.state],this),this}}function i(t){if(this.___states=[],t)for(var i=t.length-1;i>=0;i--)this.___states.push(t[i]),e(this,t[i])}return i.prototype=new t,i.prototype.set=function(t){return t!=this.state&&(this.state=t,this.trigger(this.state)),this},i.prototype.unlisten=function(t,e){"string"==typeof t||"function"==typeof t||e?this.removeEventListener(null,t,e):(e=t,this.removeEventListenersOf(e))},i}),define("lib/util/DeferredBoolean",["lib/util/DeferredState"],function(t){function e(t){"undefined"!=typeof t&&this.set(t)}return e.prototype=new t(["yes","no"]),e.prototype._set=e.prototype.set,e.prototype.set=function(t){return this._set(t?"yes":"no")},e.prototype.get=function(){return"yes"==this.state},e.prototype.then=e.prototype.yes,e.prototype.otherwise=e.prototype.no,e}),define("lib/browser/MediaDispatcher",["jquery","lib/util/DeferredBoolean"],function(t,e){function i(t){a.push(t),t.validate()}function n(){for(var t=a.length-1;t>=0;t--)a[t].validate()}function s(t,i){this.name=t,this.index=i,this.isOrBelow=new e,this.isOrAbove=new e,this.isExactly=new e}var o=t(window),a=[],r=new e(!1);return new e(!0),o.resize(n),n(),MediaTrigger=function(t){this.element=document.body,this.pseudo="after",this.mediaIndex=-1,this.triggerPoints=[],t&&this.setTriggerPoints(t),i(this)},MediaTrigger.prototype.setTriggerPoints=function(t){this.triggerPoints=[],this.triggerPoints.push(new s("default",0));for(var e=0;e<t.length;e++)this.triggerPoints.push(new s(t[e],this.triggerPoints.length))},MediaTrigger.prototype.is=function(t,e){return this._is(t,0,"isExactly",e)},MediaTrigger.prototype.isOrAbove=function(t,e){return this._is(t,0,"isOrAbove",e)},MediaTrigger.prototype.isOrBelow=function(t,e){return this._is(t,0,"isOrBelow",e)},MediaTrigger.prototype.isAbove=function(t,e){return this._is(t,-1,"isOrAbove",e)},MediaTrigger.prototype.isBelow=function(t,e){return this._is(t,1,"isOrBelow",e)},MediaTrigger.prototype._is=function(t,e,i,n){var s=this._getTrigger(t);if(!s)throw new Error("Media Trigger point '"+t+"' doesn't exist.");e&&(s=this.triggerPoints[s.index+e]);var o=s?s[i]:r;return n&&o.then(n),o},MediaTrigger.prototype._getTrigger=function(t){for(var e=this.triggerPoints.length-1;e>=0;e--)if(this.triggerPoints[e].name==t)return this.triggerPoints[e];return null},MediaTrigger.prototype._setMediaIndex=function(t){var e,i,n=this.mediaIndex;if(t!==n)for(this.mediaIndex=t,e=this.triggerPoints.length-1;e>=0;e--)i=this.triggerPoints[e],i.isOrBelow.set(e<=this.mediaIndex),i.isExactly.set(e==this.mediaIndex),i.isOrAbove.set(e>=this.mediaIndex)},MediaTrigger.prototype._setMedia=function(t){for(var e=this.triggerPoints.length-1;e>0;e--)if(this.triggerPoints[e].name==t)return this._setMediaIndex(e),void 0;this._setMediaIndex(0)},MediaTrigger.prototype.validate=function(){var t;window.getComputedStyle&&(t=window.getComputedStyle(this.element,":"+this.pseudo).getPropertyValue("content"),t=t.replace(/"/g,"")),t||(t=this.getFallback()),this._setMedia(t)},MediaTrigger.prototype.unlisten=function(t,e){for(var i=this.triggerPoints.length-1;i>=0;i--){var n=this.triggerPoints[i];n.isExactly.unlisten(t,e),n.isOrAbove.unlisten(t,e),n.isOrBelow.unlisten(t,e)}},MediaTrigger.prototype.getFallback=function(){this.$fallback||(this.$fallback=t('<div class="media-dispatcher-fallback"></div>'),this.$fallback.css({position:"absolute",left:-1e3}),this.$fallback.appendTo("body"));var e=parseInt(this.$fallback.css("margin-bottom"),10),i=this.triggerPoints[e];return i?i.name:"unknown"},MediaTrigger}),define("app/plugins/mediaDispatcher",["lib/browser/MediaDispatcher"],function(t){return new t(["tablet","tablet-portrait","mobile","mobile-portrait"])}),define("app/plugins/stateChanger",["jquery"],function(){function t(t){var i=$(t),n=e(i,i.data("target")||".js-has-state"),s=!!i.data("class-state-toggle"),o=i.data("value")||i.attr("value")||!1;if(o!==!1){var a="has-state-"+o;if(s&&n.hasClass(a))n.removeClass(a);else{var r=n[0].className;r=r.replace(/(\s?\bhas-state-\S+)/g,""),n[0].className=r+" "+a}}}function e(t,e){for(var i=t.parents(),n=0;n<i.length;n++){var s=i.eq(n),o=s.find(e);if(o.length)return o.eq(0);if(s.is(e))return s}return $("<div>")}var i=".class-changer";return $(document).on("click"+i,".js-state-on-click",function(e){e.preventDefault(),t(this)}),$(document).on("change"+i,".js-state-on-change",function(){t(this)}),$(document).on("change"+i,".js-location-on-change",function(t){t.preventDefault();var e=$(this).data("value")||$(this).val();e&&(document.location.href=e)}),$(document).on("change"+i,".js-tabs-on-change",function(t){t.preventDefault();var e=$(this).data("value")||$(this).val(),i=$(this).parents(".js-tabs").eq(0);try{var n=i.data("moduleInstance");n.select("#"+e)}catch(s){console.log("Could not select tab",n,e)}}),t}),define("app/modules/helpers/JSONP",[],function(){var t=function(){},e=t.prototype;return e.init=function(t,e){this.source=t,this.callback=e},e.search=function(t,e,i){e||(e=this.callback),i||(i=this.source),this.xhr&&this.xhr.abort();var n={dataType:"jsonp",success:e},s=i.split("%query%").join(t),o=i.indexOf("booking.swiss.com")>0;o&&(n.jsonpCallback="S"),this.xhr=$.ajax(s,n)},t}),define("lib/util/contextTrigger",["jquery"],function(){var t;return t={events:{}},t.add=function(e,i){t.events[e]||(t.events[e]=[]),t.events[e].push(i),$(e).each(i)},t.remove=function(e,i){if(!t.events[e])return!1;if(i)for(var n in t.events[e])t.events[e][n]===i&&(t.events[e][n]=null);else t.events[e]=null},t.run=function(e){e=e||"body";var i=$(e);if(!i.length)return!1;for(var n in t.events){var s=i.find(n);if(i.is(n)&&(s=s.add(e)),s.length)for(var o in t.events[n])s.each(t.events[n][o])}},t}),define("app/plugins/formshim",["jquery","lib/util/contextTrigger"],function(t,e){var i=t("html").is(".lt-ie9"),n=t("html").hasClass("no-csstransitions")&&navigator.userAgent.match(/Firefox/);i&&!function(){function i(){var e=t(this);e.is(":checked")?e.addClass("is-checked"):e.removeClass("is-checked")}t(document).on("change",'input[type="radio"], input[type="checkbox"]',function(){var e=t(this),n=e.prop("name"),s=e.attr("type");t('input[type="'+s+'"][name="'+n+'"]').each(i)}),e.add('input[type="radio"], input[type="checkbox"]',i)}(),(i||n)&&!function(){function e(){this.checked&&(this.was_checked||t(this).change())}function i(e){return this.was_checked?(e.stopImmediatePropagation(),void 0):(t('input[name="'+this.name+'"]').each(function(){this.was_checked=this.checked}),void 0)}t("input[type=radio]").focus(e).change(i)}()}),define("lib/browser/Cookie",[],function(){function t(t){return"[object Date]"==i.call(t)}function e(t){return"[object RegExp]"==i.call(t)}var i=Object.prototype.toString,n={get:function(t){return n.has(t)?n.list()[t]:null},has:function(t){return new RegExp("(?:;\\s*|^)"+encodeURIComponent(t)+"=").test(document.cookie)},list:function(t){for(var i,n=document.cookie.split(";"),s={},o=0,a=n.length;a>o;++o)i=n[o].split("="),i[0]=i[0].replace(/^\s+|\s+$/,""),(!e(t)||t.test(i[0]))&&(s[decodeURIComponent(i[0])]=decodeURIComponent(i[1]));return s},remove:function(t,e){var i={};for(var s in e||{})i[s]=e[s];return i.expires=new Date(0),i.maxAge=-1,n.set(t,null,i)},set:function(e,i,n){n=n||{};var s=[encodeURIComponent(e)+"="+encodeURIComponent(i)];n.path&&s.push("path="+n.path),n.domain&&s.push("domain="+n.domain);var o,a="maxAge"in n?n.maxAge:"max_age"in n?n.max_age:n["max-age"];"undefined"==typeof a||"null"==typeof a||isNaN(o=parseFloat(a))||s.push("max-age="+o);var r=t(n.expires)?n.expires.toUTCString():n.expires;return r&&s.push("expires="+r),n.secure&&s.push("secure"),s=s.join(";"),document.cookie=s,s},test:function(){var t="70ab3d396b85e670f25b93be05e027e4eb655b71",e="Ã‰lodie Jaubert";n.remove(t),n.set(t,e);var i=e==n.get(t);return n.remove(t),i}};return n}),define("app/plugins/fontScaler",["jquery","lib/browser/Cookie"],function(t,e){function i(e){function i(t){t.preventDefault(),t.stopPropagation(),a=o(t),h=r.get(),u=h,l.show(),document.addEventListener("touchmove",s,!1),document.addEventListener("touchcancel",n,!1),document.addEventListener("touchend",n,!1),s(t)}function n(){r.set(u),l.hide(),t(window).trigger("resize"),document.removeEventListener("touchmove",s),document.removeEventListener("touchcancel",n),document.removeEventListener("touchend",n)}function s(t){2!=t.touches.length&&n(t),t.preventDefault();var e=o(t),i=1+(e-a)/a/2;i*=h,i=r.limit(i),r.relToAbs(i),i=Math.round(10*i)/10,u=i,l.set(i)}function o(t){var e=t.touches[0],i=t.touches[1],n=i.clientX-e.clientX,s=i.clientY-e.clientY;return Math.sqrt(n*n+s*s)}var a,h,u;2==e.touches.length&&i(e)}var n=14,s=1.2,o=.9,a=100*(n/16),r={up:function(t){this.set(this.get()+(t||.25))},down:function(t){this.set(this.get()-(t||.25))},set:function(i){i=i||1,i=this.limit(i),t("html").css("font-size",1===i?"":(i*a).toFixed(4)+"%"),this.current=i,e.set("fontscale",i),t(window).trigger("resize")},reset:function(){this.set(1)},get:function(){return this.current},relToAbs:function(t){return t*n},absToRel:function(t){return t/n},limit:function(t){return Math.min(s,Math.max(o,t))},current:1},l=function(){function e(){o.stop().hide().fadeIn(200),t("body").append(o)}function i(t){o.delay(t).fadeOut(500,function(){o.remove()})}function n(){e(),s(r.get()),i(500)}function s(t){var e=r.relToAbs(t);a.text(Math.round(100*t)+"%"),o.css("font-size",3*e)}var o=t('<div id="font-size-indicator">Aa</div>'),a=t('<span class="font-size-percentage">100%</span>').appendTo(o);return{show:e,hide:i,set:s,showCurrent:n}}(),h=Number(e.get("fontscale"));return h&&r.set(h),"ontouchstart"in window?document.addEventListener("touchstart",i,!1):t(document).on("keydown",function(t){if(t.altKey){var e=t.keyCode;38==e&&r.up(.11111),40==e&&r.down(.1),96==e&&r.reset(),(38==e||40==e||96==e)&&(t.preventDefault(),l.showCurrent())}}),r}),define("app/plugins/bottomFooter",["jquery"],function(){function t(){var t=$(".site-footer");t.height(t.children(".site-footer-inner").outerHeight(!0));var e=t;$(window).height()>$("body").outerHeight(!0)?(e.addClass("no-scroll"),e.removeClass("has-scroll")):(e.addClass("has-scroll"),e.removeClass("no-scroll"))}return $(window).resize(t),$(window).load(t),setInterval(t,2e3),t(),!0}),define("lib/net/HTMLLoader",["jquery"],function(t){var e=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,i=/<body\b[^>]*>([\s\S]*?)<\/body>/gim,n={ignoreInlineScript:!1},s=function(e){this.options=t.extend({},n,e),this.loading=!1};return s.prototype.load=function(e,i,n){var s=this;return n=n||{},n.success=function(t){s.handleSuccess(t,i)},this.loading=!0,this.xhr=t.ajax(e,n),this.xhr},s.prototype.isLoading=function(){return this.loading},s.prototype.handleSuccess=function(n,s){t('<div id="#body"></div>');var o=n;o.indexOf("<body")>=0&&(o=n.match(i)[0]),!this.options.ignoreInlineScript&&o.indexOf("<script")&&(o=o.replace(e,"")),s&&s(o,n),this.xhr=null,this.loading=!1},s.prototype.cancel=function(){this.xhr&&(this.xhr.abort(),this.xhr=null,this.loading=!1)},s.prototype.dispose=function(){this.cancel()},s}),define("lib/util/MicroTemplate",[],function(){function t(t){var e=t.replace(/[\r\t\n]/g," ").split("[%").join("	").replace(/((^|%])[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%]/g,"',$1,'").split("	").join("');").split("%]").join("p.push('").split("\r").join("\\'");return new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e+"');}return p.join('');")}var e={convert:t};return e}),define("lib/util/Templates",["lib/util/MicroTemplate","app/Config"],function(t,e){var i=function(){this.templates=e.get("templates")||{}},n=i.prototype;return n.createInstance=function(){return new i},n.add=function(t,e){this.templates[t]=e},n.get=function(e){var i=this.templates[e];return i||(i=$("script#"+e).html()),"string"==typeof i&&(i=this.templates[e]=t.convert(i)),i},n.render=function(t,e){var i=this.get(t);return i(e)},new i}),define("app/plugins/lightboxLink",["jquery","lib/net/HTMLLoader","lib/util/Templates","lib/util/contextTrigger","lib/util/EventDispatcher"],function(t,e,i,n,s){function o(){this.loader=new e,this.$element=null}var a=".plugins-lightbox",r=0,l=0;return t(document).on("click","a[data-lightbox]",function(e){var i=t(this),n=i.data("lightbox"),s=i.attr("href"),a=i.data("lightbox-instance");a||(a=new o,i.data("lightbox-instance",a)),"youtube"==n?a.handleYoutube(e):(e.preventDefault(),i.addClass("is-ajax-loader"),a.open(s,function(){i.removeClass("is-ajax-loader")}))}),o.prototype=new s,o.prototype.getElement=function(){return this.$element},o.prototype.handleYoutube=function(e){if(!(Modernizr.touch&&t(window).width()<600)){var n,s=t(e.currentTarget),o=s.attr("href");if(n=o.indexOf("youtu.be")>=0?o.match(/\youtu.be\/([^\/]+)/):o.match(/\Wv=([^&]+)/)){var a=i.render("youtube-lightbox",{title:s.attr("title")||"Youtube",id:n[1]});a&&(e.preventDefault(),this.show(t("<div></div>").html(a).children().eq(0)))}}},o.prototype.open=function(e,n){var s,o,a,r=this;0===e.indexOf("#")?(a=i.get(e.substr(1)),s=t("<div></div>").html(a?a():t(e).html()),o=s.children().eq(0),r.show(o),n&&n.call(this)):this.loading||(this.loading=!0,this.loader.load(e,function(e){r.loading=!1,s=t("<div></div>").html(e),o=s.find(".lightbox").eq(0),r.show(o),n&&n.call(this)}))},o.prototype.show=function(e){var i=this;r++,this.$element=t(e),l=t(document).scrollTop(),n.run(this.$element),t("#body").append(this.$element),t("html").addClass("has-lightbox"),this.$element.on("click"+a,".js-lightbox-close",function(t){t.preventDefault(),i.close()}),t("body").on("touchstart"+a,function(t){t.stopPropagation()}),this.$element.find(".lightbox-body").length&&this.$element.on("click"+a,function(e){t(e.target).is(".lightbox-body")||t(e.target).parents().is(".lightbox-body")||(e.preventDefault(),i.close())}),this.$element.addClass("is-hidden is-hidden-start"),setTimeout(function(){i.$element.removeClass("is-hidden is-hidden-start")},20),this.$focusedElement=t(":focus"),this.$element.attr("tabindex","-1"),this.$element.focus(),this.trigger("open")},o.prototype.close=function(){var e=this.$element;this.$element.off(a),this.$focusedElement&&(this.$focusedElement.focus(),this.$focusedElement=null),r--,0===r&&t("html").removeClass("has-lightbox"),this.$element.addClass("is-hidden is-hidden-end"),this.$element.css("pointer-events","none"),t("body").off(a),Modernizr.csstransitions?setTimeout(function(){e.remove()},1e3):(t("html").hasClass("lt-ie9")&&e.find("iframe").remove(),e.remove()),t("html, body").scrollTop(l),this.trigger("close"),this.$element=null},o}),define("app/plugins/flyingFocus",["jquery"],function(t){function e(t){var e=t.getBoundingClientRect(),i=document.documentElement,n=document.defaultView,s=document.body,o=i.clientTop||s.clientTop||0,a=i.clientLeft||s.clientLeft||0,r=n.pageYOffset||i.scrollTop||s.scrollTop,l=n.pageXOffset||i.scrollLeft||s.scrollLeft,h=e.top+r-o,u=e.left+l-a;return{top:h,left:u,width:e.width,height:e.height}}function i(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent("on"+e,i)}function n(){m||(clearTimeout(y),y=setTimeout(s,10))}function s(){c.classList.remove("flying-focus_visible"),c.style.display="none",m=!0,clearTimeout(b)}function o(){clearTimeout(y),clearTimeout(b);var t=m?0:d/1e3;c.style.transitionDuration=c.style.WebkitTransitionDuration=t+"s",c.style.display="block",w=0,b=setTimeout(a,100),m&&(c.classList.add("flying-focus_visible"),m=!1)}function a(){var t=r(p);t.top!=f.top||t.left!=f.left||t.width!=f.width||t.height!=f.height?w=0:w++,5>w&&(b=setTimeout(a,500))}function r(t){if(!m){var i=e(t);return i.width=t.offsetWidth,i.height=t.offsetHeight,c.style.left=i.left+"px",c.style.top=i.top+"px",c.style.width=i.width+"px",c.style.height=i.height+"px",i}}function l(t,e){if(!Array.prototype.indexOf){for(var i=t.length-1;i>=0;i--)if(t[i]===e)return!0;return!1}return!!~t.indexOf(e)}var h=".flying-focus",u=!0;if(!document.getElementById("flying-focus")&&document.documentElement.addEventListener){var c=document.createElement("flying-focus");c.id="flying-focus",document.body.appendChild(c);var d=150;!!navigator.userAgent.match(/gecko/i)&&!navigator.userAgent.match(/webkit/i);var p,f,m=!0,g=new Date,v=[];i(document.documentElement,"keydown",function(t){9===t.keyCode&&(u=!0),g=new Date},!0),t(document).on("focusin"+h,function(e){if(u){var i=e.target;if(t(e.target),!l(v,i.tagName.toLowerCase())&&"flying-focus"!==i.id){var n=new Date;n-g>100||(o(),f=r(i),p=i)}}}),t(document).on("focusout"+h,function(){n()}),i(document.documentElement,"click",function(t){t.detail&&(n(),u=!1)}),i(window,"resize",function(){r(p)});var y,b,w=0,$=document.createElement("style");return $.textContent="#flying-focus {		position: absolute;		margin: 0;		background: transparent;		-webkit-transition-property: left, top, width, height, opacity;		transition-property: left, top, width, height, opacity;		-webkit-transition-timing-function: cubic-bezier(0, 0.2, 0, 1);		transition-timing-function: cubic-bezier(0, 0.2, 0, 1);		visibility: hidden;		pointer-events: none;		display: none;	}	#flying-focus.flying-focus_visible {		visibility: visible;		z-index: 99999;	}	#flying-focus:after {		content: '';		position: absolute;		top: -5px;		left: -5px;		bottom: -5px;		right: -5px;		box-shadow: 0 0 12px 1px rgba(0,0,0,0.45), 0 0 1px 1px rgba(0,0,0,0.35) inset;		border-radius: 2px;		-moz-box-shadow: 0 0 12px 1px rgba(0,0,0,0.45), 0 0 1px 1px rgba(0,0,0,0.35) inset;	}	",document.body.appendChild($),{}}}),define("app/plugins/link",["jquery"],function(t){function e(e){var i=t(e.currentTarget),n=i.data("href")||i.attr("href");n&&(document.location=n)}return t(document).on("click",".js-link",e),e}),define("app/plugins",["app/util/dev/dev","app/plugins/mediaDispatcher","app/plugins/stateChanger","app/modules/helpers/JSONP","app/plugins/formshim","app/plugins/fontScaler","app/plugins/bottomFooter","app/plugins/lightboxLink","app/plugins/flyingFocus","app/plugins/link"],function(){return!0}),define("app/modules/nav/mobileNav",["jquery","lib/util/EventDispatcher"],function(t){function e(e,i){var n=(t(i),t(e));return n.is(i)||n.parents().is(i)}function i(i){function a(){function e(){k(Math.round(i)),setTimeout(function(){1===i?(h[0].style.webkitOverflowScrolling="touch",h[0].style.pointerEvents="auto",t(f).addClass("is-active")):(h[0].style.webkitOverflowScrolling="",h[0].style.pointerEvents="none",t(f).removeClass("is-active"),l.parent().attr("style",""),o())},10),h.scrollTop(0)}var i=d;n(),t({value:p}).animate({value:Math.round(i)},{duration:200,step:function(){k(this.value)},complete:e})}var r=i.originalEvent.touches?i.originalEvent.touches[0]:i,u=t(i.target);if(!e(u,".js-ignore-nav")){b=-1,v=r.clientX,starty=r.clientY,y=d;var g=!1,w=!1;if((u.is(h)||u.parents().is(h))&&(w=!0),.5>y){if(!u.is(f))return;i.preventDefault(),g=!0}else w||i.preventDefault();$=!1;var T,C;T=Number(new Date),C=d,C>.5&&!e(h,i.target)||e(".js-mobile-nav-trigger",i.target),t(document).on(m?"touchmove"+c:"mousemove"+c,function(t){$&&t.preventDefault(),t.originalEvent.touches&&(t=t.originalEvent.touches[0]);var e=t.clientX-v,i=t.clientY-starty;$||!(Math.abs(e)>10||g)&&w||(s(),$=!0),!$&&Math.abs(i)>3?n():$&&(-1===b&&(b=h.width()),k(y+e/b))}),t(document).on(m?"touchend"+c:"mouseup"+c,function(e){var i=Number(new Date)-T;if($)1e3>i&&g?d=.5>C?1:0:250>i&&Math.abs(C-d)>.1&&(d=.5>C?1:0);else if(t(e.target),g)s(),d=.5>C?1:0;else{if(!(C>.5)||w)return n(),void 0;s(),d=0}$&&(e.preventDefault(),e.stopPropagation()),a()})}}function n(){t(document).off("mousemove"+c+" touchmove"+c),t(document).off("mouseup"+c+" touchend"+c),t(document).off("click"+c)}function s(){if(!$&&0===d){var e=l.parent();w=document.body.scrollTop,t("#body").height(e.height()),e.css({position:"fixed",left:0,top:0,height:"100%",pointerEvents:"none"}),e.scrollTop(w)}}function o(){var t=l.parent(),e=t[0],i=h[0];e.style.position="relative",t.css({transform:"none"}),e.style.height="auto",e.style.pointerEvents="auto",e.scrollTop=0,h.css({transform:"none"}),i.style.left="-100%",i.style.pointerEvents="none",document.getElementById("body").style.height="auto",document.body.scrollTop=w}var a,r,l,h,u,c=".module-nav-mobilenav",d=0,p=0,f=".js-mobile-nav-trigger",m="ontouchstart"in window,g=!Modernizr.csstransforms3d||!Modernizr.csstransitions||!window.navigator.userAgent.match(/(iphone|ipad)/i);a=function(){return this.initialised=!1,this.$element=null,r?(console.log("MobileNavigation has already been created."),r):(r=this,void 0)},a.prototype.init=function(e){function n(e){var i=t(e.target);0!==i.parents("#site-navigation").length||i.is("#site-navigation")||(e.preventDefault(),e.stopImmediatePropagation(),t(document).off("click",n),k(0))}return this.initialised?this:(this.$element=t(e),this.$nav=t("#site-navigation"),this.$context=this.$nav.parent(),this.$toggler=t(f),u=t(".site-navigation-shadow")[0],t("#body").append(this.$nav),h=this.$nav,l=t("#site-page"),g?this.$toggler.on("touchstart click",function(e){e.preventDefault(),e.stopImmediatePropagation(),d?(k(0),t(document).off("click",n)):(k(1),t(document).on("click",n))
}):(h[0].style.pointerEvents="none",t(document).on(m?"touchstart"+c:"mousedown"+c,i)),this.$toggler.css({opacity:1,animation:"none"}),this)},a.prototype.destroy=function(){t(document).off(c),d=0,h&&h.removeAttr("style"),t("html").removeClass("is-navigation-visible is-navigation-hidden"),l&&(l.removeAttr("style"),l.parent().removeAttr("style")),this.$element&&(this.$context.append(this.$nav),this.$element.off(c),this.$element=null),r=null},a.prototype.on=function(t,e,i){this.$element.on(t+c,e,i)};var v,y,b,w,$,k=function(t){0>t&&(t=0),t>1&&(t=1),d=t,p=d;var e=h[0].style;e.display="block",e.left="0";var i=l.parent(),n=i[0],s="scale("+(.95+.05*t)+")",o="translate("+80*t+"%, 0px)";Modernizr.csstransforms?(e.webkitTransform=s,n.style.webkitTransform=o,e.MozTransform=s,n.style.MozTransform=o,e.msTransform=s,n.style.msTransform=o,u&&(-1===b&&(b=h.width()),u.style.webkitTransform="translateX("+b*t+"px)")):i.css({left:80*t+"%"})};return g&&(t("html").addClass("is-navigation-hidden"),k=function(e){0>e&&(e=0),e>1&&(e=1),d=e,p=d;var i=e?"is-navigation-visible":"is-navigation-hidden";t("html").removeClass("is-navigation-visible is-navigation-hidden"),t("html").addClass(i),t("html").css("pointer-events","none"),setTimeout(function(){t("html").css("pointer-events","")},500)}),a}),define("app/modules/nav/desktopNav",["jquery"],function(t){var e,i;return i=t(document),e=function(){this.$element=null,this.dropdownSelector=".js-navigationdropdown",this.dropdownTiggerSelector=".js-nav-trigger",this.dropdownContainerSelector=".js-mega-dropdown-container",this.navigationContainerSelector=".js-navigation-container",this.$container=null,this.$triggers=null,this.$dropdowns=null,this.$navContainer=null,this.$dropdowns=null},e.OPEN_EVENT="subnav_open",e.CLOSE_EVENT="subnav_close",e.prototype.init=function(e){return this.$element=t(e),this.$dropdowns=this.$element.find(this.dropdownSelector),this.$triggers=this.$element.find(this.dropdownTiggerSelector),this.$container=i.find(this.dropdownContainerSelector),this.$navContainer=this.$element.find(this.navigationContainerSelector),this.$container.removeClass("is-open"),this.extractSubnavigation(),this.setInteraction(),this},e.prototype.destroy=function(){this.$element.off("mouseenter.dropdown"),i.off("mouseleave.dropdown mouseover.dropdown mousedown.dropdown touchstart.dropdown"),this.reattatchSubnavigation(),this.$element=null,this.$container=null,this.$triggers=null,this.$dropdowns=null,this.$navContainer=null,this.$dropdowns=null},e.prototype.extractSubnavigation=function(){var e=this;this.$triggers.each(function(){var i,n;i=t(this),n=i.find(e.dropdownSelector),i.data("$dropdown",n),n.appendTo(e.$container)})},e.prototype.reattatchSubnavigation=function(){this.$triggers.each(function(){var e,i;e=t(this),i=e.data("$dropdown"),i.show().appendTo(e)})},e.prototype.setInteraction=function(){var n,s,o,a,r,l=this,h=!1;o=function(t,i){clearTimeout(n),clearTimeout(s),h&&(n=setTimeout(function(){l.$dropdowns.removeClass("is-open"),l.$container.removeClass("is-open"),r&&(r.trigger(e.CLOSE_EVENT),r=null),h=!1},i?0:250))},a=function(i){var o,a=t(i.currentTarget);return o=a.data("$dropdown"),clearTimeout(n),h===o?!1:(clearTimeout(s),s=setTimeout(function(){l.$dropdowns.removeClass("is-open"),l.$container.addClass("is-open"),o.addClass("is-open"),r=o,o.trigger(e.OPEN_EVENT);var i=t(".css-arrow-up",o),n=o.offset(),s=a.offset(),u=a.width();i.css({left:s.left-n.left+u/2}),h=o},h?0:300),!0)},this.$element.on("mouseenter.dropdown",l.dropdownTiggerSelector,a),this.$element.on("click.dropdown",l.dropdownTiggerSelector,function(t){a(t)&&t.preventDefault()}),i.on("mousedown.dropdown touchstart.dropdown",function(e){h&&(t(e.target).is(".js-mega-dropdown-container")||t(e.target).parents().is(".js-mega-dropdown-container")||o())}),i.on("mouseleave.dropdown",l.dropdownTiggerSelector+","+l.dropdownContainerSelector,o),i.on("mouseover.dropdown",l.dropdownTiggerSelector+","+l.dropdownContainerSelector,function(){clearTimeout(n)}),this.$container.find(".js-mega-dropdown-close-btn").on("click",function(t){o(t,!0)})},e}),define("app/modules/nav/nav",["jquery","app/plugins/mediaDispatcher"],function(t,e){var i;return i=function(){this.activeModule=null,this.ns=".navigation"},i.prototype.init=function(t){var i=this;return this.element=t,e.isOrBelow("mobile").then(function(){require(["app/modules/nav/mobileNav"],function(t){i.registerModule(t)})}).otherwise(function(){require(["app/modules/nav/desktopNav"],function(t){i.registerModule(t)})}),this},i.prototype.registerModule=function(t){this.activeModule&&this.activeModule.destroy(),this.activeModule=new t,this.activeModule.init(this.element)},i.prototype.destroy=function(){this.element=null,this.activeModule&&this.activeModule.destroy()},i}),define("app/modules/BaseModule",["jquery"],function(t){var e,i=".module-module",n=0;return e=function(){this.$el=null,this.ns=i+n++},e.prototype.init=function(e){return this.$el=t(e),this},e.prototype.destroy=e.prototype._destroy=function(){this.$el&&(this.$el.off(this.ns),t(document).off(this.ns),t(window).off(this.ns),this.$el=null)},e.prototype.on=function(){for(var e,i,n,s,o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];switch(arguments.length){case 2:s=this.$el,e=o.shift(),n=o.shift();break;case 3:e=o.shift(),"string"==typeof e?(s=this.$el,i=o.shift(),n=o.shift()):(s=t(e),e=o.shift(),n=o.shift());break;case 4:s=t(o.shift()),e=o.shift(),i=o.shift(),n=o.shift()}i?s.on(e+this.ns,i,n):s.on(e+this.ns,n)},e.prototype.bind=function(t){var e=this;return function(){t.apply(e,arguments)}},e}),define("app/util/AjaxLoader",["jquery","lib/net/HTMLLoader","lib/util/Templates","lib/util/contextTrigger","lib/util/EventDispatcher"],function(t,e,i,n,s){function o(t){this.loader=new e,t&&this.setTarget(t)}return o.prototype=new s,o.prototype.setTarget=function(e){this.$target=t(e)},o.prototype.load=function(s,o){function a(){d.children().remove(),d.append(r),p&&n.run(r),c.resolve(r)}o?"function"==typeof o&&(o={success:o}):o={};var r,l,h,u=this,c=t.Deferred(),d=this.$target,p=!1;return o.success&&c.done(o.success),c.done(function(t){u.trigger("load",t)}),"string"==typeof s&&0===s.indexOf("#")&&(h=i.get(s.substr(1)))?(l=h(o.data),r=t(t.parseHTML(t.trim(l))),p=!0,a()):"string"!=typeof s||0===s.indexOf("#")||0===s.indexOf("<")?(r=t(s),a()):s.indexOf("#")>0&&(s=s.split("#"),this.loader=new e,this.loader.load(s[0],function(e){var i=t("<div></div>").html(e);r=i.find("#"+s[1]),p=!0,a(),loader=null})),c.promise()},o.prototype.cancel=function(){this.loader.cancel()},o}),define("app/modules/helpers/ajaxContent",["jquery","app/modules/BaseModule","app/util/AjaxLoader"],function(t,e,i){function n(e){"complete"==document.readyState?e():t(window).load(e)}var s,o=".autocomplete",a=0;return s=function(){this.$el=null,this.ns=o+a++},s.prototype=new e,s.prototype.init=function(e){var s=this;this.$el=t(e);var o=this.$el.data("ajax-content");return o&&n(function(){s.loader=new i(s.$el),s.loader.load(o)}),this},s.prototype.destroy=function(){this.$el&&(this.$el=null),this.loader&&(this.loader.cancel(),this.loader=null)},s}),define("app/util/AjaxUpdater",["jquery","lib/net/HTMLLoader","lib/util/contextTrigger","lib/util/EventDispatcher"],function(t,e,i,n){function s(){this.loader=new e,this.cacheEnabled=!1}return t("html").is(".lt-ie9"),s.prototype=new n,s.prototype.enableCache=function(){this.cacheEnabled=!0},s.prototype.load=function(e,n){function s(e){var n=t("<div></div>").html(e),s=t();t.each(u,function(e,o){var a=n.find("#"+o).not('[data-ajax-load-replace="ignore"]'),r=t("#"+o);0===a.length||(r.replaceWith(a),i.run(a),s=s.add(a))}),o(),a.resolve(s)}function o(){d.removeClass("is-ajax-loading"),d.css("position",p),d.children(".ajax-load-overlay").remove()}var a=t.Deferred();n?"function"==typeof n&&(a.done(n),n={}):n={};var r=this;this.cancel(),a.done(function(t){r.trigger("load",t)});var l=e.split("#"),h=l[0],u=l[1].split(","),c=t();t.each(u,function(t,e){c=c.add(document.getElementById(e))});var d=c.not('[data-ajax-load-status="ignore"]');d.addClass("is-ajax-loading");var p=d.css("position");"absolute"!=p&&"fixed"!=p&&"relative"!=p&&d.css("position","relative"),d.children(".ajax-load-overlay").remove(),d.append('<div class="ajax-load-overlay"></div>');var f=e+n.data,m=this.cache(f);if(m)s(m);else{var g=this.loader.load(h,function(t){r.cache(f,t),s(t)},n);g.fail(function(){o(),a.reject()})}return a.promise()},s.prototype.isCached=function(t,e){var i=t+e.data,n=this.cache(i);return!!n},s.prototype.cache=function(t,e){return this.cacheEnabled?(this.cache||(this.cache={}),e?(this.cache[t]=e,void 0):this.cache[t]):!1},s.prototype.cancel=function(){this.loader.cancel()},s}),define("app/modules/helpers/ajaxUpdate",["jquery","app/modules/BaseModule","app/util/AjaxUpdater"],function($,BaseModule,AjaxUpdater){var AjaxUpdate,ns=".autocomplete",instanceCounter=0;return AjaxUpdate=function(){this.updater=new AjaxUpdater,this.$el=null,this.ns=ns+instanceCounter++,this.DEFAULT_TARGET="site-page"},AjaxUpdate.prototype=new BaseModule,AjaxUpdate.prototype.init=function(t){return this.$el=$(t),this.$el.is("form")?(this.on("click",".js-ajax-update-click",this.bind(this.handleFormClick)),this.on("change",".js-ajax-update-change",this.bind(this.handleFormChange))):this.$el.is("a")&&this.on("click",this.bind(this.handleLinkClick)),this},AjaxUpdate.prototype.load=function(t,e,i){e||(e=null),i||(i="get");var n=this.updater.load(t,{data:e,method:i});return n},AjaxUpdate.prototype.handleFormChange=function(t){clearTimeout(this.submitTimeout),this.submitTimeout=setTimeout(this.bind(function(){this.handleFormSubmit(t)}),100)},AjaxUpdate.prototype.handleFormClick=function(t){t.preventDefault(),this.handleFormChange(t)},AjaxUpdate.prototype.handleFormSubmit=function(t){var e=$(t.target),i=this._getUrl("action",e),n=this.$el.serialize(),s=this.$el.attr("method");if(e.is("button[name]")){var o=e.attr("name"),a=e.attr("value");n+="&"+o+"="+a}var r=this.load(i,n,s);this.addCallback(this.$el,r.done,"success"),this.addCallback(this.$el,r.fail,"error"),this.addCallback(this.$el,r.always,"complete"),this.addCallback(e,r.done,"success"),this.addCallback(e,r.fail,"error"),this.addCallback(e,r.always,"complete")},AjaxUpdate.prototype.handleLinkClick=function(t){var e=this._getUrl("href");this.load(e),t.preventDefault()},AjaxUpdate.prototype._getUrl=function(t,e){e||(e=$());var i=e.data("ajax-"+t)||this.$el.data("ajax-"+t)||this.$el.attr(t),n=e.data("ajax-target")||this.$el.data("ajax-target");return n&&(i=i.split("#")[0]+"#"+n),this.DEFAULT_TARGET&&i.indexOf("#")<0&&(i+="#"+this.DEFAULT_TARGET),i},AjaxUpdate.prototype.addCallback=function($target,addCallback,eventName){var callbackJavascript=$target.data("ajax-callback-"+eventName);callbackJavascript&&addCallback(function(){eval(callbackJavascript)})},AjaxUpdate.prototype.destroy=function(){this.$el&&(this.$el=null),this.loader&&(this.updater.cancel(),this.updater=null)},AjaxUpdate}),define("app/modules/forms/multirow",["jquery","app/modules/BaseModule"],function(t,e){var i,n=".multirow",s=0;return i=function(){this.$el=null,this.ns=n+s++},i.prototype=new e,i.prototype.init=function(e){return this.$el=t(e),this.on("click",".js-multirow-delete",this.bind(function(e){this.removeSoon(t(e.target).parents(".js-multirow-row").first())})),!1},i.prototype.removeSoon=function(t){clearTimeout(this.removeTimeout),this.removeTimeout=setTimeout(function(){t.remove()},100)},i}),define("app/modules/forms/formSubmitAction",["jquery","app/modules/BaseModule"],function(t,e){function i(e){var i=t(e);if(Modernizr.csstransforms3d&&window.navigator.userAgent.match(/webkit/i)){var n=i.find(".book-loading-overlay-symbol");if(1===n.length)for(var s=0;10>s;s++)!function(){var t=n.clone();t.addClass("is-clone is-hidden"),n.after(t),t.css({transform:"rotateZ("+360*Math.random()+"deg)"}),t.children().css({"-webkit-animation-duration":5*Math.random()+3+"s"}),setTimeout(function(){t.removeClass("is-hidden")},200*s+1e3*Math.random())}()}}var n,s=".bookingbar",o=0;return n=function(){this.$el=null,this.ns=s+o++},n.prototype=new e,n.prototype.init=function(e){return this.$el=t(e),this.on("submit",this.bind(this.handleSubmit)),this},n.prototype.handleSubmit=function(t){return this.getData("cancelsubmit")?(this.checkSubmit(t),t.preventDefault(),setTimeout(function(){window.location.reload()},5e3),void 0):(setTimeout(this.bind(function(){this.checkSubmit(t)}),100),void 0)},n.prototype.checkSubmit=function(e){if(!e.isDefaultPrevented()){var n=this.getData("show");n&&(t(n).fadeIn(),i(n)),n=this.getData("hide"),n&&t(n).fadeOut()}},n.prototype.getData=function(t){return this.$el.data("form-submit-action-"+t)},n}),define("app/modules/forms/rangePicker",["jquery","app/modules/BaseModule"],function(t,e){var i,n,s=".ch.hv.rangepicker",o=0;return i=function(){this.$el=null,this.ns=s+o++,this.TOUCH="undefined"!=typeof Modernizr&&Modernizr.touch?!0:!1},i.prototype=new e,i.prototype.init=function(e){return this.$el=t(e),this.$handle1=this.$el.find(".js-range-handle:first"),this.$handle1Tooltip=this.$handle1.find(".handle__tooltip"),this.$handle1TooltipText=this.$handle1Tooltip.find(".handle__tooltip__text .value"),this.$handle2=this.$el.find(".js-range-handle:last"),this.$handle2Tooltip=this.$handle2.find(".handle__tooltip"),this.$handle2TooltipText=this.$handle2Tooltip.find(".handle__tooltip__text .value"),this.halfHandleWidth=this.$handle1.outerWidth()/2,this.elOuterWidth=this.$el.outerWidth(),this.$rangeSelection=this.$el.find(".js-range-selection"),this.min=this.$el.data("range-min"),this.max=this.$el.data("range-max"),this.$val1Input=this.$handle1.find("input"),this.val1=this.$val1Input.val(),this.$val2Input=this.$handle2.find("input"),this.val2=this.$val2Input.val(),this.step=this.$el.data("range-step")||1,this.jumpToStep=this.$el.data("range-jump"),this.changeHandle1Pos(this.calculatePositionFromValue(this.val1)),this.changeHandle2Pos(this.calculatePositionFromValue(this.val2)),this.TOUCH?(this.on("touchstart",".js-range-handle",this.bind(this.mousedown)),this.on("touchstart",".js-range-bar",this.bind(this.mousedown)),this.on("touchstart",".js-range-selection",this.bind(this.mousedown))):(this.on("mousedown",".js-range-handle",this.bind(this.mousedown)),this.on("mousedown",".js-range-bar",this.bind(this.mousedown)),this.on("mousedown",".js-range-selection",this.bind(this.mousedown))),t(window).on("resize",this.bind(this.resize)),this},i.prototype.resize=function(){var t=this.elOuterWidth;this.elOuterWidth=this.$el.outerWidth(),this.elOffsetLeft=this.$el.offset().left,this.elOffsetRight=this.elOffsetLeft+this.elOuterWidth,this.changeHandle1Pos(this.handle1PosX/t*this.elOuterWidth),this.changeHandle2Pos(this.handle2PosX/t*this.elOuterWidth)},i.prototype.click=function(t){function e(t,e){return Math.abs(t-e)}this.elOffsetLeft=this.$el.offset().left;var i=t.pageX-this.elOffsetLeft,n=this.$handle1.offset().left+this.halfHandleWidth-this.elOffsetLeft,s=this.$handle2.offset().left+this.halfHandleWidth-this.elOffsetLeft;return 0>i?i=0:i>this.elOuterWidth&&(i=this.elOuterWidth),e(n,i)<e(s,i)?(this.changeHandle1Pos(i),this.$handle1):(this.changeHandle2Pos(i),this.$handle2)},i.prototype.mousedown=function(e){e.preventDefault(),this.TOUCH&&"touchstart"===e.type&&(e=e.originalEvent.touches[0]),this.elOffsetLeft=this.$el.offset().left,this.elOffsetRight=this.elOffsetLeft+this.elOuterWidth;var i=this.$el.find(e.target);return n=i.is(this.$handle1)||i.is(this.$handle2)?i:this.click(e),this.TOUCH?(t(document).on("touchmove"+s,this.bind(this.mousemove)),t(document).on("touchend"+s,this.bind(this.mouseup))):(t(document).on("mousemove"+s,this.bind(this.mousemove)),t(document).on("mouseup"+s,this.bind(this.mouseup))),!1},i.prototype.mousemove=function(t){t.preventDefault(),this.TOUCH&&"touchmove"===t.type&&(t=t.originalEvent.touches[0]);var e=t.pageX,i=e-this.elOffsetLeft;return 0>i?i=0:i>this.elOuterWidth&&(i=this.elOuterWidth),n.is(this.$handle1)?this.changeHandle1Pos(i):this.changeHandle2Pos(i),!1},i.prototype.mouseup=function(){return n=null,this.TOUCH?(t(document).off("touchmove"+s),t(document).off("touchend"+s)):(t(document).off("mousemove"+s),t(document).off("mouseup"+s)),!1},i.prototype.render=function(){return this.translate2d(this.$handle1,this.handle1PosX-this.halfHandleWidth),this.translate2d(this.$handle2,this.handle2PosX-this.halfHandleWidth),this.handle1PosX<this.handle2PosX?Modernizr.csstransforms?this.$rangeSelection.css({transform:"translate("+this.handle1PosX+"px,0)",width:this.handle2PosX-this.handle1PosX}):this.$rangeSelection.css({left:this.handle1PosX,width:this.handle2PosX-this.handle1PosX}):Modernizr.csstransforms?this.$rangeSelection.css({transform:"translate("+this.handle2PosX+"px,0)",width:this.handle1PosX-this.handle2PosX}):this.$rangeSelection.css({left:this.handle2PosX,width:this.handle1PosX-this.handle2PosX}),!1},i.prototype.calculateValue=function(t){return Math.round((t*((this.max-this.min)/this.elOuterWidth)+this.min)/this.step)*this.step},i.prototype.calculatePositionFromValue=function(t){var e=this.elOuterWidth/(this.max-this.min);return e*t-this.min*e},i.prototype.translate2d=function(t,e){Modernizr.csstransforms?t.css({transform:"translate("+Math.round(e)+"px, 0)"}):t.css({left:Math.round(e)})},i.prototype.changeHandle1Pos=function(t){var e=this.calculateValue(t);return this.handle1PosX=this.jumpToStep?this.calculatePositionFromValue(e):t,this.render(),this.val1=e,this.$val1Input.val(e),this.$handle1TooltipText.text(e),this.positionTooltip(this.$handle1Tooltip),this.triggerDataChange(),!1},i.prototype.changeHandle2Pos=function(t){var e=this.calculateValue(t);return this.handle2PosX=this.jumpToStep?this.calculatePositionFromValue(e):t,this.render(),this.val2=e,this.$val2Input.val(e),this.$handle2TooltipText.text(e),this.positionTooltip(this.$handle2Tooltip),this.triggerDataChange(),!1},i.prototype.positionTooltip=function(t){t.css({left:-(t.outerWidth()/2)+this.$handle1.width()/2});var e=this.$handle1Tooltip.offset().left,i=e+this.$handle1Tooltip.outerWidth(),n=this.$handle2Tooltip.offset().left,s=n+this.$handle2Tooltip.outerWidth(),o=Math.abs(i-n);this.handle1PosX!==this.handle2PosX||0!==this.handle1PosX&&this.handle2PosX!==this.elOuterWidth?i>=n&&this.handle1PosX<=this.handle2PosX?(this.$handle1Tooltip.find(".handle__tooltip__inner").css({left:Math.floor(-(o/2))}),this.$handle2Tooltip.find(".handle__tooltip__inner").css({left:Math.floor(+(o/2))})):s>e&&this.handle1PosX>this.handle2PosX?(o=Math.abs(e-s),this.$handle1Tooltip.find(".handle__tooltip__inner").css({left:Math.floor(+(o/2))}),this.$handle2Tooltip.find(".handle__tooltip__inner").css({left:Math.floor(-(o/2))})):(this.$handle1Tooltip.find(".handle__tooltip__inner").css({left:0}),this.$handle2Tooltip.find(".handle__tooltip__inner").css({left:0})):(this.$handle1Tooltip.find(".handle__tooltip__inner").css({left:0}),this.$handle2Tooltip.find(".handle__tooltip__inner").css({left:0}))},i.prototype.triggerDataChange=function(){this.$el.trigger({type:"rangepicker-data-change",values:[this.val1,this.val2]})},i}),define("app/util/Capabilities",[],function(){var t=!!window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>=1,e="ontouchstart"in window||t;return(" "+document.getElementsByTagName("html")[0].className+" ").indexOf(" touch ")>-1,Capabilities={system:{ios:!!navigator.userAgent.match(/(iPhone|iPod|iPad)/i),windowsphone:navigator.userAgent.indexOf("Windows Phone")>=0,android:navigator.userAgent.indexOf("Android")>0},touch:e,pointertouch:t},Capabilities.TOUCHSTART=t?"MSPointerDown":"touchstart",Capabilities.TOUCHMOVE=t?"MSPointerMove":"touchmove",Capabilities.TOUCHEND=t?"MSPointerUp":"touchend",Capabilities.DRAGSTART=e?Capabilities.TOUCHSTART:"mousedown",Capabilities.DRAGMOVE=e?Capabilities.TOUCHMOVE:"mousemove",Capabilities.DRAGEND=e?Capabilities.TOUCHEND:"mouseup",Capabilities}),define("app/modules/helpers/flyout",["jquery","app/util/AjaxLoader","app/util/Capabilities"],function(t,e,i){function n(t){return t.offset()}var s,o=".flyout",a=0,r=t("#site-container"),l={top:!0,bottom:!0,focusElements:"input:visible, select:visible, textarea:visible, a:visible, button:visible",handleTabKey:!0,data:{}};return s=function(){this.$el=null,this.ns=o+a++,this.id="flyout-target-"+a},s.prototype.init=function(e,i){return this.target=e,this.$wrapper=t("<div></div>").attr("data-flyout-for",this.target.split("#")[1]),this.options=t.extend({},l,i),this},s.prototype.destroy=function(){this.$target&&(this.$target=null)},s.prototype.getTarget=function(){return this.$wrapper},s.prototype.open=function(e,i){var n=t.Deferred(),s=this;return this.options,this.$el=t(e),this.isOpen?n:(this.createTarget(function(){n.resolve(s.$target)}),n.done(i),n.done(function(){s._open()}),n)},s.prototype._open=function(){var e=this,i=this.$target;i.find(".js-flyout-inner"),r.append(this.$wrapper),i.show(),i.attr("aria-hidden","false"),this.$el.addClass("is-flyout-active");var n="bottom";if(this.options.top)if(this.options.bottom){var s=this.$el.offset(),o=this.$el.height(),a=t(document).scrollTop(),l=s.top-a+o/2>t(window).height()/2;n=l?"top":"bottom"}else n="top";return this.position=n,"top"==n?(i.removeClass("is-b"),i.addClass("is-t")):(i.removeClass("is-t"),i.addClass("is-b")),this.isOpen=!0,this.repositionTarget(!0),t(window).on("resize"+this.ns,function(){e.repositionTarget()}),this.options.handleTabKey&&t(document).on("keydown"+this.ns,function(i){var n,s,o,a,r=e.$el,l=9;if(i.keyCode===l){if(a=i.shiftKey,n=t(i.target),s=e.$target,o=s.find(e.options.focusElements),0===o.length)return;a||!n.is(r)&&!n.parents().is(r)||(i.preventDefault(),o.first().focus()),n.parents().is(s)&&(a&&n.is(o.first())?(i.preventDefault(),r.focus()):!a&&n.is(o.last())&&(i.preventDefault(),r.focus()))}}),this.$target},s.prototype.close=function(){if(this.isOpen){t(document).off(this.ns),t(window).off(this.ns),this.$el.removeClass("is-flyout-active");var e=this.$target;e.hide(),e.attr("aria-hidden","true"),this.isOpen=!1}},s.prototype.repositionTarget=function(e){if(this.isOpen){var s=this.$target,o=s.children(".js-flyout-inner"),a=s.find(".js-indicator-t, .js-indicator-b"),r=o.parent().offset().left,l=r+o.parent().width(),h=n(this.$el),u=this.$el.outerHeight(),c=this.$el.outerWidth(),d=a.outerWidth(),p=o.outerWidth(),f=o.outerHeight(),m=t(document).scrollTop(),g=t(window).height(),v=h.top+("top"==this.position?0:u),y=h.left+c/2-p/2,b=0;r>y&&(b=r-y),y+p>l&&(b=l-(y+p)),s.css({position:"absolute",top:v,zIndex:2e4}),o.css({marginLeft:y+b-r}),y=p/2-d/2,y-=b,0>y&&(y=0),y+d>p&&(y=p-d),a.css({marginLeft:y}),e&&!i.system.windowsphone&&("bottom"==this.position&&v+f>m+g?t("body, html").animate({scrollTop:Math.min(h.top,v+f-g)},200):"top"==this.position&&m>v-f&&t("body, html").animate({scrollTop:Math.max(v-g+u,v-f)},200))}},s.prototype.refresh=function(){this.createTargetDeferred=null},s.prototype.createTarget=function(t){var i=this,n=this.target;if(!this.createTargetDeferred){this.$wrapper.children().remove();var s=new e(this.$wrapper);this.createTargetDeferred=s.load(n,{data:this.options.data}),this.createTargetDeferred.done(function(t){i.$target=t})}this.createTargetDeferred.done(t)},s.prototype.createFromTemplate=function(e){var i=t(t.parseHTML(t.trim(e)));return i.attr("id",this.id).hide(),t("body").append(i),contextTrigger.run(i),i},s}),define("app/modules/helpers/flyout-trigger",["jquery","app/modules/helpers/flyout","lib/util/Templates","app/util/Capabilities"],function(t,e,i,n){function s(t){t.preventDefault()}var o,a=".flyout-trigger",r=0;t("#site-page");var l;return o=function(){this.$el=null,this.ns=a+r++,this.options={overDelay:100,outDelay:500}},o.prototype.init=function(i){this.$el=t(i);var n=this.$el.data("flyout-target")||this.$el.attr("href");return this.flyout=new e,this.flyout.init(n),this.isHover=this.hasBehavior("hover"),this.isFocus=this.hasBehavior("focus"),this.isInteractive=this.hasBehavior("interactive"),"ontouchstart"in window&&(this.isHover=!1),this.isHover&&this.prepareHover(),this.listenForOpen(),this},o.prototype.destroy=function(){this.$el&&(this.removeListeners(),this.flyout.destroy(),this.flyout=null,this.$el=null)},o.prototype.open=function(){var t=this;if(!this.isOpen){l&&l.close(),this.positions||(this.positions=this.parsePositions(),this.flyout.options.top=this.positions.top,this.flyout.options.bottom=this.positions.bottom),this.flyout.open(this.$el).then(function(){t.$el.removeClass("is-loading")}),this.flyout.loading&&this.$el.addClass("is-loading"),l=this;var e=this.flyout.getTarget().add(this.$el);this.isHovered||!n.touch?(e.addClass("is-hovered"),e.removeClass("is-not-hovered")):(e.addClass("is-not-hovered"),e.removeClass("is-hovered")),this.$el.addClass("is-flyout-active"),this.isOpen=!0,this.removeListeners(),this.$el.on("click",s),this.isHovered?this.listenForClose():setTimeout(function(){t.listenForClose()},0)}},o.prototype.close=function(){this.isOpen&&(l=null,this.flyout.close(),this.$el.removeClass("is-flyout-active"),this.removeListeners(),this.listenForOpen(),this.isOpen=!1)},o.prototype.refresh=function(){this.flyout.refresh()},o.prototype.listenForOpen=function(){var e=this,i=function(t){t.preventDefault(),e.open()};this.isHover?(this.$el.on("mouseenter"+this.ns,this.hoverOpen),this.$el.on("mouseleave"+this.ns,this.hoverClose),this.$el.on("click"+this.ns,i),this.isFocus&&(this.$el.on("focusin"+this.ns,this.hoverOpen),this.$el.on("focusout"+this.ns,this.hoverClose))):this.$el.on("click"+this.ns,i),t(document).on("flyout.close",function(){e.close()})},o.prototype.listenForClose=function(){function e(e){t(e.target);var s=t.contains(i.$el[0],e.target)||e.target==i.$el[0],o=t.contains(n[0],e.target)||n[0]==e.target;s||o||i.close()}var i=this,n=this.flyout.getTarget(),s=function(t){t.preventDefault(),i.close()};this.isHover&&this.isHovered&&(this.$el.on("mouseleave"+this.ns,this.hoverLeave),this.$el.on("mouseenter"+this.ns,this.hoverEnter),this.isInteractive&&(n.on("mouseleave"+this.ns,this.hoverLeave),n.on("mouseenter"+this.ns,this.hoverEnter))),t(document).on("touchstart"+this.ns,e),t(document).on("mousedown"+this.ns,e),this.$el.on("click"+this.ns,s),t(document).on("focusin"+this.ns,e),this.$el.on("click"+this.ns,function(t){t.preventDefault()}),n.on("click"+this.ns,".js-flyout-close",function(t){t.preventDefault(),i.close()}),this.isHovered=!1},o.prototype.removeListeners=function(){var e=this.getTarget();t(window).off(this.ns),t(document).off(this.ns),this.$el.off(this.ns),e.off(this.ns)},o.prototype.prepareHover=function(){var t,e=this;this.hoverEnter=function(){clearTimeout(t)},this.hoverLeave=function(){clearTimeout(t),t=setTimeout(function(){e.close()},e.options.outDelay)},this.hoverOpen=function(i){var n="mouseenter"==i.type;clearTimeout(t),l?(e.isHovered=n,e.open()):t=setTimeout(function(){e.isHovered=n,e.open()},e.options.overDelay)},this.hoverClose=function(){clearTimeout(t)}},o.prototype.hasBehavior=function(e){return this.behavior||(this.behavior=this.$el.data("flyout-behavior"),this.behavior=this.behavior?this.behavior.split(","):[]),t.inArray(e,this.behavior)>=0},o.prototype.getTarget=function(){if(this.$target)return this.$target;var e,i=this.$el.data("flyout-target"),n=i||this.$el.attr("href");return n&&0===n.indexOf("#")?e=t(n):i||(e=this.$el.find(".js-flyout").eq(0)),e&&e.length||(e=t("<div>Cannot find flyout</div>")),this.$target=e,this.$target},o.prototype.on=function(t,e,i){this.$el.on(t+this.ns,e,i)},o.prototype.parsePositions=function(){var t={},e=this.hasBehavior("top"),i=this.hasBehavior("bottom");return e&&(t.top=!0),(i||!e)&&(t.bottom=!0),t},o}),define("app/modules/content/flyout-tooltip",["jquery","lib/util/Templates","app/modules/helpers/flyout-trigger"],function(t,e,i){var n,s,o=".flyout-tooltip",a=0;return n=function(){this.flyout=null,this.$target=null,this.$el=null,this.ns=o+a++,this.id="flyout-tooltip-target-"+a,this.text="",this.options={overDelay:500,outDelay:500}},n.prototype.init=function(e){var n=this;this.flyout=new i;var s=this.$el=t(e);if(this.text=s.data("tooltip-text")||s.attr("title"),s.removeAttr("title"),s.on("click"+this.ns,function(){s.attr("href")&&s.is("a")&&!s.data("lightbox")&&(document.location.href=s.attr("href"))}),this.text){var o=this.flyout.open;return this.flyout.open=function(){n.createTarget(),o.apply(this,arguments)},s.data("flyout-target","#"+this.id),s.data("flyout-behavior","hover,focus,top,bottom"),this.flyout.options=this.options,this.flyout.init(e),this}},n.prototype.createTarget=function(){if(!s){var i=e.render("flyout-tooltip-template");s=t(t.parseHTML(t.trim(i))),t("body").append(s)}this.$target||(this.$target=s,this.$target.attr("id",this.id).hide()),this.$target.find(".tooltip-text").text(this.text)},n.prototype.destroy=function(){this.flyout.destroy(),this.$el&&(this.$el.off(o),this.$el=null)},n}),define("app/modules/content/notification",["jquery","app/modules/BaseModule"],function(t,e){var i,n=".notification",s=0;return i=function(){this.$el=null,this.ns=n+s++},i.prototype=new e,i.prototype.init=function(e){var i=this;return this.$el=t(e),this.on("click",".js-notification-close",function(t){t.preventDefault(),i.$el.slideUp("fast",function(){i.$el.remove(),i.destroy()})}),this},i}),define("app/util/DOMUtil",["jquery"],function(t){function e(e,n){e||(e=t(":focus"));var s=t(e),o=s.parents("form").first();o.length||(o=t("body"));var a=o.find("input:visible, select:visible, textarea:visible, button:visible");a.filter(function(){return t(this).attr("tabindex")>=0?!0:void 0});var r=a.index(e);0>r||(r+=n,r>=0&&r<a.length?(s.blur(),a.eq(r).focus(),i||setTimeout(function(){a.eq(r).focus()},10)):s.blur())}var i="ontouchstart"in window,n={focusNextInput:function(t){e(t,1)},focusPrevInput:function(t){e(t,-1)},focusInput:function(t){t.focus()},triggerResize:function(){var e=this;this.resizeTimeout||(this.resizeTimeout=setTimeout(function(){e.resizeTimeout=!1,t(window).trigger("resize")},10))}};return n}),define("app/modules/helpers/autocomplete",["jquery","lib/util/Templates","app/util/DOMUtil","app/modules/BaseModule","app/modules/helpers/flyout","app/modules/helpers/JSONP"],function(t,e,i,n,s,o){var a,r=".autocomplete",l=0;return a=function(){this.$el=null,this.ns=r+l++,this.query=new o,this.value=""},a.prototype=new n,a.prototype.init=function(e){this.$el=t(e),this.query.init(this.$el.data("autocomplete-src"),this.bind(this.handleResult)),this.template=this.$el.data("autocomplete-tpl")||"autocomplete-location";var i=this.$el.data("autocomplete-target");return this.defaultBodyHtml="",i?(this.flyout=null,this.$body=t("#"+i),this.defaultBodyHtml=this.$body.html()):(this.flyout=new s,this.flyout.init("#flyout-autocomplete-template",{handleTabKey:!1,top:!1}),this.flyout.createTarget(),this.$body=this.flyout.getTarget().find(".js-autocomplete-body")),this.$body.on("mouseenter"+this.ns,".js-autocomplete-item",this.bind(function(t){this.selectItem(t.currentTarget)})),this.$body.on("mouseleave"+this.ns,".js-autocomplete-item",this.bind(function(){this.selectItem(-1)})),this.$body.on("mousedown"+this.ns+" "+"touchstart"+this.ns,".js-autocomplete-item",this.bind(function(t){t.preventDefault(),this.selectItem(t.currentTarget),this.complete()})),this.listenWhenClosed(),this},a.prototype.handleInput=function(t){var e=this.$el.val();if(e!=this.value){this.value=e;var i=!t&&this.$el.data("placeholder-active")&&this.$el.attr("placeholder")==e;this.value&&!i?this.query.search(this.value):(this.$body.html(this.defaultBodyHtml),this.flyout&&this.flyout.close())}},a.prototype.handleResult=function(t){if(clearTimeout(this.closeTimeout),!t)return this.flyout&&this.flyout.close(),void 0;var i=e.render(this.template,t);i&&(this.$body.html(i),this.flyout&&(this.flyout.open(this.$el),this.$body.css("min-width",this.$el.outerWidth()),this.flyout.repositionTarget()),this.selectItem(0))},a.prototype.handleBlur=function(){clearTimeout(this.closeTimeout),this.closeTimeout=setTimeout(this.bind(function(){this.flyout&&this.flyout.close(),this.listenWhenClosed()}),100)},a.prototype.handleFocus=function(){this.value="",this.handleInput(),this.listenWhenOpen()
},a.prototype.getItems=function(){return this.$body.find(".js-autocomplete-item")},a.prototype.selectItem=function(t){var e=this.getItems();"number"!=typeof t&&(t=e.index(t)),e.removeClass("active"),t>=0&&t<e.length&&e.eq(t).addClass("active")},a.prototype.getSelectedIndex=function(){var t=this.getItems();return t.index(t.filter(".active").first())},a.prototype.selectBy=function(t){var e=this.getItems(),i=this.getSelectedIndex()+t;0>i?i=0:i>=e.length&&(i=e.length-1),this.selectItem(i)},a.prototype.complete=function(){var t=this.getItems(),e=t.filter(".active").first();return e.length?(e.attr("href")?document.location.href=e.attr("href"):(this.$el.val(e.data("autocomplete")||e.text()).trigger("change"),i.focusNextInput(this.$el)),!0):!1},a.prototype.listenWhenOpen=function(){this.removeListeners(),t(document).on("keydown"+this.ns,this.bind(function(t){var e=9,i=13,n=38,s=40;if(this.$el,!(t.altKey||t.shiftKey||t.metaKey||t.ctrlKey))if(t.keyCode===i||t.keyCode===e)this.complete()&&t.preventDefault();else if(t.keyCode==n||t.keyCode==s){t.preventDefault();var o=t.keyCode==n?-1:1;this.selectBy(o)}})),this.on("keyup",this.bind(this.handleInput)),this.on("blur",this.bind(this.handleBlur))},a.prototype.listenWhenClosed=function(){this.removeListeners(),this.on("focus",this.bind(this.handleFocus))},a.prototype.removeListeners=function(){this.$el.off(this.ns),t(document).off(this.ns),t(window).off(this.ns)},a.prototype.destroy=function(){this.$el&&(this.removeListeners(),this.$body.off(this.ns),this.$el=null)},a}),define("app/modules/helpers/collapsable-trigger",["jquery","app/util/DOMUtil"],function(t,e){function i(e,i){for(var n=e.parents(),s=0;s<n.length;s++){var o=n.eq(s),a=o.find(i);if(a.length)return a.eq(0);if(o.is(i))return o}return t("<div>")}var n,s=".collapsable-trigger";return n=function(){this.$element=null,this.$target=null,this.ns=s},n.prototype.init=function(i){var n=this;return this.$element=t(i),this.targetSelector=this.$element.data("toggletarget")||".js-collapsable",this.hiddenClass=this.$element.data("targetclass")||"",this.visibleClass=this.hiddenClass?"":"is-visible",this.on("click",function(t){t.preventDefault(),n.$element.toggleClass("is-active-collapsable-trigger"),n.getTarget().toggleClass(n.hiddenClass),n.getTarget().toggleClass(n.visibleClass),e.triggerResize()}),this},n.prototype.open=function(){this.$element.addClass("is-active-collapsable-trigger"),this.getTarget().removeClass(this.hiddenClass),this.getTarget().addClass(this.visibleClass),e.triggerResize()},n.prototype.close=function(){this.$element.removeClass("is-active-collapsable-trigger"),this.getTarget().addClass(this.hiddenClass),this.getTarget().removeClass(this.visibleClass),e.triggerResize()},n.prototype.isOpen=function(){return this.hiddenClass?!this.getTarget().hasClass(this.hiddenClass):this.getTarget().hasClass(this.visibleClass)},n.prototype.destroy=function(){this.$element&&(this.$element.off(s),this.$element=null)},n.prototype.getTarget=function(){return this.$target||(this.$target=this.targetSelector.indexOf("#")>=0?t(this.targetSelector):i(this.$element,this.targetSelector)),this.$target},n.prototype.on=function(t,e,i){this.$element.on(t+s,e,i)},n}),define("app/modules/nav/originChooser",["jquery"],function(t){var e,i=".origin-chooser";return e=function(){this.$element=null,this.$mainPanes=null,this.$activeMainPane=null,this.$activePane=null},e.prototype.init=function(e){var i=this;this.$element=t(e),this.$mainPanes=this.$element.find(".tabs-pane"),this.on("click",".js-origin-chooser-trigger",function(e){e.preventDefault(),i.showDetail(t(this))}),this.on("click",".origin-region a",function(t){t.preventDefault(),i.hideDetail()}),this.on("click",".js-tabs-link",function(t){t.preventDefault(),i.reset()})},e.prototype.showDetail=function(e){var i,n;return i=e,n=t(i.attr("href")),this.$activeMainPane=this.getActiveMainPane(),n.length?(this.$activeMainPane.hide(),this.$activePane=n,n.show(),void 0):"can not find target: "+i.attr("href")},e.prototype.getActiveMainPane=function(){return this.$mainPanes.filter(".is-active")},e.prototype.reset=function(){this.$activeMainPane&&this.$activeMainPane.attr("style",""),this.$activePane&&this.$activePane.hide(),this.$activeMainPane=null,this.$activePane=null},e.prototype.hideDetail=function(){this.getActiveMainPane().show(),this.$activePane.hide()},e.prototype.destroy=function(){this.$element&&(this.$element.off(i),this.$element=null)},e.prototype.on=function(t,e,n){this.$element.on(t+i,e,n)},e}),define("app/modules/nav/skipNav",["jquery"],function(t){var e,i=".skip-navigation";return e=function(){this.activeModule=null},e.prototype.init=function(e){return this.element=e,this.$element=t(e),this.on("click","a[href^='#']",function(){t("#"+t(this).attr("href").slice(1)).focus()}),this},e.prototype.registerModule=function(t){this.activeModule&&this.activeModule.destroy(),this.activeModule=new t,this.activeModule.init(this.element)},e.prototype.destroy=function(){this.$element&&(this.$element.off(i),this.$element=null)},e.prototype.on=function(t,e,n){this.$element.on(t+i,e,n)},e}),define("app/modules/stages/stages",["jquery","app/plugins/mediaDispatcher","app/util/Capabilities"],function(t,e,i){var n,s,o;s=t(window),o=t(document);var a=!!navigator.userAgent.match(/webkit/i);return n=function(){this.$el=null,this.$layer=null,this.topPosition=0,this.height=0,this.bottomPosition=0,this.created=!1,this.ratio=.4},n.prototype.init=function(i){return this.$el=t(i),this.$layer=this.$el.find(".stage-layer").eq(0),this.create(),e.isOrBelow("mobile").then(this.endParallax,this).otherwise(this.startParallax,this),this.$el.addClass("is-loaded"),this},n.prototype.destroy=function(){this.$el=null,this.$layer=null,e.is("mobile").unlisten(this),this.endParallax()},n.prototype.createImageLayer=function(e){if(e=this.$el.find(".stage-image"),!e.length){var i=this.$layer.css("background-image").match(/url\((.+)\)/)[1];i=i.split('"').join(""),i&&(e=t("<img />",{"class":"stage-image",src:i}),this.$layer.after(e))}return e[0]},n.prototype.endParallax=function(){o.off(".stagesParallax"),s.off(".stagesParallax"),this.$layer.css({height:"100%",transform:"none",marginTop:0})},n.prototype.create=function(){this.created||(this.created=!0,Modernizr.backgroundsize||(this.createImageLayer(this.$el.find("img:eq(0)"))?this.$layer.hide():this.$el.hide()))},n.prototype.startParallax=function(){var t=this;return this.create(),i.touch?(this.endParallax(),void 0):(s.on("resize.stagesParallax",function(){t.topPosition=t.$el.offset().top,t.height=t.$el.height(),t.bottomPosition=t.topPosition+t.height,t.$layer.height((t.ratio+1)*t.height)}).trigger("resize.stagesParallax"),s.on("scroll.stagesParallax",function(){var e=s.scrollTop();e<=t.bottomPosition&&(Modernizr.csstransforms3d&&a?t.$layer.css("transform","translateY("+(t.topPosition-e)*-1*(this.ratio||.4)+"px) translateZ(0px)"):Modernizr.csstransforms?t.$layer.css("transform","translate(0,"+(t.topPosition-e)*-1*(this.ratio||.4)+"px)"):t.$layer.css("margin-top",(t.topPosition-e)*-1*this.ratio+"px"))}).trigger("scroll.stagesParallax"),void 0)},n.prototype.blurIn=function(){this.$el.addClass("is-subnav-open")},n.prototype.blurOut=function(){this.$el.removeClass("is-subnav-open")},n}),define("app/modules/forms/watchChange",["jquery","app/modules/BaseModule"],function(t,e){var i,n=".WatchChange",s=0,o=t("html").hasClass("lt-ie10");return i=function(){this.$el=null,this.ns=n+s++},i.prototype=new e,i.prototype.init=function(e){this.$el=t(e),this.originalValues=this.$el.serialize(),this.on("change",this.bind(this.invalidate)),this.on("change",":input",this.bind(this.invalidate)),this.on("keyup",":input",this.bind(this.invalidate)),this.on("click","input[type=reset]",this.bind(o?this.iefix:this.invalidate))},i.prototype.iefix=function(){var t=this;setTimeout(function(){var e=t.$el.find("input");document.createEventObject?e.each(function(){this.fireEvent("onblur",document.createEventObject())}):e.trigger("blur"),t.invalidate()},1)},i.prototype.invalidate=function(){clearTimeout(this.validationTimeout),this.validationTimeout=setTimeout(this.bind(this.handleChange),50)},i.prototype.handleChange=function(){var t=this.$el.serialize()!=this.originalValues;this.$el.find(".js-enable-on-change").prop("disabled",!t)},i}),function(t){function e(t,e){return function(i){return l(t.call(this,i),e)}}function i(t,e){return function(i){return this.lang().ordinal(t.call(this,i),e)}}function n(){}function s(t){w(t),a(this,t)}function o(t){var e=f(t),i=e.year||0,n=e.month||0,s=e.week||0,o=e.day||0,a=e.hour||0,r=e.minute||0,l=e.second||0,h=e.millisecond||0;this._input=t,this._milliseconds=+h+1e3*l+6e4*r+36e5*a,this._days=+o+7*s,this._months=+n+12*i,this._data={},this._bubble()}function a(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return e.hasOwnProperty("toString")&&(t.toString=e.toString),e.hasOwnProperty("valueOf")&&(t.valueOf=e.valueOf),t}function r(t){return 0>t?Math.ceil(t):Math.floor(t)}function l(t,e){for(var i=t+"";i.length<e;)i="0"+i;return i}function h(t,e,i,n){var s,o,a=e._milliseconds,r=e._days,l=e._months;a&&t._d.setTime(+t._d+a*i),(r||l)&&(s=t.minute(),o=t.hour()),r&&t.date(t.date()+r*i),l&&t.month(t.month()+l*i),a&&!n&&ee.updateOffset(t),(r||l)&&(t.minute(s),t.hour(o))}function u(t){return"[object Array]"===Object.prototype.toString.call(t)}function c(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function d(t,e,i){var n,s=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),a=0;for(n=0;s>n;n++)(i&&t[n]!==e[n]||!i&&g(t[n])!==g(e[n]))&&a++;return a+o}function p(t){if(t){var e=t.toLowerCase().replace(/(.)s$/,"$1");t=Ae[t]||Fe[e]||e}return t}function f(t){var e,i,n={};for(i in t)t.hasOwnProperty(i)&&(e=p(i),e&&(n[e]=t[i]));return n}function m(e){var i,n;if(0===e.indexOf("week"))i=7,n="day";else{if(0!==e.indexOf("month"))return;i=12,n="month"}ee[e]=function(s,o){var a,r,l=ee.fn._lang[e],h=[];if("number"==typeof s&&(o=s,s=t),r=function(t){var e=ee().utc().set(n,t);return l.call(ee.fn._lang,e,s||"")},null!=o)return r(o);for(a=0;i>a;a++)h.push(r(a));return h}}function g(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=e>=0?Math.floor(e):Math.ceil(e)),i}function v(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function y(t){return b(t)?366:365}function b(t){return 0===t%4&&0!==t%100||0===t%400}function w(t){var e;t._a&&-2===t._pf.overflow&&(e=t._a[ae]<0||t._a[ae]>11?ae:t._a[re]<1||t._a[re]>v(t._a[oe],t._a[ae])?re:t._a[le]<0||t._a[le]>23?le:t._a[he]<0||t._a[he]>59?he:t._a[ue]<0||t._a[ue]>59?ue:t._a[ce]<0||t._a[ce]>999?ce:-1,t._pf._overflowDayOfYear&&(oe>e||e>re)&&(e=re),t._pf.overflow=e)}function $(t){t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function k(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length)),t._isValid}function T(t){return t?t.toLowerCase().replace("_","-"):t}function C(t,e){return e.abbr=t,de[t]||(de[t]=new n),de[t].set(e),de[t]}function _(t){delete de[t]}function D(t){var e,i,n,s,o=0,a=function(t){if(!de[t]&&pe)try{require("./lang/"+t)}catch(e){}return de[t]};if(!t)return ee.fn._lang;if(!u(t)){if(i=a(t))return i;t=[t]}for(;o<t.length;){for(s=T(t[o]).split("-"),e=s.length,n=T(t[o+1]),n=n?n.split("-"):null;e>0;){if(i=a(s.slice(0,e).join("-")))return i;if(n&&n.length>=e&&d(s,n,!0)>=e-1)break;e--}o++}return ee.fn._lang}function x(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function M(t){var e,i,n=t.match(ve);for(e=0,i=n.length;i>e;e++)n[e]=ze[n[e]]?ze[n[e]]:x(n[e]);return function(s){var o="";for(e=0;i>e;e++)o+=n[e]instanceof Function?n[e].call(s,t):n[e];return o}}function S(t,e){return t.isValid()?(e=j(e,t.lang()),He[e]||(He[e]=M(e)),He[e](t)):t.lang().invalidDate()}function j(t,e){function i(t){return e.longDateFormat(t)||t}var n=5;for(ye.lastIndex=0;n>=0&&ye.test(t);)t=t.replace(ye,i),ye.lastIndex=0,n-=1;return t}function L(t,e){var i;switch(t){case"DDDD":return $e;case"YYYY":case"GGGG":case"gggg":return ke;case"YYYYY":case"GGGGG":case"ggggg":return Te;case"S":case"SS":case"SSS":case"DDD":return we;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return _e;case"a":case"A":return D(e._l)._meridiemParse;case"X":return Me;case"Z":case"ZZ":return De;case"T":return xe;case"SSSS":return Ce;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"ww":case"W":case"WW":case"e":case"E":return be;default:return i=new RegExp(q(H(t.replace("\\","")),"i"))}}function P(t){var e=(De.exec(t)||[])[0],i=(e+"").match(Ee)||["-",0,0],n=+(60*i[1])+g(i[2]);return"+"===i[0]?-n:n}function E(t,e,i){var n,s=i._a;switch(t){case"M":case"MM":null!=e&&(s[ae]=g(e)-1);break;case"MMM":case"MMMM":n=D(i._l).monthsParse(e),null!=n?s[ae]=n:i._pf.invalidMonth=e;break;case"D":case"DD":null!=e&&(s[re]=g(e));break;case"DDD":case"DDDD":null!=e&&(i._dayOfYear=g(e));break;case"YY":s[oe]=g(e)+(g(e)>68?1900:2e3);break;case"YYYY":case"YYYYY":s[oe]=g(e);break;case"a":case"A":i._isPm=D(i._l).isPM(e);break;case"H":case"HH":case"h":case"hh":s[le]=g(e);break;case"m":case"mm":s[he]=g(e);break;case"s":case"ss":s[ue]=g(e);break;case"S":case"SS":case"SSS":case"SSSS":s[ce]=g(1e3*("0."+e));break;case"X":i._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":i._useUTC=!0,i._tzm=P(e);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":t=t.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":t=t.substr(0,2),e&&(i._w=i._w||{},i._w[t]=e)}}function O(t){var e,i,n,s,o,a,r,l,h,u,c=[];if(!t._d){for(n=A(t),t._w&&null==t._a[re]&&null==t._a[ae]&&(o=function(e){return e?e.length<3?parseInt(e,10)>68?"19"+e:"20"+e:e:null==t._a[oe]?ee().weekYear():t._a[oe]},a=t._w,null!=a.GG||null!=a.W||null!=a.E?r=X(o(a.GG),a.W||1,a.E,4,1):(l=D(t._l),h=null!=a.d?U(a.d,l):null!=a.e?parseInt(a.e,10)+l._week.dow:0,u=parseInt(a.w,10)||1,null!=a.d&&h<l._week.dow&&u++,r=X(o(a.gg),u,h,l._week.doy,l._week.dow)),t._a[oe]=r.year,t._dayOfYear=r.dayOfYear),t._dayOfYear&&(s=null==t._a[oe]?n[oe]:t._a[oe],t._dayOfYear>y(s)&&(t._pf._overflowDayOfYear=!0),i=W(s,0,t._dayOfYear),t._a[ae]=i.getUTCMonth(),t._a[re]=i.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=c[e]=n[e];for(;7>e;e++)t._a[e]=c[e]=null==t._a[e]?2===e?1:0:t._a[e];c[le]+=g((t._tzm||0)/60),c[he]+=g((t._tzm||0)%60),t._d=(t._useUTC?W:R).apply(null,c)}}function I(t){var e;t._d||(e=f(t._i),t._a=[e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond],O(t))}function A(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function F(t){t._a=[],t._pf.empty=!0;var e,i,n,s,o,a=D(t._l),r=""+t._i,l=r.length,h=0;for(n=j(t._f,a).match(ve)||[],e=0;e<n.length;e++)s=n[e],i=(L(s,t).exec(r)||[])[0],i&&(o=r.substr(0,r.indexOf(i)),o.length>0&&t._pf.unusedInput.push(o),r=r.slice(r.indexOf(i)+i.length),h+=i.length),ze[s]?(i?t._pf.empty=!1:t._pf.unusedTokens.push(s),E(s,i,t)):t._strict&&!i&&t._pf.unusedTokens.push(s);t._pf.charsLeftOver=l-h,r.length>0&&t._pf.unusedInput.push(r),t._isPm&&t._a[le]<12&&(t._a[le]+=12),t._isPm===!1&&12===t._a[le]&&(t._a[le]=0),O(t),w(t)}function H(t){return t.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,s){return e||i||n||s})}function q(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Y(t){var e,i,n,s,o;if(0===t._f.length)return t._pf.invalidFormat=!0,t._d=new Date(0/0),void 0;for(s=0;s<t._f.length;s++)o=0,e=a({},t),$(e),e._f=t._f[s],F(e),k(e)&&(o+=e._pf.charsLeftOver,o+=10*e._pf.unusedTokens.length,e._pf.score=o,(null==n||n>o)&&(n=o,i=e));a(t,i||e)}function z(t){var e,i=t._i,n=Se.exec(i);if(n){for(t._pf.iso=!0,e=4;e>0;e--)if(n[e]){t._f=Le[e-1]+(n[6]||" ");break}for(e=0;4>e;e++)if(Pe[e][1].exec(i)){t._f+=Pe[e][0];break}De.exec(i)&&(t._f+="Z"),F(t)}else t._d=new Date(i)}function N(e){var i=e._i,n=fe.exec(i);i===t?e._d=new Date:n?e._d=new Date(+n[1]):"string"==typeof i?z(e):u(i)?(e._a=i.slice(0),O(e)):c(i)?e._d=new Date(+i):"object"==typeof i?I(e):e._d=new Date(i)}function R(t,e,i,n,s,o,a){var r=new Date(t,e,i,n,s,o,a);return 1970>t&&r.setFullYear(t),r}function W(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function U(t,e){if("string"==typeof t)if(isNaN(t)){if(t=e.weekdaysParse(t),"number"!=typeof t)return null}else t=parseInt(t,10);return t}function B(t,e,i,n,s){return s.relativeTime(e||1,!!i,t,n)}function G(t,e,i){var n=se(Math.abs(t)/1e3),s=se(n/60),o=se(s/60),a=se(o/24),r=se(a/365),l=45>n&&["s",n]||1===s&&["m"]||45>s&&["mm",s]||1===o&&["h"]||22>o&&["hh",o]||1===a&&["d"]||25>=a&&["dd",a]||45>=a&&["M"]||345>a&&["MM",se(a/30)]||1===r&&["y"]||["yy",r];return l[2]=e,l[3]=t>0,l[4]=i,B.apply({},l)}function V(t,e,i){var n,s=i-e,o=i-t.day();return o>s&&(o-=7),s-7>o&&(o+=7),n=ee(t).add("d",o),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function X(t,e,i,n,s){var o,a,r=new Date(Date.UTC(t,0)).getUTCDay();return i=null!=i?i:s,o=s-r+(r>n?7:0),a=7*(e-1)+(i-s)+o+1,{year:a>0?t:t-1,dayOfYear:a>0?a:y(t-1)+a}}function Z(t){var e=t._i,i=t._f;return"undefined"==typeof t._pf&&$(t),null===e?ee.invalid({nullInput:!0}):("string"==typeof e&&(t._i=e=D().preparse(e)),ee.isMoment(e)?(t=a({},e),t._d=new Date(+e._d)):i?u(i)?Y(t):F(t):N(t),new s(t))}function K(t,e){ee.fn[t]=ee.fn[t+"s"]=function(t){var i=this._isUTC?"UTC":"";return null!=t?(this._d["set"+i+e](t),ee.updateOffset(this),this):this._d["get"+i+e]()}}function J(t){ee.duration.fn[t]=function(){return this._data[t]}}function Q(t,e){ee.duration.fn["as"+t]=function(){return+this/e}}function te(t){var e=!1,i=ee;"undefined"==typeof ender&&(this.moment=t?function(){return!e&&console&&console.warn&&(e=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),i.apply(null,arguments)}:ee)}for(var ee,ie,ne="2.4.0",se=Math.round,oe=0,ae=1,re=2,le=3,he=4,ue=5,ce=6,de={},pe="undefined"!=typeof module&&module.exports,fe=/^\/?Date\((\-?\d+)/i,me=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,ge=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,ve=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,ye=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,be=/\d\d?/,we=/\d{1,3}/,$e=/\d{3}/,ke=/\d{1,4}/,Te=/[+\-]?\d{1,6}/,Ce=/\d+/,_e=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,De=/Z|[\+\-]\d\d:?\d\d/i,xe=/T/i,Me=/[\+\-]?\d+(\.\d{1,3})?/,Se=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d:?\d\d|Z)?)?$/,je="YYYY-MM-DDTHH:mm:ssZ",Le=["YYYY-MM-DD","GGGG-[W]WW","GGGG-[W]WW-E","YYYY-DDD"],Pe=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Ee=/([\+\-]|\d\d)/gi,Oe="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),Ie={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},Ae={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Fe={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},He={},qe="DDD w W M D d".split(" "),Ye="M D H h m s w W".split(" "),ze={M:function(){return this.month()+1},MMM:function(t){return this.lang().monthsShort(this,t)},MMMM:function(t){return this.lang().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.lang().weekdaysMin(this,t)},ddd:function(t){return this.lang().weekdaysShort(this,t)},dddd:function(t){return this.lang().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return l(this.year()%100,2)},YYYY:function(){return l(this.year(),4)},YYYYY:function(){return l(this.year(),5)},gg:function(){return l(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return l(this.weekYear(),5)},GG:function(){return l(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return l(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return g(this.milliseconds()/100)},SS:function(){return l(g(this.milliseconds()/10),2)},SSS:function(){return l(this.milliseconds(),3)},SSSS:function(){return l(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+l(g(t/60),2)+":"+l(g(t)%60,2)},ZZ:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+l(g(10*t/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}},Ne=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];qe.length;)ie=qe.pop(),ze[ie+"o"]=i(ze[ie],ie);for(;Ye.length;)ie=Ye.pop(),ze[ie+ie]=e(ze[ie],2);for(ze.DDDD=e(ze.DDD,3),a(n.prototype,{set:function(t){var e,i;for(i in t)e=t[i],"function"==typeof e?this[i]=e:this["_"+i]=e},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t){var e,i,n;for(this._monthsParse||(this._monthsParse=[]),e=0;12>e;e++)if(this._monthsParse[e]||(i=ee.utc([2e3,e]),n="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[e]=new RegExp(n.replace(".",""),"i")),this._monthsParse[e].test(t))return e},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},weekdaysParse:function(t){var e,i,n;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(i=ee([2e3,1]).day(e),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[e]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},isPM:function(t){return"p"===(t+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(t,e){var i=this._calendar[t];return"function"==typeof i?i.apply(e):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,i,n){var s=this._relativeTime[i];return"function"==typeof s?s(t,e,i,n):s.replace(/%d/i,t)},pastFuture:function(t,e){var i=this._relativeTime[t>0?"future":"past"];return"function"==typeof i?i(e):i.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",preparse:function(t){return t},postformat:function(t){return t},week:function(t){return V(t,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),ee=function(e,i,n,s){return"boolean"==typeof n&&(s=n,n=t),Z({_i:e,_f:i,_l:n,_strict:s,_isUTC:!1})},ee.utc=function(e,i,n,s){var o;return"boolean"==typeof n&&(s=n,n=t),o=Z({_useUTC:!0,_isUTC:!0,_l:n,_i:e,_f:i,_strict:s}).utc()},ee.unix=function(t){return ee(1e3*t)},ee.duration=function(t,e){var i,n,s,a=ee.isDuration(t),r="number"==typeof t,l=a?t._input:r?{}:t,h=null;return r?e?l[e]=t:l.milliseconds=t:(h=me.exec(t))?(i="-"===h[1]?-1:1,l={y:0,d:g(h[re])*i,h:g(h[le])*i,m:g(h[he])*i,s:g(h[ue])*i,ms:g(h[ce])*i}):(h=ge.exec(t))&&(i="-"===h[1]?-1:1,s=function(t){var e=t&&parseFloat(t.replace(",","."));return(isNaN(e)?0:e)*i},l={y:s(h[2]),M:s(h[3]),d:s(h[4]),h:s(h[5]),m:s(h[6]),s:s(h[7]),w:s(h[8])}),n=new o(l),a&&t.hasOwnProperty("_lang")&&(n._lang=t._lang),n},ee.version=ne,ee.defaultFormat=je,ee.updateOffset=function(){},ee.lang=function(t,e){var i;return t?(e?C(T(t),e):null===e?(_(t),t="en"):de[t]||D(t),i=ee.duration.fn._lang=ee.fn._lang=D(t),i._abbr):ee.fn._lang._abbr},ee.langData=function(t){return t&&t._lang&&t._lang._abbr&&(t=t._lang._abbr),D(t)},ee.isMoment=function(t){return t instanceof s},ee.isDuration=function(t){return t instanceof o},ie=Ne.length-1;ie>=0;--ie)m(Ne[ie]);for(ee.normalizeUnits=function(t){return p(t)},ee.invalid=function(t){var e=ee.utc(0/0);return null!=t?a(e._pf,t):e._pf.userInvalidated=!0,e},ee.parseZone=function(t){return ee(t).parseZone()},a(ee.fn=s.prototype,{clone:function(){return ee(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return S(ee(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return k(this)},isDSTShifted:function(){return this._a?this.isValid()&&d(this._a,(this._isUTC?ee.utc(this._a):ee(this._a)).toArray())>0:!1},parsingFlags:function(){return a({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(t){var e=S(this,t||ee.defaultFormat);return this.lang().postformat(e)},add:function(t,e){var i;return i="string"==typeof t?ee.duration(+e,t):ee.duration(t,e),h(this,i,1),this},subtract:function(t,e){var i;return i="string"==typeof t?ee.duration(+e,t):ee.duration(t,e),h(this,i,-1),this},diff:function(t,e,i){var n,s,o=this._isUTC?ee(t).zone(this._offset||0):ee(t).local(),a=6e4*(this.zone()-o.zone());return e=p(e),"year"===e||"month"===e?(n=432e5*(this.daysInMonth()+o.daysInMonth()),s=12*(this.year()-o.year())+(this.month()-o.month()),s+=(this-ee(this).startOf("month")-(o-ee(o).startOf("month")))/n,s-=6e4*(this.zone()-ee(this).startOf("month").zone()-(o.zone()-ee(o).startOf("month").zone()))/n,"year"===e&&(s/=12)):(n=this-o,s="second"===e?n/1e3:"minute"===e?n/6e4:"hour"===e?n/36e5:"day"===e?(n-a)/864e5:"week"===e?(n-a)/6048e5:n),i?s:r(s)},from:function(t,e){return ee.duration(this.diff(t)).lang(this.lang()._abbr).humanize(!e)},fromNow:function(t){return this.from(ee(),t)},calendar:function(){var t=this.diff(ee().zone(this.zone()).startOf("day"),"days",!0),e=-6>t?"sameElse":-1>t?"lastWeek":0>t?"lastDay":1>t?"sameDay":2>t?"nextDay":7>t?"nextWeek":"sameElse";return this.format(this.lang().calendar(e,this))},isLeapYear:function(){return b(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=U(t,this.lang()),this.add({d:t-e})):e},month:function(t){var e,i=this._isUTC?"UTC":"";return null!=t?"string"==typeof t&&(t=this.lang().monthsParse(t),"number"!=typeof t)?this:(e=this.date(),this.date(1),this._d["set"+i+"Month"](t),this.date(Math.min(e,this.daysInMonth())),ee.updateOffset(this),this):this._d["get"+i+"Month"]()},startOf:function(t){switch(t=p(t)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t?this.weekday(0):"isoWeek"===t&&this.isoWeekday(1),this},endOf:function(t){return t=p(t),this.startOf(t).add("isoWeek"===t?"week":t,1).subtract("ms",1)},isAfter:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)>+ee(t).startOf(e)},isBefore:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)<+ee(t).startOf(e)},isSame:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)===+ee(t).startOf(e)},min:function(t){return t=ee.apply(null,arguments),this>t?this:t},max:function(t){return t=ee.apply(null,arguments),t>this?this:t},zone:function(t){var e=this._offset||0;return null==t?this._isUTC?e:this._d.getTimezoneOffset():("string"==typeof t&&(t=P(t)),Math.abs(t)<16&&(t=60*t),this._offset=t,this._isUTC=!0,e!==t&&h(this,ee.duration(e-t,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(t){return t=t?ee(t).zone():0,0===(this.zone()-t)%60},daysInMonth:function(){return v(this.year(),this.month())},dayOfYear:function(t){var e=se((ee(this).startOf("day")-ee(this).startOf("year"))/864e5)+1;return null==t?e:this.add("d",t-e)},weekYear:function(t){var e=V(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==t?e:this.add("y",t-e)},isoWeekYear:function(t){var e=V(this,1,4).year;return null==t?e:this.add("y",t-e)},week:function(t){var e=this.lang().week(this);return null==t?e:this.add("d",7*(t-e))},isoWeek:function(t){var e=V(this,1,4).week;return null==t?e:this.add("d",7*(t-e))},weekday:function(t){var e=(this.day()+7-this.lang()._week.dow)%7;return null==t?e:this.add("d",t-e)},isoWeekday:function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},get:function(t){return t=p(t),this[t]()},set:function(t,e){return t=p(t),"function"==typeof this[t]&&this[t](e),this},lang:function(e){return e===t?this._lang:(this._lang=D(e),this)}}),ie=0;ie<Oe.length;ie++)K(Oe[ie].toLowerCase().replace(/s$/,""),Oe[ie]);K("year","FullYear"),ee.fn.days=ee.fn.day,ee.fn.months=ee.fn.month,ee.fn.weeks=ee.fn.week,ee.fn.isoWeeks=ee.fn.isoWeek,ee.fn.toJSON=ee.fn.toISOString,a(ee.duration.fn=o.prototype,{_bubble:function(){var t,e,i,n,s=this._milliseconds,o=this._days,a=this._months,l=this._data;l.milliseconds=s%1e3,t=r(s/1e3),l.seconds=t%60,e=r(t/60),l.minutes=e%60,i=r(e/60),l.hours=i%24,o+=r(i/24),l.days=o%30,a+=r(o/30),l.months=a%12,n=r(a/12),l.years=n},weeks:function(){return r(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*g(this._months/12)},humanize:function(t){var e=+this,i=G(e,!t,this.lang());return t&&(i=this.lang().pastFuture(e,i)),this.lang().postformat(i)},add:function(t,e){var i=ee.duration(t,e);return this._milliseconds+=i._milliseconds,this._days+=i._days,this._months+=i._months,this._bubble(),this},subtract:function(t,e){var i=ee.duration(t,e);return this._milliseconds-=i._milliseconds,this._days-=i._days,this._months-=i._months,this._bubble(),this
},get:function(t){return t=p(t),this[t.toLowerCase()+"s"]()},as:function(t){return t=p(t),this["as"+t.charAt(0).toUpperCase()+t.slice(1)+"s"]()},lang:ee.fn.lang,toIsoString:function(){var t=Math.abs(this.years()),e=Math.abs(this.months()),i=Math.abs(this.days()),n=Math.abs(this.hours()),s=Math.abs(this.minutes()),o=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(i?i+"D":"")+(n||s||o?"T":"")+(n?n+"H":"")+(s?s+"M":"")+(o?o+"S":""):"P0D"}});for(ie in Ie)Ie.hasOwnProperty(ie)&&(Q(ie,Ie[ie]),J(ie.toLowerCase()));Q("Weeks",6048e5),ee.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},ee.lang("en",{ordinal:function(t){var e=t%10,i=1===g(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+i}}),pe?(module.exports=ee,te(!0)):"function"==typeof define&&define.amd?define("moment",["require","exports","module"],function(e,i,n){return n.config().noGlobal!==!0&&te(n.config().noGlobal===t),ee}):te()}.call(this),define("app/modules/forms/datePicker",["jquery","lib/util/EventDispatcher","app/Config","moment"],function(t,e,i,n){function s(e){var i=this;this.$el=t(e),this.dayConditions=[],this.visibleDate=new Date,this.selectedDate=null,this.todayDate=new Date,this.minDate=new Date,this.maxDate=null,this.specialDates={},this.titleLabel=null,this.addCondition(s.checkMinDate),this.addCondition(s.checkMaxDate),this.addCondition(s.checkWithinMonth),this.addCondition(s.checkToday),this.addCondition(s.checkSelected),this.addCondition(s.checkSpecialDates),this.$el.on("click",".next-month",function(t){t.preventDefault(),i.switchMonth(1)}),this.$el.on("click",".prev-month",function(t){t.preventDefault(),i.switchMonth(-1)}),this.$el.on("click","tbody a",function(e){e.preventDefault();var n=t(this).data("value");i.trigger("click",n)}),this.renderMain(),this.invalidate()}function o(t){return t.setHours(0,0,0,0),t}function a(t){var e;return t instanceof Date?new Date(t):(e=n(t,["L","DD.MM.YYYY"]),e&&e.isValid()&&e.toDate())}function r(t,e){return t==e?!0:t&&e?t.setHours(0,0,0,0)==e.setHours(0,0,0,0):!1}function l(t,e){return t.setHours(0,0,0,0)<e.setHours(0,0,0,0)}function h(t,e){return t.setHours(0,0,0,0)>e.setHours(0,0,0,0)}var u=function(){for(var t=n.langData()._weekdaysMin,e=[],i=0;i<t.length;i++)e[i]=t[i].toLowerCase();return e}(),c=i.get("months");return c||(c=n.langData()._months),s.prototype=new e,s.prototype.addCondition=function(t){this.dayConditions.push(t)},s.prototype.switchMonth=function(t){if(t){var e=new Date(this.visibleDate);e.setDate(1),e.setMonth(e.getMonth()+t),this.showDate(e)}},s.prototype.renderMonth=function(){var t=this.visibleDate.getMonth();this.visibleDate.getFullYear(),c[t],this.$el.find(".month-title").text(n(this.visibleDate).format("MMMM YYYY"));var e=new Date(this.visibleDate);e=o(e),e.setDate(1);var i=new Date(e);i.setMonth(e.getMonth()+1),e.setDate(2-e.getDay()),e.getDate()<7&&e.getDate()>1&&e.setDate(e.getDate()-7);var s,a,r,l,h=0;for(this.$tbody.children().remove();e.getTime()<i.getTime()||h>0;){0===h&&(s&&this.$tbody.append(s),s=this.renderRow(),s.children().remove()),a=this.renderDateCell(e),r=[];for(var u=0;u<this.dayConditions.length;u++)l=this.dayConditions[u](e,this),l&&r.push(l);a.addClass(r.join(" ")),s.append(a),e.setDate(e.getDate()+1),h=(h+1)%7}this.$tbody.append(s)},s.prototype.invalidate=function(){var t=this;this._dirty=!0,clearTimeout(this.validationTimeout),this.validationTimeout=setTimeout(function(){t.validate()},1)},s.prototype.validate=function(){this._dirty&&(this._dirty=!1,this.renderMonth())},s.prototype.renderRow=function(){return t('<tr role="row"></tr>')},s.prototype.renderDateCell=function(e){var i=n(e),s="";s+='<a role="button" tabindex="-1" title="',s+=i.format("ddd")+", "+i.format("LL"),s+='"',s+=">",s+=i.date(),s+="</a>";var o=t(s);o.data("value",new Date(e)),s="",s+='<td class="'+u[i.day()]+'-day" role="grid-cell">',s+="</td>";var a=t(s);return a.append(o),a},s.prototype.renderDayCell=function(e){var i=n.langData()._weekdaysMin[e],s=n.langData()._weekdays[e],o="";return o+="<th ",o+='class="'+u[e]+'-day" ',o+='role="columnheader" ',o+='aria-label="'+s+'">',o+=i,o+="</th>",t(o)},s.prototype.renderMain=function(){this.$el.children().remove(),this.appendHeader(),this.appendBar(),this.appendBody()},s.prototype.appendHeader=function(){if(this.titleLabel){var t="";t+='<div class="date-picker-header"><h4 class="date-picker-title">',t+=this.titleLabel,t+="</h4></div>",this.$el.prepend(t)}},s.prototype.appendBar=function(){var t="";t+='<div class="date-picker-bar">',t+='<span class="month-title"></span>',t+='<a class="prev-month icon" role="button">Previous month</a>',t+='<a class="next-month icon" role="button">Next month</a>',t+="</div>",this.$el.append(t)},s.prototype.appendBody=function(){for(var e=t('<div class="date-picker-body"></div>'),i=t('<table class="date-picker-table" role="grid"></table>').appendTo(e),n=t("<thead></thead>").appendTo(i),s=this.renderRow().appendTo(n),o=1;7>=o;o++)s.append(this.renderDayCell(o%7));var a=t("<tbody></tbody>").appendTo(i);this.$tbody=a,this.$el.append(e)},s.prototype.showDate=function(t){var e=a(t),i=this.visibleDate;e&&(n(this.visibleDate).isSame(e,"month")||(this.visibleDate=e,this.trigger("show",e)?this.invalidate():this.visibleDate=i))},s.prototype.showSelected=function(){this.getSelectedDate()&&this.showDate(this.getSelectedDate())},s.prototype.selectDate=function(t){var e,i=this.selectedDate;e=a(t),(e||i)&&(e&&(this.minDate&&e<this.minDate?e=new Date(this.minDate):this.maxDate&&e>this.maxDate&&(e=new Date(this.maxDate))),(!t&&i||t&&!i||!n(t).isSame(i,"date"))&&(this.selectedDate=e,this.trigger("select",e)?this.invalidate():this.selectedDate=i))},s.prototype.getElement=function(){return this.$el},s.prototype.getSelectedDate=function(){return this.selectedDate?new Date(this.selectedDate):null},s.prototype.getVisibleDate=function(){return this.visibleDate},s.prototype.setToday=function(t){this.today=a(t),this.invalidate()},s.prototype.setMinDate=function(t){this.minDate=a(t),this.invalidate()},s.prototype.setMaxDate=function(t){this.maxDate=a(t),this.invalidate()},s.prototype.setTitle=function(e){if(e!=this.titleLabel)if(this.titleLabel=e,this.titleLabel){var i=t(".date-picker-title",this.$el);i.length?i.text(this.titleLabel):this.appendHeader()}else t(".date-picker-header",this.$el).remove()},s.prototype.addSpecialDate=function(t,e){t=a(t),this.specialDates[t.toDateString()]=e,this.invalidate()},s.prototype.clearSpecialDates=function(){this.specialDates=[],this.invalidate()},s.checkMaxDate=function(t,e){return e.maxDate&&h(t,e.maxDate)?"disabled":void 0},s.checkMinDate=function(t,e){return e.minDate&&l(t,e.minDate)?"disabled":void 0},s.checkWithinMonth=function(t,e){return t.getMonth()!==e.visibleDate.getMonth()?"not-month":void 0},s.checkToday=function(t,e){return r(t,e.todayDate)?"today":void 0},s.checkSelected=function(t,e){return e.selectedDate&&r(t,e.selectedDate)?"selected":void 0},s.checkSpecialDates=function(t,e){return e.specialDates[t.toDateString()]},s}),define("app/modules/forms/dateInputPicker",["jquery","app/modules/forms/datePicker","app/util/DOMUtil","lib/util/EventDispatcher"],function(t,e,i,n){var s,o=".date-input-picker",a=0;return s=function(){this.$element=null,this.datepicker=null,this.connected=!1,a++,this.ns=o+a},t.extend(s.prototype,n.prototype),s.prototype.prepare=function(e){var i=t(e);if(i.is("input")&&"date"==i.attr("type"))try{i.attr("type","text")}catch(n){}},s.prototype.getPicker=function(){return this.datepicker},s.prototype.connect=function(e,n){var s=this;this.datepicker=n,this.$element=t(e),this.connected&&this.disconnect(),this.connected=!0;var o=!!this.$element.prop("disabled");o||(this.datepicker.addEventListener("click"+this.ns,function(t){this.selectDate(t),i.focusNextInput(s.$element)}),this.datepicker.addEventListener("select"+this.ns,function(t){if(!s.ignorePickerEvents){var e=t?moment(t):!1;if(s.trigger("select",t)){var i=s.$element.val();s.$element.val(e?e.format("L"):""),i!=s.$element.val()&&s.$element.trigger("change")}}}),this.datepicker.addEventListener("show"+this.ns,function(t){return s.trigger("show",t)}),this.on("keyup",function(){s.ignorePickerEvents=!0;var t=moment(this.value,["L","DD.MM.YYYY"]),e=!t||!t.isValid();if(this.value.length<10&&(e=!0),e)return s.datepicker.selectDate(null),s.ignorePickerEvents=!1,void 0;var i=s.datepicker.selectedDate;i&&t.isSame(i,"date")||(s.datepicker.selectDate(t.toDate()),s.datepicker.showDate(t.toDate())),s.ignorePickerEvents=!1}),this.on("keydown",function(t){switch(t.keyCode){case 38:case 40:var e,i,n=s.datepicker.getSelectedDate();if(n?(i=38==t.keyCode?-1:1,e=new Date(n),e.setDate(e.getDate()+i)):e=s.datepicker.minDate,e&&(t.preventDefault(),s.datepicker.selectDate(e),s.datepicker.showDate(e),e=s.$element.val()))try{s.$element[0].setSelectionRange(0,e.split(".").shift().length)}catch(o){}}}));var a;(a=this.$element.attr("min"))&&(this.datepicker.setMinDate(a),this.datepicker.minDate>this.datepicker.getVisibleDate()&&this.datepicker.showDate(a)),(a=this.$element.attr("max"))&&(this.datepicker.setMaxDate(a),this.datepicker.maxDate<this.datepicker.getVisibleDate()&&this.datepicker.showDate(a)),(a=this.$element.data("today"))&&(this.datepicker.setToday(a),this.datepicker.showDate(a)),(a=this.$element.data("default"))&&this.datepicker.showDate(a),(a=this.$element.val())&&(this.datepicker.selectDate(a),this.datepicker.getSelectedDate()&&this.datepicker.showDate(a)),(a=this.$element.attr("title"))&&this.datepicker.setTitle(a),(a=this.$element.data("datepicker-type"))&&this.datepicker.$el.addClass(a),(a=this.$element.data("datepicker-dates"))&&this.parseDates(a),this.datepicker.validate()},s.prototype.parseDates=function(e){var i,n={};if(0===e.indexOf("#"))i=t(e),i.find("option").each(function(){var e=t(this);n[e.attr("value")]=t.trim(e.attr("label"))});else if(0===e.indexOf("{"))try{n=t.parseJSON(e)}catch(s){n={}}for(var o in n)this.datepicker.addSpecialDate(o,n[o])},s.prototype.disconnect=function(){this.connected&&(t(document).off(this.ns),this.$element.off(o),this.datepicker.removeEventListener(this.ns),this.$element=null,this.datepicker=null,this.connected=!1)},s.prototype.destroy=function(){this.disconnect()},s.prototype.on=function(t,e,i){this.$element.on(t+o,e,i)},s}),define("app/modules/forms/dateInput/dateInputHandler",["jquery","app/modules/forms/datePicker","app/modules/forms/dateInputPicker"],function(t,e,i){var n,s=".date-input-handler",o=0;return n=function(){this.$element=null,this.connector=new i,this.datepicker=null,o++,this.ns=s+o},n.prototype.init=function(e,i){return this.$element=t(e),this.floating=!i,this.floating?(this.$wrapper=t('<span class="date-picker-wrapper"></span>'),this.$wrapper.css({position:"absolute",zIndex:2e4})):(this.$wrapper=t(i),this.openPicker(),this.$wrapper.slideDown("fast")),this.connector.prepare(e),this},n.prototype.getPicker=function(){return this.datepicker},n.prototype.openPicker=function(){var i=this;if(!this.isOpen&&(this.isOpen=!0,this.$datepicker||(this.$datepicker=t('<div class="date-picker"></div>'),this.floating&&(this.$datepicker.addClass("date-picker-floating"),t("body").append(this.$wrapper)),this.datepicker=new e(this.$datepicker),i.$wrapper.append(this.$datepicker)),this.datepicker.validate(),this.connector.connect(this.$element,this.datepicker),this.floating)){this.$wrapper.show(),i.repositionPicker(),this._reposition=function(){i.repositionPicker()},t(window).on("resize"+this.ns,this._reposition);var n=this.$wrapper.offset().top+this.$wrapper.height(),s=t("body").scrollTop()||t("html").scrollTop(),o=t(window).height()+s;n>o&&t("html, body").animate({scrollTop:s-o+n},300)}},n.prototype.closePicker=function(){this.floating&&(t(window).off(this.ns),this.connector.disconnect(),this.$wrapper.hide(),this.isOpen=!1)},n.prototype.showPicker=function(){this.openPicker(),this.floating&&this.$wrapper.show()},n.prototype.hidePicker=function(){this.floating&&this.$wrapper.hide()},n.prototype.repositionPicker=function(){var t=this.$element.offset(),e=this.$element.outerWidth(),i=this.$element.outerHeight();this.$datepicker.css({width:e});var n=this.$wrapper.outerWidth();this.$wrapper.css({left:Math.max(0,t.left+e/2-n/2),top:t.top+i})},n.prototype.destroy=function(){this.$element&&(this.isOpen&&this.closePicker(),this.$element.off(s),this.$element=null)},n.prototype.on=function(t,e,i){this.$element.on(t+s,e,i)},n}),define("app/util/SwissDate",["moment"],function(t){function e(e){return"string"==typeof e?t(e,["L","DD.MM.YYYY"]):t(e)}return{parse:function(t){if(!t)return!1;var i=e(t);return i.isValid()?i.toDate():!1},format:function(t){var i=e(t);return i.format("L")}}}),define("app/modules/forms/dateInput",["jquery","app/modules/forms/dateInput/dateInputHandler","app/util/SwissDate","app/util/Capabilities"],function(t,e,i,n){var s,o=".date-input",a=0,r=n.touch;return s=function(){this.$element=null,this.handler=new e,a++,this.ns=o+a},s.prototype.init=function(e){function i(t){t.stopPropagation(),s.handler.isOpen||(t.preventDefault(),s.openPicker())}var s=this;this.$element=t(e);var o=this.$element.data("datepicker-target");return this.handler.init(e,o),this.$element.addClass("needsclick").addClass("needsfocus"),r&&s.handler.floating?!n.system.ios||n.pointertouch?this.on("focus",function(t){t.preventDefault(),t.stopImmediatePropagation(),this.blur(),s.handler.isOpen||(t.preventDefault(),s.openPicker())}):(this.on("ontouchstart",i),this.on("focus",function(t){s.handler.isOpen?s.closePicker():(s.openPicker(),s.$element.blur(),t.preventDefault(),t.stopImmediatePropagation())})):this.on("focus",function(){s.openPicker()}),this},s.prototype.openPicker=function(){function e(e){return t.contains(i.handler.$wrapper[0],e)}var i=this;this.isOpen||(this.isOpen=!0,this.handler.openPicker(),t(document).on("focus"+this.ns,"body",function(t){e(t.target)||i.$element.is(t.target)||i.closePicker()}),t(document).on((r?n.TOUCHSTART:"mousedown")+this.ns,function(t){e(t.target)||i.$element.is(t.target)||i.closePicker()}))},s.prototype.setValue=function(t){this.$element.val(i.format(t))},s.prototype.getValue=function(){return this.$element.val()},s.prototype.setToday=function(t){this.$element.attr("data-today",i.format(t))},s.prototype.setMinDate=function(t){var e=i.parse(this.$element.val()),n=i.parse(t);n>e&&this.$element.val(""),this.$element.attr("min",i.format(n))},s.prototype.setMaxDate=function(t){var e=i.parse(this.$element.val()),n=i.parse(t);e>n&&this.$element.val(""),this.$element.attr("max",i.format(n))},s.prototype.getPicker=function(){return this.handler.getPicker()},s.prototype.closePicker=function(){t(document).off(this.ns),this.handler.closePicker(),this.isOpen=!1},s.prototype.destroy=function(){this.$element&&(this.isOpen&&this.closePicker(),this.$element.off(o),this.$element=null)},s.prototype.on=function(t,e,i){this.$element.on(t+o,e,i)},s}),define("app/modules/forms/dateRange",["jquery","app/modules/forms/datePicker","app/modules/forms/dateInput/dateInputHandler","lib/util/EventDispatcher","app/util/Capabilities"],function(t,e,i,n,s){function o(t,e){var i=t.offset();i.width=t.outerWidth(),i.height=t.outerHeight();var n=e.offset();n.width=e.outerWidth(),n.height=e.outerHeight();var s=i.left,o=i.left+i.width,a=n.left,r=n.left+n.width,l=i.top,h=i.top+i.height,u=n.top,c=n.top+n.height;return a>o||s>r?!1:u>h||l>c?!1:a>s&&o>a?!0:r>s&&o>r?!0:u>l&&h>u?!0:c>l&&h>c?!0:!1}var a,r=".date-input-range",l=0,h="ontouchstart"in window;return a=function(){this.$startInput=null,this.$endInput=null,this.startHandler=new i,this.endHandler=new i,l++,this.ns=r+l},a.prototype=new n,a.prototype.init=function(e){function i(){l.openPicker(this)}function n(t){l.isOpen&&this==l.focusField?l.closePicker():(l.openPicker(this),this.blur(),t.preventDefault())}function o(t){t.stopPropagation(),l.isOpen&&this==l.focusField||(t.preventDefault(),l.openPicker(this))}function a(t){t.preventDefault(),t.stopImmediatePropagation(),this.blur(),l.isOpen||(t.preventDefault(),l.openPicker(this))}var l=this;this.$startInput=t(e),this.$endInput=t(this.$startInput.data("datepicker-rel"));var h=this.$startInput.data("datepicker-target"),u=this.$endInput.data("datepicker-target");return this.startHandler.init(this.$startInput,h),this.endHandler.init(this.$endInput,u),this.floating=!h&&!u,this.floating?s.touch?!s.system.ios||s.pointertouch?(this.$startInput.on("focus"+r,a),this.$endInput.on("focus"+r,a)):(this.$startInput.on("touchstart"+r,o),this.$endInput.on("touchstart"+r,o),this.$startInput.on("focus"+r,n),this.$endInput.on("focus"+r,n)):(this.$startInput.on("focus"+r,i),this.$endInput.on("focus"+r,i)):this.openPicker(),this},a.prototype.getStartPicker=function(){return this.startHandler.getPicker()},a.prototype.getEndPicker=function(){return this.endHandler.getPicker()},a.prototype.openPicker=function(e){function i(e){var i=t.contains(o.startHandler.$wrapper[0],e),n=t.contains(o.endHandler.$wrapper[0],e);return i||n}function n(t){return function(){a||(a=!0,t.apply(o,arguments),a=!1)}}function s(){var t=o.startHandler.getPicker(),e=o.endHandler.getPicker(),i=t.getVisibleDate(),n=e.getVisibleDate(),s=n.getTime()-i.getTime(),a=t.getSelectedDate(),r=e.getSelectedDate(),l=!1;return a&&r&&(l=r.getTime()-a.getTime()),{picker:{start:t,end:e},visible:{start:i,end:n,diff:s},selected:{start:a,end:r,diff:l}}}var o=this;if(this.focusField=e,this.startHandler.openPicker(),this.endHandler.openPicker(),!this.isOpen){this.isOpen=!0;var a=!1,r=s();this.startHandler.getPicker().addEventListener("show"+this.ns,n(function(t){r.selected.end||r.selected.start||r.picker.end.showDate(new Date(t.getTime()+r.visible.diff)),this.trigger("show"),r=s(t)})),this.endHandler.getPicker().addEventListener("show"+this.ns,n(function(t){r.selected.end||r.selected.start||r.picker.start.showDate(new Date(t.getTime()-r.visible.diff)),this.trigger("show"),r=s(t)})),this.startHandler.getPicker().addEventListener("select"+this.ns,n(function(t){r.selected.end?t.getTime()>r.selected.end.getTime()&&(r.picker.end.selectDate(null),r.picker.end.showDate(t)):r.picker.end.showDate(t),r.picker.end.setMinDate(t),this.trigger("select"),r=s(t)})),this.endHandler.getPicker().addEventListener("select"+this.ns,n(function(t){this.trigger("select"),r=s(t)})),this.floating&&(t(document).on("focus"+this.ns,"body",function(t){i(t.target)||o.$startInput.is(t.target)||o.$endInput.is(t.target)||o.closePicker()}),t(document).on((h?"touchstart":"mousedown")+this.ns,function(t){i(t.target)||o.$startInput.is(t.target)||o.closePicker()})),this.trigger("open")}this.checkDoubleVisibility()},a.prototype.checkDoubleVisibility=function(){this.startHandler.showPicker(),this.endHandler.showPicker();var e=t(this.startHandler.getPicker().getElement()),i=t(this.endHandler.getPicker().getElement());this.overlapping=o(e,i),this.overlapping&&(this.$startInput.is(this.focusField)&&this.endHandler.hidePicker(),this.$endInput.is(this.focusField)&&this.startHandler.hidePicker())},a.prototype.closePicker=function(){t(document).off(this.ns),this.startHandler.getPicker().removeEventListener(this.ns),this.endHandler.getPicker().removeEventListener(this.ns),this.startHandler.closePicker(),this.endHandler.closePicker(),this.isOpen=!1,this.trigger("close")},a.prototype.destroy=function(){this.$startInput&&(this.isOpen&&this.closePicker(),this.$startInput.off(r),this.$startInput=null)},a.prototype.on=function(t,e,i){this.$startInput.on(t+r,e,i)},a}),define("app/modules/forms/dateRangeRemote",["jquery","app/modules/BaseModule","app/modules/forms/dateRange"],function(t,e,i){function n(t){return t?[t.getFullYear(),t.getMonth()+1,t.getDate()].join("-"):""}function s(t){return t?[t.getFullYear(),t.getMonth()+1].join("-"):""}var o,a=".DateRangeRemote",r=0;return o=function(){this.$el=null,this.ns=a+r++,this.cache={}},o.prototype=new e,o.prototype.init=function(e){return this.dateRange=new i,this.remoteSrc=t(e).data("daterange-remote"),this.fetchOnSelect="onselect"==t(e).data("daterange-refetch"),this.cacheEnabled="disabled"!=t(e).data("daterange-cache")&&!this.fetchOnSelect,this.remoteSrc&&(this.dateRange.addEventListener("show",this.bind(this.requestData)),this.dateRange.addEventListener("open",this.bind(this.requestData)),this.fetchOnSelect&&this.dateRange.addEventListener("select",this.bind(this.requestData))),this.dateRange.init(e)},o.prototype.handleShow=function(){},o.prototype.requestData=function(){function e(){var e={};e[c]=v,e[d]=y,this.fetchOnSelect&&(e[c+"_selected"]=n(m),e[d+"_selected"]=n(g)),r.getElement().addClass("is-ajax-loading"),l.getElement().addClass("is-ajax-loading"),t.getJSON(this.remoteSrc,e,function(t){r.getElement().removeClass("is-ajax-loading"),l.getElement().removeClass("is-ajax-loading"),o.cacheEnabled&&(a[b]=t),i(t)})}function i(t){var e,i;e=t[c],r.clearSpecialDates();for(i in e)r.addSpecialDate(i,e[i]);e=t[d],l.clearSpecialDates();for(i in e)l.addSpecialDate(i,e[i])}var o=this,a=this.cache,r=this.dateRange.getStartPicker(),l=this.dateRange.getEndPicker(),h=this.dateRange.$startInput,u=this.dateRange.$endInput,c=h.attr("name"),d=u.attr("name"),p=r.getVisibleDate(),f=l.getVisibleDate(),m=r.getSelectedDate(),g=l.getSelectedDate(),v=s(p),y=s(f),b=v+"/"+y,w=a[b];w?i(w):(clearTimeout(this.requestTimeout),this.requestTimeout=setTimeout(this.bind(e),200))},o.prototype._destroy=o.prototype.destroy,o.prototype.destroy=function(){this.dateRange.destroy(),this._destroy()},o}),define("app/modules/forms/dateMultirange",["jquery","app/modules/BaseModule","moment"],function(t,e){var i,n=".DateMultirange",s=0;return i=function(){s++,this.ns=n+s},i.prototype=new e,i.prototype.init=function(e){var i=this.$el=t(e);this.$el.on("change","input.js-date-input",function(){var e=this,n=!1,s=t(e).val();i.find("input.js-date-input").each(function(){if(n){var i=t(this).data("moduleInstance");if(i.setMinDate(s),i.getValue())return!1}else this==e&&(n=!0)})})},i.prototype.destroy=function(){},i.prototype.on=function(t,e,i){this.$startInput.on(t+n,e,i)},i}),define("app/modules/forms/charCounter",["jquery","app/modules/BaseModule"],function(t,e){var i,n=".charcounter",s=0;return i=function(){this.$el=null,this.ns=n+s++},i.prototype=new e,i.prototype.init=function(e){return this.$el=t(e),this.on("keyup",".js-char-input",this.bind(this.checkChars)),this},i.prototype.checkChars=function(){var t=this,e=t.$el.find(".js-char-input")||t.$el.find("input"),i=e.attr("maxlength"),n=i-e.val().replace(/(\r\n|\n|\r)/g,"  ").length;0>=n&&(e.val(e.val().substr(0,i)),n=0),t.$el.find(".js-char-display").text(n)},i}),define("app/modules/content/slider",["jquery","app/util/Capabilities"],function(t,e){function i(i,n){function s(t){var i;t.touches&&t.touches.length>1||(i=t.touches?t.touches[0]:t,u=i[m],c=u,d=c,p=(new Date).getTime(),document.addEventListener(e.TOUCHMOVE,o,!1),document.addEventListener(e.TOUCHEND,a,!1))}function o(t){var e;if(t.touches&&t.touches.length>1)return l(t);if(e=t.touches?t.touches[0]:t,e[m]!==d){if(d=c,c=e[m],!f){if(!(Math.abs(c-u)>n.min))return;n.start&&n.start.call(i,0),i.style.pointerEvents="none",g=!0,f=!0}t.preventDefault(),p=(new Date).getTime(),n.step&&n.step.call(i,c-u)}}function a(t){f?(t.preventDefault(),h(t)):n.complete&&n.complete.call(i,!1),l(t)}function r(t){g&&t.preventDefault()}function l(){document.removeEventListener(e.TOUCHMOVE,o),document.removeEventListener(e.TOUCHEND,a),i.style.pointerEvents="",f=!1}function h(){var t=(new Date).getTime()-p,e=c-u,s=e/Math.abs(e)||0;0>(c-u)*(c-d)&&(s=0);var o=1e3*(Math.abs(c-d)/t);Math.abs(c-u)<n.size/2&&100>o&&(s=0),n.complete&&n.complete.call(i,s||0),setTimeout(function(){i.style.pointerEvents="",g=!1},1)}var u,c,d,p,f,m="clientX",g=!1;n=t.extend({min:5,direction:"x",size:n&&"y"==n.direction?i.clientHeight:i.clientWidth,start:null,step:null,complete:null},n),e.touch&&(i.addEventListener(e.TOUCHSTART,s,!1),i.addEventListener("click",r,!1),t(i).css("-ms-touch-action","pan-y"))}function n(t,e,i){i?t.addClass(e):t.removeClass(e)}var s,o=".slider",a=0,r=t("html").hasClass("ffbuttonbug"),l={accelerated:!1};return s=function(){this.$el=null,this.ns=o+a++,this.slideIndex=0,this.slideWidth=[],this.numPages=0,this.numSlides=0,this.x=0,this.ns=o},s.prototype.init=function(e){var n=this;return this.$el=t(e),this.options=t.extend({},l,this.$el.data("slide")),this.$wrapper=this.$el.find(".js-slide-container"),this.$content=this.$el.find(".js-slide-content"),this.$indicator=this.$el.find(".js-slide-indicator").eq(0).css({visibility:"visible"}),this.$indicators=this.$indicator.parent(),this.$indicator.remove(),this.gestureLock=!1,this.accelerated=Modernizr.csstransforms3d&&this.options.accelerated,this.on("click",".js-slide-prev",this._slideByHandler(-1)),this.on("click",".js-slide-next",this._slideByHandler(1)),this.on("click",".js-slide-indicator",this._slideToHandler()),this.on(window,"resize",function(){var t;return function(){clearTimeout(t),t=setTimeout(function(){n.relayout()},500)}}()),this.relayout(),function(){var t,s,o;i(e,{start:function(){t=n.x,n.gestureLock=!0},step:function(e){o=n.x,n.move(t+e),s=(new Date).getTime()},complete:function(t){t!==!1&&n.slideBy(-t),n.gestureLock=!1}})}(),this},s.prototype.destroy=function(){this.$el&&(this.$el.off(this.ns),t(document).off(this.ns),t(window).off(this.ns),this.$el=null)},s.prototype.relayout=function(){this.$el&&this.$el.is(":visible")&&(this.measure(),this.render())},s.prototype.render=function(e){var i=this;void 0===e&&(e=!0);var s=this.$content.children();if(s.length){var o=this.slideWidth[this.slideIndex],a=this.getPageIndex();this.$indicators.children().removeClass("is-active"),this.$indicators.children().eq(a).addClass("is-active"),n(this.$el.find(".js-slide-prev"),"is-disabled",0>=a),n(this.$el.find(".js-slide-next"),"is-disabled",a>=this.numPages-1),e?t({x:this.x}).stop().animate({x:-o},{duration:300,step:function(t){i.move(t)}}):this.move(-o),this.markActiveChildren()}},s.prototype.move=function(t){this.x=t;var e=this.$content.children();e.length&&(this.accelerated?(this.$content.css({perspective:"1000px"}),e.css({transform:"translateX("+t+"px)",backfaceVisibility:"hidden"})):Modernizr.csstransforms&&!r?e.css({transform:"translate("+t+"px,0px)"}):e.css({left:t}))},s.prototype.markActiveChildren=function(){this.$content.children().removeClass("is-active").slice(this.getSlideIndex(),this.getSlideIndex()+this.getSlidesPerPage()).addClass("is-active has-once-been-active")},s.prototype.measure=function(){var t=this.$content.children();if(t.length){var e=t.first().position().left,i=0;this.slideWidth=[0],this.numSlides=t.length;for(var n=1;n<this.numSlides;n++)i=t.eq(n).position().left-e,this.slideWidth.push(i);var s=i/(this.numSlides-1);i+=t.last().outerWidth();var o=this.$content.width();this.slidesPerPage=Math.floor((o+1)/s),this.slidesPerPage<1&&(this.slidesPerPage=1),this.setNumPages(Math.ceil(this.numSlides/this.slidesPerPage))}},s.prototype.slideBy=function(t){var e=this.getSlidesPerPage();this.slideTo(this.getSlideIndex()+t*e)},s.prototype.slideTo=function(t){var e=this.getSlidesPerPage(),i=Math.round(t/e);i=Math.max(0,Math.min(this.numPages-1,i)),i*=e,this.slideIndex=i,this.$content.children().css("transition",""),this.render()},s.prototype.getSlideIndex=function(){return this.slideIndex||0},s.prototype.getPageIndex=function(){return Math.floor(this.slideIndex/this.numSlides*this.numPages)},s.prototype.getSlidesPerPage=function(){return this.slidesPerPage},s.prototype.setNumPages=function(t){if(this.numPages!=t){this.numPages=t;var e;this.$indicators.children().remove();for(var i=0;i<this.numPages;i++)e=this.$indicator.clone(),e.appendTo(this.$indicators)}},s.prototype._slideByHandler=function(t){var e=this;return function(i){i.preventDefault(),e.gestureLock||e.slideBy(t)}},s.prototype._slideToHandler=function(e){var i=this;return function(n){if(n.preventDefault(),!i.gestureLock){var s=e||t(this).index()*i.getSlidesPerPage()||0;i.slideTo(s)}}},s.prototype.on=function(){for(var e,i,n,s,o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];switch(arguments.length){case 2:s=this.$el,e=o.shift(),n=o.shift();break;case 3:e=o.shift(),"string"==typeof e?(s=this.$el,i=o.shift(),n=o.shift()):(s=t(e),e=o.shift(),n=o.shift());break;case 4:s=t(o.shift()),e=o.shift(),i=o.shift(),n=o.shift()}i?s.on(e+this.ns,i,n):s.on(e+this.ns,n)},s.prototype.bind=function(){},s}),define("app/modules/booking/bookingbar",["jquery","app/modules/BaseModule","app/plugins/mediaDispatcher"],function(t,e,i){var n,s=".bookingbar",o=0;return n=function(){this.$el=null,this.ns=s+o++},n.prototype=new e,n.prototype.init=function(e){function n(e){var i=t("#bookingbar-flight");e?i.removeClass("is-options-hidden"):i.addClass("is-options-hidden"),t(window).trigger("resize")}return this.$el=t(e),this.on("focus",".bookingbar-lead input",function(){n(!0)}),this.on("click",".js-bookingbar-options-close",function(t){t.preventDefault(),n(!1)}),this.on("click",".js-bookingbar-options-open",function(t){t.preventDefault(),n(!0)}),i.isAbove("mobile").then(this.bind(function(){this.$el.find(".is-active-if-not-mobile").removeClass("is-active-if-not-mobile").addClass("is-active")})),this},n}),define("app/util/AjaxFormUpdater",["jquery","app/util/AjaxUpdater"],function(t,e){function i(){this.updater=new e}function n(e,i){var n=t(e),s=n.data("ajax-"+i)||n.attr(i),o=n.data("ajax-target");return o&&(s=s.split("#")[0]+"#"+o),s}return i.prototype.enableCache=function(){this.updater.enableCache()},i.prototype.update=function(e){var i=t(e),s=n(e,"action"),o=i.serialize(),a=i.attr("method");if(s.indexOf("#")<0)return t.Deferred().reject();var r=this.updater.load(s,{data:o,method:a});return r},i.prototype.cancel=function(){this.updater.cancel()},i.prototype.isCached=function(e){var i=t(e),s=n(e,"action"),o=i.serialize(),a=i.attr("method");return this.updater.isCached(s,{data:o,method:a})},i}),define("app/modules/booking/bookOptions",["jquery","app/modules/BaseModule","app/util/AjaxFormUpdater"],function(t,e,i){function n(t){t.height(t.height()),t.css("overflow","hidden")}function s(t){var e=t.height();t.css("height","auto");var i=t.height();t.height(e),t.stop().animate({height:i},function(){t.attr("style","")})}var o,a=".bookingbar",r=0,l=new i;return o=function(){this.$el=null,this.ns=a+r++},o.prototype=new e,o.prototype.init=function(e){var i=this;return this.$el=t(e),this.on("click",".js-book-options-show",function(t){t.preventDefault(),i.showDetails()}),this.on("click",".js-book-options-hide",function(t){t.preventDefault(),i.hideDetails()}),this.on("click",".js-book-options-edit",function(t){t.preventDefault(),i.showDetails()}),this.on("click",".js-book-options-submit",function(e){e.preventDefault();var n=t(this).addClass("is-ajax-loader");l.update(i.$el.parents("form").first()).then(function(){n.removeClass("is-ajax-loader")})}),this},o.prototype.showDetails=function(){var t=this.$el.find(".book-options-body");this.$el.find(".js-book-options-state").val("1"),n(t),this.$el.addClass("is-open"),s(t),this.scrollToTop()},o.prototype.hideDetails=function(){var t=this.$el.find(".book-options-body");this.$el.find(".js-book-options-state").val("0"),n(t),this.$el.removeClass("is-open"),s(t),this.scrollToTop()},o.prototype.scrollToTop=function(){var e=this.$el.offset(),i=t(document).scrollTop();e.top<i&&t("html, body").animate({scrollTop:e.top})},o.prototype.isOpen=function(){return this.$el.hasClass("is-open")},o.prototype.destroy=function(){this.$el&&(this.$el.off(this.ns),this.$el=null)},o}),define("app/modules/booking/bookMatrix",["jquery","app/plugins/mediaDispatcher","app/util/AjaxFormUpdater"],function(t,e,i){var n,s=".book-matrix",o=0;return n=function(){this.$el=null,this.ns=s+o++,this.toggleTriggerSelector=null,this.activeClass=null,this.$table=null,this.fieldsSelector=null,this.$activeFields=null,this.$summaries=null,this.showrowSelector=null,this.$rows=null,this.infoTriggerSelector=null,this.infoCloseTriggerSelector=null,this.updater=new i},n.prototype.invalidateCellHeights=function(){var t=this;
clearTimeout(this.cellHeightTimeout),this.cellHeightTimeout=setTimeout(function(){t.optimizeCellHeights()},200)},n.prototype.optimizeCellHeights=function(){var e="block"==this.$table.css("display"),i=this.$el.find("tbody .js-book-matrix-field");if(e)return i.children(".cell-inner").attr("style",""),void 0;i.children(".cell-inner").each(function(){this.style.minHeight="0"});var n=[],s=this.$el.find("tbody > .book-matrix-row").not(".is-hidden");s.each(function(e,i){var s,o;o=t(i).children(".js-book-matrix-field").not(".is-hidden").eq(0),s=Math.floor(o[0].clientHeight/o.children(".cell-inner").length),s-=30,n[e]=s}),s.each(function(e,i){t(i).find(".js-book-matrix-field > .cell-inner").each(function(){this.style.minHeight=n[e]+"px"})})},n.prototype.init=function(i){var n=this;this.$el=t(i),this.$el.addClass("webkitRequestAnimationFrame"in window?"webkit":"no-webkit"),this.toggleTriggerSelector=".js-book-matrix-class-toggler",this.activeClass="is-active",this.$table=t(".book-matrix-table",this.$el),this.fieldsSelector=".js-book-matrix-field",this.$fields=t(this.fieldsSelector,this.$table),this.$summaries=t(".js-book-matrix-summary",this.$el),this.showrowSelector=".js-book-matrix-show-row",this.$rows=t(".js-book-matrix-row",this.$el),this.on("click",this.toggleTriggerSelector,function(e){e.preventDefault(),n.showSection("."+t(this).data("groupclass"))}),this.on("click",this.showrowSelector,function(e){e.preventDefault();var i,s=t(this);i=s.parents(".js-book-matrix-row").eq(0),n.$rows.removeClass("is-active"),i.addClass("is-active"),n.invalidateCellHeights()}),this.on("change","input",function(e){if(n.updater.update(t(this).parents("form").first()),t(this).prop("checked")){var i=t(this).parents(".js-book-matrix-row").eq(0);n.$rows.removeClass("is-active"),i.addClass("is-active")}if(t(this).parents(".js-book-matrix-summary").length){e.preventDefault();var s=t(this).parents(".js-book-matrix-summary"),o=s.hasClass("js-book-matrix-field"),a=s.find("input").index(this);n.showSection("."+s.find(n.toggleTriggerSelector).data("groupclass"),o?s:!1,a)}n.invalidateCellHeights()}),this.on("click",".js-book-matrix-show-more-rows",function(e){e.preventDefault(),t(this).toggleClass("is-active"),t(".js-book-matrix-more-rows").toggleClass("is-hidden"),n.invalidateCellHeights()}),this.initInfoLinks(),this.adaptColspan(),e.isAbove("mobile").then(function(){n.adaptColspan()}),this.on(window,"resize",function(){n.invalidateCellHeights()}),this.invalidateCellHeights();return this},n.prototype.showSection=function(t,e,i){var n=this.$fields.not(t),s=this.$fields.filter(t),o=this.$summaries.filter(t),a=this.$summaries.not(t);n.removeClass(this.activeClass).addClass("is-hidden"),s.addClass(this.activeClass).removeClass("is-hidden"),o.removeClass(this.activeClass).addClass("is-hidden"),a.addClass(this.activeClass).removeClass("is-hidden");for(var r,l=20;--l&&e&&e.length&&e.is(t);)e=e.next(),r=e.find("input:enabled").eq(i||0),r.length&&(r.prop("checked",!0).focus().trigger("change"),e=null);this.adaptColspan(),this.invalidateCellHeights()},n.prototype.initInfoLinks=function(){var e,i,n=this;this.infoTriggerSelector=".js-book-matrix-info-link",this.infoCloseTriggerSelector=".js-close-book-matrix-flight-class-information",i=function(){t("#bookMatrixInfo").length&&t("#bookMatrixInfo").remove()},this.on("click",this.infoCloseTriggerSelector,function(t){t.preventDefault(),i()}),this.on("change","input",i),e=!1,this.on("click",this.infoTriggerSelector,function(s){if(s.preventDefault(),e)return!1;var o,a,r,l,h,u;i(),u=n.$table.find("thead th:visible").length||1,o=t(this),a=o.attr("href"),r="#"+a.split("#")[1],l=o.parents("tr"),h=t("<tr />",{id:"bookMatrixInfo"});var c=t("<td class='book-matrix-inforow boox-matrix-fullrow is-loading' colspan='"+u+"'></td>");c.html('<div id="book-matrix-flight-class-information" class="is-ajax-loading ajax-loading-box"><div class="ajax-load-overlay"></div></div>'),h.append(c),h.insertAfter(l),e=t.get(a,function(i){e=!1,h.html("<td class='book-matrix-inforow boox-matrix-fullrow' colspan='"+u+"'>"+t(i).find(r).clone().wrap("<p>").parent().html()+"</td>")});var d=h.offset();d.top-t(document).scrollTop()>t(window).height()&&t("html,body").animate({scrollTop:d.top-t(window).height()+60})})},n.prototype.adaptColspan=function(){this.visibileCols=this.$table.find("thead th:not(.is-hidden)").length||1,t(".boox-matrix-fullrow").attr("colspan",this.visibileCols)},n.prototype.destroy=function(){this.$el&&(this.$el.off(this.ns),t(document).off(this.ns),t(window).off(this.ns),this.$el=null)},n.prototype.on=function(){for(var e,i,n,s,o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];switch(arguments.length){case 2:s=this.$el,e=o.shift(),n=o.shift();break;case 3:e=o.shift(),"string"==typeof e?(s=this.$el,i=o.shift(),n=o.shift()):(s=t(e),e=o.shift(),n=o.shift());break;case 4:s=t(o.shift()),e=o.shift(),i=o.shift(),n=o.shift()}i?s.on(e+this.ns,i,n):s.on(e+this.ns,n)},n}),define("app/modules/widgets/widgetStage",["jquery","app/modules/BaseModule","app/util/AjaxFormUpdater"],function(t,e,i){function n(t){t.height(t.height()),t.css("overflow","hidden")}function s(t){var e=t.height();t.css("height","auto");var i=t.height();t.height(e),t.stop().animate({height:i},function(){t.attr("style","")})}var o,a=".widget-stage",r=0,l=new i;return o=function(){this.$el=null,this.ns=a+r++},o.prototype=new e,o.prototype.init=function(e){return this.$el=t(e),this.on("click",".js-ajax-update-click",this.bind(this.handleFormSubmitSoon)),this.on("change",".js-ajax-update-change",this.bind(this.handleFormSubmitSoon)),this.showWidgets(),this},o.prototype.handleFormSubmitSoon=function(t){t.preventDefault(),clearTimeout(this.submitTimeout),this.submitTimeout=setTimeout(this.bind(function(){this.handleFormSubmit(t)}),100)},o.prototype.handleFormSubmit=function(e){var i=this;t(e.target),i.hideWidgets();var n=i.$el.is("form")?i.$el:i.$el.find("form").eq(0);l.update(n).then(function(){i.showWidgets()})},o.prototype.showWidgets=function(){var e=this,i=t(".widget:not(.is-ready)");this.clearTimeouts(),this.widgetTimeouts=[],i.each(function(i){var n=t(this),s=setTimeout(function(){n.addClass("is-ready")},500*i);e.widgetTimeouts.push(s)});var n=setTimeout(function(){e.clearTimeouts(),i.addClass("is-ready is-complete")},6e3);this.widgetTimeouts.push(n)},o.prototype.hideWidgets=function(){var e=this,i=t(".widget");this.clearTimeouts(),this.widgetTimeouts=[],i.each(function(i){var n=t(this),s=setTimeout(function(){n.addClass("is-ready is-complete is-finished")},100*i);e.widgetTimeouts.push(s)})},o.prototype.clearTimeouts=function(){if(this.widgetTimeouts)for(var t=0;t<this.widgetTimeouts.length;t++)clearTimeout(this.widgetTimeouts[t])},o.prototype.hideDetails=function(){var t=this.$el.find(".book-options-body");this.$el.find(".js-book-options-state").val("0"),n(t),this.$el.removeClass("is-open"),s(t),this.scrollToTop()},o.prototype.scrollToTop=function(){var e=this.$el.offset(),i=t(document).scrollTop();e.top<i&&t("html, body").animate({scrollTop:e.top})},o.prototype.isOpen=function(){return this.$el.hasClass("is-open")},o.prototype.destroy=function(){this.$el&&(this.$el.off(this.ns),this.$el=null)},o}),define("app/modules/content/autoAccordionTabs",["jquery","app/modules/BaseModule"],function(t,e){var i,n=".auto-accordion-tabs",s=0;return i=function(){this.$el=null,this.ns=n+s++},i.prototype=new e,i.prototype.init=function(e){var i=this;return this.$el=t(e),this.on(window,"resize",function(){i.checkSize()}),this.checkSize(),this.$el.find(".tabs-navigation").css({visibility:"visible"}),this},i.prototype.checkSize=function(){if(!this.$el.is(":hidden")){var t=this.$el.find(".tabs-navigation").first(),e=t[0];e.style.display="block";var i=e.scrollWidth>e.clientWidth;i?this.$el.addClass("is-accordion"):this.$el.removeClass("is-accordion"),e.style.display=""}},i.prototype.destroy=function(){this.$el&&(this.$el.off(this.ns),t(document).off(this.ns),t(window).off(this.ns),this.$el=null)},i}),define("app/modules/booking/checkInOptions",["jquery","app/modules/BaseModule"],function(t,e){var i,n=".checkin-options",s=0;return i=function(){this.$el=null,this.ns=n+s++},i.prototype=new e,i.prototype.init=function(e){function i(){for(var e=t(this),i=e.closest("li"),n=0;n<o.length;n++){var a=o[n];a!==e[0]&&e.prop("checked")&&t(a).prop("checked",!1).change()}e.prop("checked")?s.enableDetails(i):s.disableAll(i)}function n(){var e,i=t(this);i.prop("checked")&&(s.resetAllDetails(),e=i.parent().find(".js-checkin-options-details-inputs"),e.find("input").prop("disabled",!1),e.show(!0))}var s=this;this.$el=t(e);var o,a;return o=this.$el.find(".js-checkin-options-toggle input[type=checkbox]"),a=this.$el.find(".js-checkin-option-details input[type=radio]"),o.on("change",i).each(i),a.on("change",n),a.filter(":enabled").each(n),this},i.prototype.enableDetails=function(t){t.find(".js-checkin-option-details li:not(.js-disabled) input[type=radio]").prop("disabled",!1),t.find(".js-checkin-option-details li.is-disabled input[type=radio]").prop("disabled",!0),t.find(".js-checkin-option-details input[type=radio]:not(:disabled):first").prop("checked",!0).change(),t.find(".js-checkin-option-details").show(!0)},i.prototype.disableAll=function(t){var e=t.find(".js-checkin-option-details input[type=radio]");e.prop("disabled",!0),e.prop("checked",!1),t.find(".js-checkin-option-details").hide(!0),t.find(".js-checkin-options-details-inputs").hide(!0),t.find(".js-checkin-options-details-inputs input").prop("disabled",!0)},i.prototype.resetAllDetails=function(){this.$el.find(".js-checkin-options-details-inputs input").prop("disabled",!0),this.$el.find(".js-checkin-options-details-inputs").hide(!0)},i}),define("app/modules/content/responsiveTabsNavigation",["jquery","app/modules/BaseModule","app/modules/helpers/flyout"],function(t,e,i){var n,s=".resp-tabs-nav",o=0;return n=function(){this.$el=null,this.ns=s+o++},n.prototype=new e,n.prototype.init=function(e){var i=this;return this.$el=t(e),e.style.visibility="visible",e.style.opacity=1,this.$el.parents(".js-tabs").eq(0).is(".js-auto-accordion-tabs")?!1:(this.$el.find(".js-tabs-link.is-active").parent("li").addClass("is-active"),this.listenForOpen(),this.$el.hasClass("js-tabs-nav-dropdown")||this.$el.hasClass("tabs-navigation--is-menu")?this.dropdownMode=!0:(this.on(window,"resize",function(){i.checkSize()}),this.checkSize()),this)},n.prototype.listenForOpen=function(){this.on("click",".tabs-navigation-item",this.bind(function(t){this.dropdownMode&&(t.preventDefault(),t.stopImmediatePropagation(),this.openAsDropdown())}))},n.prototype.select=function(t){var e=this.$el.find('.js-tabs-link[href="'+t+'"]');0!==e.length&&e.trigger("click")},n.prototype.getActive=function(){var t=this.$el.find(".js-tabs-link"),e=t.filter(".is-active");return e.length===t.length&&t.length>1?"#all":0===e.length?"#none":e.eq(0).attr("href")},n.prototype.checkSize=function(){if(!this.$el.is(":hidden")){var t=this.$el,e=t[0];t.removeClass("tabs-navigation--is-menu tabs-navigation--is-tabs");var i=e.scrollWidth>e.clientWidth+1;i?t.addClass("tabs-navigation--is-menu"):t.addClass("tabs-navigation--is-tabs"),this.dropdownMode=i}},n.prototype.openAsDropdown=function(){var e=this;if(this.$el.off(this.ns),!this.flyout){var n=this.$el.find(".js-tabs-link"),s=[];n.each(function(){var e=t(this);s.push({link:e.attr("href")||"#",cls:e.hasClass("is-disabled")?"is-disabled":"",name:e.html()})}),this.flyout=new i,this.flyout.init("#flyout-links-template",{top:!1,data:{items:s}}),this.flyout.createTarget(),this.flyout.getTarget().on("click"+this.ns,"a",this.bind(function(e){this.$el.parents(".js-tabs").length&&(e.preventDefault(),this.select(t(e.currentTarget).attr("href"))),this.closeDropdown()}))}this.flyout.open(this.$el);var o=this.flyout.getTarget().find("a").removeClass("selected"),a=this.flyout.getTarget().find(".flyout-body"),r=a.parents(".js-flyout").width(),l=this.$el.find(".is-active").outerWidth();o.filter('[href="'+this.getActive()+'"]').addClass("selected"),a.css({minWidth:Math.min(r,l),maxWidth:"100%"}),t(document).on(("ontouchstart"in window?"touchstart":"mousedown")+this.ns,this.bind(function(i){t.contains(this.flyout.getTarget()[0],i.target)||e.closeDropdown(i.target)})),this.flyout.repositionTarget()},n.prototype.closeDropdown=function(){this.isOpen=!1,this.flyout&&(this.flyout.close(),t(document).off(this.ns),setTimeout(this.bind(function(){this.listenForOpen()}),1))},n.prototype.destroy=function(){t(window).off(this.ns),t(document).off(this.ns),this.$el.off(this.ns),this.flyout&&(this.flyout.close(),this.flyout.getTarget().off(this.ns)),this.$el=null},n}),define("app/plugins/HashRouter",[],function(){function t(){var t,e=i(),n={};if(e){e=e.split("&");for(var s=0;s<e.length;s++)t=e[s].split("="),2===t.length&&(n[t[0]]=t[1])}return n}function e(t){var e=[];if(t)for(var i in t)e.push(i+"="+t[i]);e=e.join("&"),n(e)}function i(){return location.href.split("#")[1]||""}function n(t){location.hash=t?"#"+t:""}var s=function(){this.values={}},o=s.prototype;o.refresh=function(){this.values=t()},o.set=function(t,i){this.values[t]=i,e(this.values)},o.get=function(t){return this.values[t]};var a=new s;return a.refresh(),a}),define("app/modules/content/tabs",["jquery","app/modules/BaseModule","app/plugins/HashRouter","app/util/DOMUtil"],function(t,e,i,n){var s,o=".tabs",a=0;return s=function(t){this.$el=null,this.url=!1,this.selector=t||".js-tabs",this.ns=o+a++},s.prototype=new e,s.prototype.init=function(e){function n(){return t(this).parents(s.selector)[0]==e}var s=this;this.$el=t(e),this.url=this.$el.data("tabs-url")||!1,this.url&&(this.url="t-"+this.url);var o=function(e){return t(e,s.$el).filter(n)},a=function(e){var i=t(e),n=i.attr("href");i.is(".tabs-accordion-link.is-active")&&(n="#none"),s.select(n);var o=i.offset(),a=t(document).scrollTop();o.top<a&&t(document).scrollTop(o.top)};this.on("click",".js-tabs-link",function(e){if(n.call(this)){var i=t(this).attr("href");0===i.indexOf("#")&&e.preventDefault(),a(e.currentTarget)}});var r=function(e,i){var n;t(i).parents().filter(s.$el).length&&("next"==e?(n=t(".tabs-navigation-item.is-active").next(),n.length||(n=t(".tabs-navigation-item").first())):(n=t(".tabs-navigation-item.is-active").prev(),n.length||(n=t(".tabs-navigation-item").last())),n.find("a:eq(0)").trigger("click"))};this.on("click",".js-tabs-next",function(t){t.preventDefault(),r("next",this)}),this.on("click",".js-tabs-prev",function(t){t.preventDefault(),r("prev",this)});var l=o(".js-tabs-link"),h=l.filter(".is-active"),u=[],c=!1;return this.url&&(c=i.get(this.url),h=l.filter('[href="#'+c+'"]')),u.length?a(u):h.length?a(h.eq(0)):l.first().addClass("is-menu-visible").parent().addClass("is-menu-visible"),this},s.prototype.select=function(t){return t&&0!==t.indexOf("#")?!1:("#all"==t?this.$$(".js-tabs-pane").addClass("is-active"):(this.$$(".js-tabs-pane").removeClass("is-active"),this.$$(t).addClass("is-active"),this.$$('[data-tabs-id="'+t.substr(1)+'"]').addClass("is-active")),this.url&&i.set(this.url,t.substr(1)),this.$$(".js-tabs-link").removeClass("is-active is-menu-visible").parent("li").removeClass("is-active  is-menu-visible"),this.$$('.js-tabs-link[href="'+t+'"]').addClass("is-active").parent("li").addClass("is-active"),this.$$(".js-tabs-value").val(t.substr(1)),this.$el.trigger({type:"tabchange",id:t}),n.triggerResize(),void 0)},s.prototype.getActive=function(){var t=this.$$(".tabs-navigation .js-tabs-link"),e=t.filter(".is-active");return e.length===t.length&&t.length>1?"#all":0===e.length?"#none":e.eq(0).attr("href")},s.prototype.$$=function(e){function i(){return t(this).parents(s)[0]==n}var n=this.$el[0],s=this.selector;return t(e,this.$el).filter(i)},s}),define("app/modules/content/accordion",["jquery","app/modules/BaseModule","app/util/AjaxFormUpdater"],function(t,e,i){function n(t){t.height(t.height()),t.css("overflow","hidden")}function s(t){var e=t.height();t.css("height","auto");var i=t.height();t.height(e),t.stop().animate({height:i},function(){t.attr("style","")})}var o,a=".accordion",r=0;return new i,o=function(){this.$el=null,this.ns=a+r++},o.prototype=new e,o.prototype.init=function(e){return this.$el=t(e),this.on("click",".js-accordion-title",this.bind(function(t){t.preventDefault(),this.toggleDetails(t.target)})),this},o.prototype.toggleDetails=function(e){var i=t(e),o=i.parents(".js-accordion-item"),a=o.find("details"),r=o.hasClass("is-active"),l=r?"removeClass":"addClass";n(o),o[l]("is-active"),a.attr("open",!0),i[l]("is-active"),s(o)},o}),define("lib/layout/FlexGrid",["jquery"],function(t){function e(e){this.options=t.extend({},n,e),this.reset()}function i(t,e,i){this.column=t,this.top=e,this.height=i}var n={resizeElementHorizontally:!1,resizeElementVertically:!1,workWithHoles:!0,minHoleHeight:50};return e.prototype.reset=function(){this.columns=[],this.elements=[],this.elementSizes=[],this.holes=[]},e.prototype.resize=function(t,e){new Date;var i;for(this.width=t,this.colWidth=this.width/e,this.columns=[],i=0;e>i;i++)this.columns[i]=0;for(i=0;i<this.elements.length;i++)this.elements[i]&&(this.elementSizes[i]=this.measureElement(this.elements[i]));this._layout(0)},e.prototype.getTotalHeight=function(){return Math.max.apply(null,this.columns)},e.prototype.addElements=function(t,e){var i=this.elements.length;this.elements.push(!1),this.elementSizes.push(!1);for(var n=0;n<t.length;n++)this.elementSizes.push(this.measureElement(t[n])),this.elements.push(t[n]);e||this._layout(i)},e.prototype._layout=function(e){for(var i,n,s,o=e;o<this.elements.length;o++)i=this.elements[o],i?(n=this.elementSizes[o],n.colspan=Math.ceil((n.width-1)/this.colWidth),s=n.colspan>1?this._placeSpanningElement(i,n):this._placeSimpleElement(i,n),t(i).css({position:"absolute",top:s.top,left:100*(s.column/this.columns.length)+"%"})):this.holes=[]},e.prototype._placeSpanningElement=function(t,e){var n,s,o,a;for(s=-1,o=Number.MAX_VALUE,n=0;n<=this.columns.length-e.colspan;n++)a=Math.max.apply(null,this.columns.slice(n,n+e.colspan)),o>a&&(s=n,o=a);if(e.top=o,e.column=s,this.options.workWithHoles)for(n=e.column;n<e.column+e.colspan;n++){a=e.top-this.columns[n];var r=new i(n,this.columns[n],a);if(a>=this.options.minHoleHeight){for(var l=0;l<this.holes.length;l++)if(a<this.holes[l].height){this.holes.splice(l,0,r),r=!1;break}r&&this.holes.push(r)}}for(n=e.column;n<e.column+e.colspan;n++)this.columns[n]=e.top+e.height;return e},e.prototype._placeSimpleElement=function(t,e){var n,s,o;if(this.options.workWithHoles)for(n=0;n<this.holes.length;n++)if(this.holes[n].height>=e.height)return s=this.holes[n],e.top=s.top,e.column=s.column,s.height-e.height>this.options.minHoleHeight?this.holes[n]=new i(s.column,s.top+e.height,s.height-e.height):this.holes.splice(n,1),e;for(s=-1,o=Number.MAX_VALUE,n=0;n<this.columns.length;n++)this.columns[n]<o&&(s=n,o=this.columns[n]);return e.top=this.columns[s],e.column=s,this.columns[s]+=e.height,e},e.prototype.measureElement=function(e){var i=t(e),n={width:i.outerWidth(),height:i.outerHeight()};return n},e}),define("app/modules/explore/mashupLinks",["jquery","app/modules/BaseModule","app/plugins/lightboxLink","lib/net/HTMLLoader","lib/util/contextTrigger","app/util/Capabilities"],function(t,e,i,n,s,o){function a(t){var e=Math.pow(Math.sin(t*Math.PI/2),5);return 0>t&&e>0?-e:t>0&&0>e?-e:e}function r(t,e){var i=100*e;c&&Modernizr.csstransforms3d?t[0].style.webkitTransform="translateX("+i+"%)":Modernizr.csstransforms?t.css({transform:"translate("+i+"%, 0)"}):t.css({marginLeft:i+"%"})}var l,h=".mashup-links",u=0;o.touch;var c="webkitRequestAnimationFrame"in window;return l=function(){this.$el=null,this.ns=h+u++,this.loader=new n,this.renderedPosition=0,this.renderPosition=0,this.$transition=t({})},l.prototype=new e,l.prototype.init=function(e){return this.$el=t(e),this.$el.addClass(c?"webkit":"no-webkit"),this.on("click",'[target="_blank"]',this.bind(this.handleLightboxLink)),this},l.prototype.handleLightboxLink=function(e){this.lightbox||(this.lightbox=new i),this.lightbox.open("#mashup-lightbox"),this.lightbox.addEventListener("close"+this.ns,this.bind(this.handleLightboxClose));var n=this.lightbox.$element;this.pages=n.find("#explore-prev, #explore-curr, #explore-next").toArray(),t(this.pages[0]).hide(),t(this.pages[2]).hide(),this.loadLightboxLink(e),this.lightbox.$element.on("click"+this.ns,".js-lightbox-prev",this.bind(function(t){t.preventDefault(),this.slideTo(1)})),this.lightbox.$element.on("click"+this.ns,".js-lightbox-next",this.bind(function(t){t.preventDefault(),this.slideTo(-1)})),navigator.userAgent.match(/blackberry/i)&&this.lightbox.$element.on("touchstart"+this.ns,".js-lightbox-close",this.bind(function(t){t.preventDefault(),this.lightbox.close()})),this.setupGesture(),window.renderGesture=this.render},l.prototype.handleLightboxClose=function(){this.lightbox.removeEventListener(this.ns),t(document).off(h),t(document).off(this.ns)},l.prototype.loadLightboxLink=function(e){e.preventDefault();var i=t(e.currentTarget).attr("href");this.loadLightbox(i)},l.prototype.loadLightbox=function(t){function e(t,e){return o.loadPage(t,e)}var i=0,n=1,s=2,o=this,a=this.lightbox.$element;e(t,n).then(function(t){var n=t.data("prev");a.find(".js-lightbox-prev").attr("href",n);var o=t.data("next");a.find(".js-lightbox-next").attr("href",o),e(n,i).then(function(t){t.fadeIn(),e(o,s).then(function(t){t.fadeIn()})})})},l.prototype.loadPage=function(e,i){var n=this,o=t.Deferred(),a=t(n.pages[i]);return a.data("url")!=e?(a.data("url",e),a.data("next",!1),a.data("prev",!1),a.children().remove(),a.hide(),this.loader.load(e,function(e){var i=t("<div></div>").html(e),n=i.find("#explore-curr");a.data("prev",i.find(".js-lightbox-prev").attr("href")),a.data("next",i.find(".js-lightbox-next").attr("href")),a.append(n.children()),s.run(a.children()),a.fadeIn("slow"),o.resolve(a)})):o.resolve(a),o},l.prototype.setupGesture=function(){function e(e){var f=t(e.target);f.is(".explore-lightbox-item.is-curr a")||e.preventDefault();var m,g,v=t(window).width(),y=e.originalEvent.touches?e.originalEvent.touches[0]:e,b=(t(e.target),l.pages[1]);r=y.clientX,starty=y.clientY,u=l.renderedPosition,c=!1,d=!1,m=Number(new Date),g=l.renderedPosition,t(document).off(o.DRAGSTART+h),t(document).on(o.DRAGMOVE+h,function(t){c&&t.preventDefault(),t.originalEvent.touches&&(t=t.originalEvent.touches[0]);var e=t.clientX-r,s=t.clientY-starty;d?b.scrollTop=u-s:c?a(u+1.5*(e/v)):Math.abs(e)>10?(n(),c=!0):Math.abs(s)>3&&(b.scrollHeight>b.clientHeight?(d=!0,u=b.scrollTop):i())}),t(document).on(o.DRAGEND+h,function(t){var e=Number(new Date)-m;return c?(250>e&&Math.abs(g-p)>.1&&(p=0>p?-1:1),t.preventDefault(),t.stopImmediatePropagation(),s(),void 0):(i(),void 0)})}function i(){t(document).off(o.DRAGMOVE+h),t(document).off(o.DRAGEND+h),t(document).on(o.DRAGSTART+h,e)}function n(){l.$transition.stop()}function s(){i(),l.slideTo(Math.round(p)),p=0}function a(t){p=t,l.render(t)}var r,l=this,u=0,c=!1,d=!1,p=0;t(document).on(o.DRAGSTART+h,e),this.lightbox.$element.css("-ms-touch-action","none")},l.prototype.slideTo=function(e,i){function n(){var n=["is-prev","is-curr","is-next"];if(t(s.pages).css({transform:"none"}),e>.1)s.pages.unshift(s.pages.pop());else{if(!(-.1>e))return;s.pages.push(s.pages.shift())}t(s.pages).removeClass("is-prev is-next is-curr"),t(s.pages).attr("style","");for(var o=0;3>o;o++)t(s.pages[o]).addClass(n[o]);s.loadLightbox(t(s.pages[1]).data("url")),s.renderedPosition=0,i&&i()}var s=this;Math.round(e),this.$transition.stop(),this.$transition=t({value:this.renderedPosition}).animate({value:Math.round(e)},{duration:400,step:function(){s.render(this.value)},complete:n})},l.prototype.render=function(e){this.renderedPosition=e;var i=t(this.pages[0]),n=t(this.pages[1]),s=t(this.pages[2]);r(n,e),r(i,.6*e),r(s,.6*e)},l.prototype.render=function(e){var i;this.renderedPosition=e,-1>e&&(e=-1),e>1&&(e=1);var n=t(this.pages[e>0?2:0]),s=t(this.pages[1]),o=t(this.pages[e>0?0:2]);i=a(1-e),0>e?i-=1:i=1-i,r(s,.6*i),s.css({zIndex:Math.abs(e)>.5?5:6}),o.css({zIndex:Math.abs(e)>.5?6:0}),r(n,.4*i),i=a(e),r(o,.6*i)},l.prototype.destroy=function(){this._destroy()},l}),define("app/modules/explore/mashupGrid",["jquery","app/modules/BaseModule","lib/layout/FlexGrid","app/modules/explore/mashupLinks"],function(t,e,i,n){function s(t){var e,i=0;e=setInterval(function(){return i>=t.length?(clearInterval(e),void 0):(t.eq(i).addClass("is-placed"),i++,void 0)},100)}var o,a=".mashup-grid",r=0;return o=function(){this.$el=null,this.ns=a+r++,this.grid=new i},o.prototype=new e,o.prototype.init=function(e){var i=this;this.$el=t(e),this.mashupLinks=new n,this.mashupLinks.init(e);var o=this.$el.children(".l-column");return this.grid.addElements(o),s(o),i.relayout(),i.relayout(),this.on(window,"resize",this.bind(this.relayout)),t(window).load(this.bind(this.relayout)),this},o.prototype.relayout=function(){var t=this.$el.width(),e=Math.floor(t/200);2>e&&(e=2),this.$el.find(".l-one-col").css({width:100/e+"%"}),this.$el.find(".l-two-col").css({width:200/e+"%"}),this.grid.resize(t,e),this.$el.height(this.grid.getTotalHeight())},o.prototype.destroy=function(){this.mashupLinks.destroy(),this.$el&&(this.$el.off(this.ns),t(document).off(this.ns),t(window).off(this.ns),this.$el=null)},o}),define("app/modules/explore/stackHover",["jquery","app/modules/BaseModule"],function(t,e){var i,n=".stack-hover",s=0;return i=function(){this.$el=null,this.ns=n+s++},i.prototype=new e,i.prototype.init=function(e){this.$el=t(e),"ontouchstart"in window||(this.$el.on("mouseenter",this.bind(this.handleMouseEnter)),this.$el.on("mouseleave",this.bind(this.handleMouseLeave)))},i.prototype.handleMouseEnter=function(){this.$el.addClass("hover");for(var t=0;1>t&&t>-1;)t=-4+8*Math.random();var e=100*Math.random(),i=100*Math.random();this.$el.find(".js-stack-hover-bg").css({transform:"rotate("+t+"deg)","transform-origin":e+"% "+i+"%"}),this.$el.find(".js-stack-hover-fg").css({transform:"rotate("+t/-2+"deg)"})},i.prototype.handleMouseLeave=function(){this.$el.removeClass("hover"),this.$el.find(".js-stack-hover-bg, .js-stack-hover-fg").css({transform:"rotate(0deg)"})},i}),define("app/modules/widgets/currencyConvert",["jquery"],function(t){var e,i=".module-currencyConvert",n=0;e=function(){this.$el=null,this.ns=i+n++,this.conversions=null};var s=function(t,e){var i=t.data("exchangerate")*t.val();i=isNaN(i)?"error":i.toFixed(2),e.val(i)};return e.prototype.adaptCurrencyExchangerate=function(){var t,e;t=this.$curIn.find(":selected").val(),e=this.$curOut.find(":selected").val(),t==e?(this.$curInVal.data("exchangerate",1),this.$curOutVal.data("exchangerate",1)):(this.$curInVal.data("exchangerate",this.conversions[t][e]),this.$curOutVal.data("exchangerate",this.conversions[e][t]))},e.prototype.init=function(e){this.$el=t(e);var i=this;return this.conversions=this.$el.data("conversions"),this.$curIn=this.$el.find(".js-currency-in"),this.$curOut=this.$el.find(".js-currency-out"),this.$curInVal=this.$el.find(".js-currency-in-value"),this.$curOutVal=this.$el.find(".js-currency-out-value"),this.on("change",".js-currency-in",function(){i.adaptCurrencyExchangerate(),s(i.$curOutVal,i.$curInVal)}),this.on("change",".js-currency-out",function(){i.adaptCurrencyExchangerate(),s(i.$curInVal,i.$curOutVal)}),this.on("keyup",".js-currency-in-value",function(){s(t(this),i.$curOutVal)}),this.on("keyup",".js-currency-out-value",function(){s(t(this),i.$curInVal)}),this},e.prototype.destroy=function(){this.$el&&(this.$el.off(this.ns),t(document).off(this.ns),t(window).off(this.ns),this.$el=null)},e.prototype.on=function(){for(var e,i,n,s,o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];switch(arguments.length){case 2:s=this.$el,e=o.shift(),n=o.shift();break;case 3:e=o.shift(),"string"==typeof e?(s=this.$el,i=o.shift(),n=o.shift()):(s=t(e),e=o.shift(),n=o.shift());break;case 4:s=t(o.shift()),e=o.shift(),i=o.shift(),n=o.shift()}i?s.on(e+this.ns,i,n):s.on(e+this.ns,n)},e.prototype.bind=function(t){var e=this;return function(){t.apply(e,arguments)}},e}),define("app/modules/widgets/widgetSlider",["jquery","app/modules/BaseModule"],function(t,e){var i,n=".module-widgetSlider",s=0;return i=function(){this.ns=n+s++,this.activeSlide=0,this.totalSlides=0,this.visibleSlideEq=0},i.prototype=new e,i.prototype.buildControls=function(){var e,i,n=t("<ol />",{"class":"content-teaser-slider-indicator"});e=this,i=t("<li />",{"class":"content-teaser-slider-slide-nr js-widget-slide-indicator"}),i.append("<a href='#' class='content-teaser-slider-slide-link' >go to slide</a>"),e.$topSlides.each(function(){i.clone().appendTo(n)}),e.$triggers=n.find(".js-widget-slide-indicator"),n.on("click"+e.ns,".js-widget-slide-indicator",function(i){i.preventDefault(),e.showSlide(t(this).index()),clearInterval(e.interval)}),n.appendTo(e.$topContainer)},i.prototype.showSlide=function(t){this.visibleSlideEq=t,this.$triggers.eq(t).addClass("is-active").siblings().removeClass("is-active"),this.$topSlides.eq(t).addClass("is-active").siblings().removeClass("is-active"),this.$bottomSlides.eq(t).addClass("is-active").siblings().removeClass("is-active")},i.prototype.init=function(e){var i=this;return this.$topContainer=t(e),this.$topSlides=this.$topContainer.find(".js-widget-slider-slide"),this.$bottomContainer=t(".js-widget-slider-bottom"),this.$bottomSlides=this.$bottomContainer.find(".js-widget-slider-slide"),this.totalSlides=this.$topSlides.length,this.buildControls(),i.showSlide(0),i.interval=setInterval(function(){i.visibleSlideEq==i.totalSlides-1?i.showSlide(0):i.showSlide(i.visibleSlideEq+1)},6e3),this},i.prototype.destroy=function(){this.$el&&(this.$el.off(this.ns),t(document).off(this.ns),t(window).off(this.ns),this.$el=null)},i}),define("app/modules/maps/routeNetwork",["jquery","app/modules/BaseModule","vendor/mapbox/mapbox"],function(t,e){var i,n,s=".route-network",o=0;return i=function(){this.$el=null,this.ns=s+o++},i.prototype=new e,i.prototype.init=function(e){var i=this;if(this.$el=t(e),t(".js-route-network-wrapper").is(":hidden")){var n=function(){t(".js-route-network-wrapper").is(":hidden")||(i.initMap(),t(window).off("resize"+s,n))};t(window).on("resize"+s,n)}else i.initMap();return this},i.prototype.initMap=function(){n=this.$el.data("map-locations"),this.CENTER_LATLNG="world"==this.$el.data("map-type")?new L.LatLng(23.725,10.9):new L.LatLng(46.95,-1),this.CENTER_ZOOM="world"==this.$el.data("map-type")?3:5,this.SIMPLIFIED=!L.Browser.svg,this.LINE_STYLE={color:"#c00",opacity:.1,weight:1,clickable:!1},this.LINE_STYLE_CODESHARE={color:"#4f4440",opacity:.1,weight:1,clickable:!1},this.LINE_STYLE_FOCUS={opacity:.5},this.LINE_STYLE_NOFOCUS={opacity:.05},this.MARKER_OPACITY=1,this.MARKER_OPACITY_NOFOCUS=.2,this.MARKER_ICON_SWISS=new L.DivIcon({className:"map-marker",iconSize:[20,20],iconAnchor:[10,10],popupAnchor:[0,-4]}),this.MARKER_ICON_CODESHARE=new L.DivIcon({className:"map-marker map-marker--codeshare",iconSize:[20,20],iconAnchor:[10,10],popupAnchor:[0,-4]}),this.MARKER_ICON_START=new L.DivIcon({className:"map-marker map-marker--start",iconSize:[20,20],iconAnchor:[10,10],popupAnchor:[0,-6]}),this.destinations={},this.createMap(),this.paintMarkers(n),this.paintRoutes(n),this.initEventListeners()},i.prototype.createMap=function(){var e=this;this.map=L.mapbox.map(this.$el[0],"swiss.g9gn515e",{zoomControl:!1,minZoom:2,maxZoom:7,scrollWheelZoom:!1,worldCopyJump:!0}),this.map.addControl(L.control.zoom({position:"topright"})),window.map=this.map,this.map.setView(this.CENTER_LATLNG,this.CENTER_ZOOM),e.map.getSize().y>t(window).height()-100&&L.Browser.touch&&e.disableMapInteraction(),t(window).on("resize",function(){var i=e.map.getSize().y,n=t(window).height()-100;i>n&&L.Browser.touch?e.disableMapInteraction():e.enableMapInteraction()}),this.$destinationLinks=t(".js-route-network-destination")},i.prototype.disableMapInteraction=function(){this.map.dragging.disable(),this.map.touchZoom.disable(),this.map.tap.disable(),this.map.doubleClickZoom.disable(),this.map.setView(this.CENTER_LATLNG,this.CENTER_ZOOM),this.map.invalidateSize()},i.prototype.enableMapInteraction=function(){this.map.dragging.enable(),this.map.touchZoom.enable(),this.map.doubleClickZoom.enable(),L.Browser.touch&&!L.Browser.pointer&&this.map.tap.enable()
},i.prototype.initEventListeners=function(){function e(t){return i.$destinationLinks.filter('[data-airport="'+t+'"]')}var i=this;this.map.addEventListener("popupopen",function(n){var s=n.popup.id;if(i.$destinationLinks.removeClass("is-active is-inactive"),e(s).addClass("is-active"),i.$destinationLinks.parent().show(),"ZRH"===s||"BSL"===s||"GVA"==s){var o=i.getAllRoutesAndMarkersByIATA(i.destinations,s);i.setLineFocusStyle(o.routes),i.setMarkerFocusStyle(o.markers);var a=[s];t(o.markers).each(function(){a[a.length]=this.id}),a="|"+a.join("|")+"|",i.$destinationLinks.each(function(){var e=t(this);a.indexOf("|"+e.data("airport")+"|")<0&&(e.addClass("is-inactive"),e.parent().hide())})}else i.setLineFocusStyle(i.destinations[n.popup.id].routes),i.setMarkerFocusStyleByDestination(i.destinations[n.popup.id])}),this.map.addEventListener("popupclose",function(){i.keepPopupOpen=!1,i.resetAllStyles(),i.$destinationLinks.removeClass("is-active is-inactive"),i.$destinationLinks.parent().show()}),t(".js-route-network-destinations").on("click",".js-route-network-destination",function(e){e.preventDefault();var n=t(e.currentTarget).data("airport");i.destinations[n].endpoint.openPopup(),i.keepPopupOpen=!0}),t(".js-route-network-destinations").on("mouseover",".js-route-network-destination",function(e){var n=t(e.currentTarget).data("airport"),s=i.destinations[n].endpoint;t(s._icon).addClass("is-hover")}),t(".js-route-network-destinations").on("mouseout",".js-route-network-destination",function(e){var n=t(e.currentTarget).data("airport"),s=i.destinations[n].endpoint;t(s._icon).removeClass("is-hover")}),this.$el.parent().on("click",function(t){t.stopPropagation()}),this.$el.parents(".js-tabs").eq(0).on("tabchange",function(t){var e=t.id,n=e.split("#origin-countries-by-region-").pop();"europe"===n?(i.CENTER_LATLNG=[46.95,-1],i.CENTER_ZOOM=5):"africa"===n?(i.CENTER_LATLNG=[5.1855,16.13],i.CENTER_ZOOM=3):"far-east"===n?(i.CENTER_LATLNG=[34.452218472826566,49.658203125],i.CENTER_ZOOM=3):"north-south-america"===n&&(i.CENTER_LATLNG=[19.47695020648843,-42.626953125],i.CENTER_ZOOM=3),i.map.setView(i.CENTER_LATLNG,i.CENTER_ZOOM)})},i.prototype.simplifiy=function(){},i.prototype.paintMarkers=function(e){var i=this,n=new L.FeatureGroup,s=new L.Point(50,50);t.each(e,function(t,e){var o,a,r,l;if("ZRH"==e.iata||"GVA"==e.iata||"BSL"==e.iata)o=new L.Marker(new L.LatLng(e.lat,e.lng),{icon:i.MARKER_ICON_START,zIndexOffset:1e3}),o.type="Swiss",r="<span class='ico ico-winglet-swiss tooltip-winglet'></span>"+e.city;else{var h;for(l=e.routes.length-1;l>=0&&!(h=i._contains(e.routes[l].operators,"Swiss"));l--);if(h)o=new L.Marker(new L.LatLng(e.lat,e.lng),{icon:i.MARKER_ICON_SWISS}),o.type="Swiss",r="<span class='ico ico-winglet-swiss tooltip-winglet'></span>"+e.city;else{o=new L.Marker(new L.LatLng(e.lat,e.lng),{icon:i.MARKER_ICON_CODESHARE}),o.type="Codeshare";var u;for(l=e.routes.length-1;l>=0&&!(u=i._contains(e.routes[l].operators,"Edelweiss"));l--);r=u?"<span class='ico ico-winglet-edelweiss tooltip-winglet'></span>"+e.city:"<span class='ico ico-winglet-codeshare tooltip-winglet'></span>"+e.city}}a=new L.Popup({closeButton:!1,autoPanPadding:s}).setContent(r),o.bindPopup(a),a.id=e.iata,o.id=e.iata,n.addLayer(o),void 0===i.destinations[e.iata]&&(i.destinations[e.iata]=[]),i.destinations[e.iata].endpoint=o}),this.SIMPLIFIED||(n.on("mouseover",function(t){return i.keepPopupOpen||t.layer.openPopup(),!1}),n.on("mouseout",function(t){return i.keepPopupOpen||t.layer.closePopup(),!1})),n.on("click",function(t){return setTimeout(function(){t.layer.openPopup(),i.keepPopupOpen=!0},0),!1}),i.map.addLayer(n)},i.prototype.paintRoutes=function(e){var i=this,n=new L.LayerGroup;t.each(e,function(t,e){var s,o;for(o=e.routes.length-1;o>=0;o--){var a=e.routes[o],r=i.destinations[a.from].endpoint,l=i.destinations[e.iata].endpoint,h="Swiss"==l.type?i.LINE_STYLE:i.LINE_STYLE_CODESHARE;s=i.SIMPLIFIED?new L.Polyline([r.getLatLng(),new L.LatLng(e.lat,e.lng)],h):new L.GreatCircle([r.getLatLng(),new L.LatLng(e.lat,e.lng)],h),n.addLayer(s),s.iataStart=a.from,void 0===i.destinations[e.iata].routes&&(i.destinations[e.iata].routes=[]),i.destinations[e.iata].routes.push(s),void 0===i.destinations[e.iata].startpoints&&(i.destinations[e.iata].startpoints=[]),i.destinations[e.iata].startpoints.push(r)}}),i.map.addLayer(n)},i.prototype.getAllRoutesAndMarkersByIATA=function(t,e){var i=[],n=[];for(var s in t)for(var o=t[s].routes,a=o.length-1;a>=0;a--)o[a].iataStart===e&&(i.push(o[a]),n.push(t[s].endpoint));return n.push(t[e].endpoint),{routes:i,markers:n}},i.prototype.setLineFocusStyle=function(t){var e,i=this;for(this.setStyle(i.destinations,i.LINE_STYLE_NOFOCUS),e=t.length-1;e>=0;e--)t[e].setStyle(i.LINE_STYLE_FOCUS)},i.prototype.setMarkerFocusStyleByDestination=function(t){var e,i=this;for(var n in i.destinations){var s=i.destinations[n].endpoint;s.setOpacity(this.MARKER_OPACITY_NOFOCUS)}for(t.endpoint.setOpacity(this.MARKER_OPACITY),e=0;e<t.startpoints.length;e++)t.startpoints[e].setOpacity(this.MARKER_OPACITY)},i.prototype.setMarkerFocusStyle=function(t){var e,i=this;for(var n in i.destinations){var s=i.destinations[n].endpoint;s.setOpacity(this.MARKER_OPACITY_NOFOCUS)}for(e=t.length-1;e>=0;e--)t[e].setOpacity(i.MARKER_OPACITY)},i.prototype.resetAllStyles=function(){for(var t in this.destinations){var e=this.destinations[t],i=e.routes,n="Swiss"==e.endpoint.type?this.LINE_STYLE:this.LINE_STYLE_CODESHARE;if(void 0!==i)for(var s=i.length-1;s>=0;s--)i[s].setStyle(n);e.endpoint.setOpacity(1)}},i.prototype.setStyle=function(t,e){for(var i in t){var n=t[i].routes;if(void 0!==n)for(var s=n.length-1;s>=0;s--)n[s].setStyle(e)}},i.prototype._contains=function(t,e){if(!Array.prototype.indexOf){for(var i=t.length-1;i>=0;i--)if(t[i]===e)return!0;return!1}return!!~t.indexOf(e)},L.GreatCircle=L.Polyline.extend({initialize:function(t,e){L.Polyline.prototype.initialize.call(this,this._convertLines(t),e),this._latlngsinit=this._convertLatLngs(t)},getLatLngs:function(){return this._latlngsOriginal},setLatLngs:function(t){return this._latlngsinit=this._convertLatLngs(t),this._latlngs=this._convertLatLngs(this._convertLines(this._latlngsOriginal)),this.redraw()},addLatLng:function(t){return this._latlngsinit.push(L.latLng(t)),this._latlngs=this._convertLatLngs(this._convertLines(this._latlngsOriginal)),this.redraw()},spliceLatLngs:function(){var t=[].splice.apply(this._latlngsOriginal,arguments);return this._convertLatLngs(this._latlngsOriginal),this._latlngs=this._convertLatLngs(this._convertLines(this._latlngsOriginal)),this.redraw(),t},_convertLine:function(t,e,i){var n,s,o,a,r,l,h,u,c,d,p,f,m,g,v,y,b=6378137,w=1e4,$=L.LatLng.DEG_TO_RAD,k=L.LatLng.RAD_TO_DEG;for(l=Math.abs(e.lng-t.lng)*$,s=t.lat*$,o=e.lat*$,a=t.lng*$,r=e.lng*$,h=Math.atan2(Math.sqrt(Math.pow(Math.cos(o)*Math.sin(l),2)+Math.pow(Math.cos(s)*Math.sin(o)-Math.sin(s)*Math.cos(o)*Math.cos(l),2)),Math.sin(s)*Math.sin(o)+Math.cos(s)*Math.cos(o)*Math.cos(l)),u=Math.ceil(h*b/w),n=1;u>=n;n++)c=n/u,d=Math.sin((1-c)*h)/Math.sin(h),p=Math.sin(c*h)/Math.sin(h),f=d*Math.cos(s)*Math.cos(a)+p*Math.cos(o)*Math.cos(r),m=d*Math.cos(s)*Math.sin(a)+p*Math.cos(o)*Math.sin(r),g=d*Math.sin(s)+p*Math.sin(o),v=k*Math.atan2(g,Math.sqrt(Math.pow(f,2)+Math.pow(m,2))),y=k*Math.atan2(m,f),i[i.length]=L.latLng([v,y])},_convertLines:function(t){var e,i,n=[];for(e=0,i=t.length;i>e;e++)t[e]=L.latLng(t[e]);for(n.push(t[0]),e=0,i=t.length-1;i>e;e++)this._convertLine(t[e],t[e+1],n);return n}}),i}),define("app/modules/booking/seatselection",["jquery","app/modules/BaseModule","app/util/Capabilities","lib/util/Templates","app/modules/helpers/flyout-trigger","app/plugins/lightboxLink"],function(t,e,i,n,s,o){function a(e){var n=t("html").hasClass("is-seatmap-active");e!=n&&(e?(i.system.android&&(u=t(document).scrollTop(),t("html, body").scrollTop(0)),t("html").addClass("is-seatmap-active")):(i.system.android&&t("html, body").scrollTop(u),t("html").removeClass("is-seatmap-active")))}var r,l=".Seatselection",h=0;r=function(){this.$el=null,this.ns=l+h++,r.instance=this},r.prototype=new e,r.prototype.init=function(e){return this.$el=t(e),this.options=this.$el.data("seatselection"),this.$passengerInputs=this.$el.find(".js-seatselection-input"),this.$passengerViews=this.$el.find(".js-seatselection-passenger"),this.$seats=this.$el.find(".js-seat"),this.initModel(),this.initController(),this.validate(),this},r.prototype.initModel=function(){var e=this;this.data={passengers:[],seats:{}},this.selectedPassenger=!1,this.initialSeats=[],this.$passengerInputs.each(function(i){var n=t(this),s=n.data("passenger"),o=e.$passengerViews.filter('[data-passenger="'+s+'"]'),a={id:s,index:i,seat:n.val(),$input:n,$view:o};e.initialSeats.push(a.seat),e.selectedPassenger||a.seat||(e.selectedPassenger=a.id),e.data.passengers.push(a)}),this.selectedPassenger||(this.selectedPassenger=this.getPassengerAt(0).id),this.previouslySelectedPassenger=this.selectedPassenger,this.$seats.each(function(){var i=t(this),n=i.data("seat");n.$el=i,e.data.seats[n.id]=n})},r.prototype.hasModelChanged=function(){for(var t=[],e=0;e<this.data.passengers.length;e++)t.push(this.data.passengers[e].seat);return t.join("||")!=this.initialSeats.join("||")},r.prototype.initController=function(){function e(e,s){var o=n.render("seatmap-tooltip-template",i.getSeatFlyoutData(e)),a=t(t.parseHTML(t.trim(o)));return t("body").append(a),a.attr("id",s).hide(),a}var i=this;t(document).on("click"+this.ns,".js-seat-basket-button, .seatmap--seats .is-hovered .js-seat",this.bind(function(e){e.preventDefault();var n=t(e.currentTarget),s=n.attr("name");i.addSeatToPassenger(this.selectedPassenger,s)&&a(!1)})),this.on("mouseenter",".seatmap--seats .js-seat",function(){var e=t(this).data("seat").id,n=i.getPassengerForSeat(e);n&&(i.previouslySelectedPassenger=i.selectedPassenger,i.showPassenger(n.id))}),this.on("mouseleave",".seatmap--seats .js-seat",function(){var e=t(this).data("seat").id,n=i.getPassengerForSeat(e);n&&i.showPassenger(i.previouslySelectedPassenger)}),this.on("click",".js-seatselection-passenger",function(e){e.preventDefault();var n=t(this).data("passenger");i.setSelectedPassenger(n),this.$previouslyFocused=t(":focus"),t(".js-seatmap").focus(),a(!0)}),this.on("mouseenter",".js-seatselection-passenger",function(){var e=t(this).data("passenger");i.previouslySelectedPassenger=i.selectedPassenger,i.showPassenger(e)}),this.on("mouseleave",".js-seatselection-passenger",function(){t(this).data("passenger"),i.showPassenger(i.previouslySelectedPassenger)}),this.on("click",".js-seatselection-passenger-remove",function(e){e.preventDefault(),e.stopPropagation();var n=t(this).parents(".js-seatselection-passenger").data("passenger");i.removeSeatFromPassenger(n)}),t(document).on("click"+this.ns,".js-seatselection-close-active",this.bind(function(t){t.preventDefault(),a(!1)})),this.$seats.each(function(){var n=t(this),o=n,a=n.data("seat").id;n=n.parent();var r="tpl-"+a,l=new s,h=l.open;l.open=function(){this.refresh();var t=e(a,r).text();o.attr("aria-label",t),h.apply(this,arguments)},n.data("flyout-target","#"+r),n.data("flyout-behavior","hover,focus,top,bottom"),l.options=i.options,l.init(n[0])})},r.prototype.getSeatFlyoutData=function(t){var e=this.getSeat(t),i=this.getPassenger(this.selectedPassenger),n=i.seat?this.getSeat(i.seat):null,s=this.getPassengerForSeat(t),o=!1,a=!1,r=[e.desc];return e.price&&(n?(o=this.formatPriceDiff(e.price-n.price),a=this.formatPrice(n.price)):o=this.formatPrice(e.price)),s&&(s.id==this.getSelectedPassenger()?(r.push(this.options.locale.myseat),o=null,a=null):r.push(this.options.locale.selectedseat)),{id:t,desc:r.join("<br>"),price:o,oldprice:a,disabled:e.disabled,ismine:s&&s.id==this.getSelectedPassenger()}},r.prototype.invalidate=function(){this.validate()},r.prototype.validate=function(){this.$seats.filter(".is-selected").removeClass("is-selected"),this.$seats.filter(".is-mine").removeClass("is-mine");for(var t,e,i=0,n=0,s=0;s<this.data.passengers.length;s++)if(t=this.data.passengers[s],this.$passengerInputs.filter('[data-passenger="'+t.id+'"]').val(t.seat),t.seat){if(e=this.getSeat(t.seat),!e)continue;n++,e.$el.addClass("is-selected"),t.id==this.selectedPassenger&&(e.$el.addClass("is-mine"),t.$view.focus());var o="";"preferred"===e.type&&(o='<span class="seatmap-seat is-preview is-'+e.type+'"></span> '),t.$view.find(".js-seatselection-passenger-remove").show(),t.$view.find(".js-seatselection-passenger-price").text(this.formatPrice(e.price)),t.$view.find(".js-seatselection-passenger-value").html(o+String(e.id).toUpperCase()),i+=e.price}else t.$view.find(".js-seatselection-passenger-remove").hide(),t.$view.find(".js-seatselection-passenger-price").text("-"),t.$view.find(".js-seatselection-passenger-value").text(this.options.locale.select);this.$passengerViews.removeClass("is-active");var a=this.$passengerViews.filter("[data-passenger="+this.selectedPassenger+"]").addClass("is-active");this.$el.find(".js-seatselection-active-passenger").text(a.find(".seat-selection__seat-list__passenger").text()),this.$el.find(".js-seatselection-passenger-total").text(this.formatPrice(i));var r=this.hasModelChanged();this.options.asr||(r=r&&n==this.data.passengers.length),this.$el.find(".js-seatselection-add").prop("disabled",!r)},r.prototype.showPassenger=function(t){var e=this.getPassenger(t);if(this.$passengerViews.removeClass("is-active"),this.$passengerViews.filter("[data-passenger="+t+"]").addClass("is-active"),this.$seats.filter(".is-mine").removeClass("is-mine"),e.seat){var i=this.getSeat(e.seat);i.$el.addClass("is-mine")}this.selectedPassenger=t},r.prototype.formatPrice=function(t){return this.options.currency+" "+Number(t).toFixed(2)},r.prototype.formatPriceDiff=function(t){t=Number(t);var e=t>=0?"+":"-";return this.options.currency+" "+e+Math.abs(t).toFixed(2)},r.prototype.addSeatToPassenger=function(t,e,i){var n,s=this,a=this.data.seats[e];if(n=this.getPassengerForSeat(e))return n.seat=null,this.setSelectedPassenger(n.id),!0;if(a.needslogin)return this.lightbox=new o,this.lightbox.open(this.options.loginpopup,function(){}),!1;if(a.needsconfirmation&&!i)return this.confirm(a.needsconfirmation,function(){s.addSeatToPassenger(t,e,!0)}),!1;if(a.disabled)return alert("Seat is disabled (shouldn't happen anyway)"),!0;n=this.getPassenger(t),n.seat=e,this.invalidate();var r=(n.index+1)%this.data.passengers.length;return r<this.data.passengers.length&&this.setSelectedPassenger(this.getPassengerAt(r).id),!0},r.prototype.removeSeatFromPassenger=function(t){this.getPassenger(t).seat=null,this.invalidate()};var u=0;return r.prototype.getSelectedPassenger=function(){return this.selectedPassenger},r.prototype.setSelectedPassenger=function(t){this.previouslySelectedPassenger=t,this.selectedPassenger=t,this.invalidate()},r.prototype.getSeat=function(t){return this.data.seats[t]},r.prototype.getPassenger=function(t){for(var e=0;e<this.data.passengers.length;e++)if(passenger=this.data.passengers[e],passenger.id==t)return passenger},r.prototype.getPassengerAt=function(t){return this.data.passengers[t]},r.prototype.getPassengerForSeat=function(t){for(var e=0;e<this.data.passengers.length;e++)if(passenger=this.data.passengers[e],passenger.seat==t)return passenger;return null},r.prototype.confirm=function(t,e){this.lightbox=new o,this.lightbox.open(t,function(){var t=this,i=t.getElement();i.find(".js-confirm-checkbox").prop("checked",!1),i.find(".js-confirm-button").prop("disabled",!0),i.on("change",".js-confirm-checkbox",function(){i.find(".js-confirm-button").prop("disabled",!this.checked)}),i.on("click",".js-confirm-button",function(){e.call(t,!0)})})},r}),define("app/modules/booking/seatmap",["jquery","app/modules/BaseModule","lib/util/Templates","app/util/Capabilities","app/modules/helpers/flyout-trigger","app/plugins/mediaDispatcher"],function(t,e,i,n,s,o){var a,r=".Seatmap",l=0;return a=function(){this.$el=null,this.ns=r+l++,this.flyout=null,this.options={overDelay:0,outDelay:1}},a.prototype=new e,a.prototype.init=function(e){var i=this;this.$el=t(e),this.$el.find("[data-tooltip]").each(function(){var e=t(this),n="tpl-"+e.attr("id"),o=new s,a=o.open;o.open=function(){this.refresh(),i.createTarget(e,n),a.apply(this,arguments)},e.data("flyout-target","#"+n),e.data("flyout-behavior","hover,focus,top,bottom"),o.options=i.options,o.init(this)});var n=1.2,a=this.$el.find(".seatmap--seats"),r=a.height()*n;return o.isOrBelow("tablet-portrait").then(function(){a.css({transform:"scale("+n+")",transformOrigin:"top",height:r})}).otherwise(function(){a.css({transform:"",transformOrigin:"",height:""})}),this},a.prototype.createTarget=function(e,n){var s=e.data("tooltip"),o=i.render("seatmap-tooltip-template",s),a=t(t.parseHTML(t.trim(o)));t("body").append(a),a.attr("id",n).hide()},a}),define("app/modules/layout/sticky",["jquery","app/modules/BaseModule","app/plugins/mediaDispatcher"],function(t,e,i){var n,s=".Sticky",o=0;return n=function(){this.$el=null,this.ns=s+o++},n.prototype=new e,n.prototype.init=function(e){return this.$el=t(e),this.$inner=this.$el.children().eq(0),this.isSticky=!1,this.options=this.$el.data("sticky"),this.marginTop=this.options.marginTop||0,this.marginBottom=this.options.marginBottom||0,this.scrollFirst=this.options.showBottom,this.$boundingParent=this.$el.parents(this.options.bottomLimit||"body").eq(0),this.options.deviceLimit?i.isAbove(this.options.deviceLimit).then(this.bind(this.activate)).otherwise(this.bind(this.deactivate)):this.activate(),!1},n.prototype.validate=function(){if(this.active){this.measure();var e=t(document).scrollTop(),i=this.topLimit;this.scrollFirst&&this.height>this.windowHeight-2*this.marginTop?i+=this.height-this.windowHeight+this.marginTop:i-=this.marginTop;var n=this.bottomLimit,s=e>i;if(s&&!this.isSticky?this.$inner.css({position:"fixed",zIndex:10}):!s&&this.isSticky&&this.reset(),this.isSticky=s,this.isSticky){var o=this.topLimit-i,a=n-(o+this.height+e);0>a&&(o+=a),this.$inner.css({top:o})}}},n.prototype.reset=function(){this.$inner.css({position:"",left:"",top:"",width:"",zIndex:""}),this.$el.css({height:""})},n.prototype.invalidate=function(){this.validate()},n.prototype.activate=function(){this.active=!0,this.on(window,"scroll",this.bind(this.handleScroll)),this.on(window,"resize",this.bind(this.handleResize)),this.securityInterval=setInterval(this.bind(this.invalidate),1e3),this.handleResize(),this.invalidate()},n.prototype.deactivate=function(){this.active=!1,clearInterval(this.securityInterval),t(window).off(this.ns),this.reset(),this.isSticky=!1},n.prototype.handleScroll=function(){this.invalidate()},n.prototype.handleResize=function(){this.invalidate()},n.prototype.measure=function(){this.$inner=this.$el.children().eq(0);var e=this.$el.offset(),i=this.$el.width();this.$inner.width(i),this.$el.height(this.$inner.height()),this.windowHeight=t(window).height(),this.height=this.$inner.height(),this.topLimit=e.top-this.marginTop,this.leftLimit=e.left,this.bottomLimit=this.$boundingParent?this.$boundingParent.offset().top+this.$boundingParent.outerHeight():document.body.scrollHeight,this.bottomLimit-=this.marginBottom,this.bottomDistance=document.body.scrollHeight-this.bottomLimit},n}),define("app/modules/layout/sameheight",["jquery","app/modules/BaseModule","app/plugins/mediaDispatcher"],function(t,e,i){function n(){clearTimeout(h),h=setTimeout(s,1)}function s(){for(var t in l)l[t].validate()}var o,a=".sameheight",r=0,l={};o=function(){this.$el=null,this.ns=a+r++},o.prototype=new e,o.prototype.init=function(e){this.options=t(e).data("sameheight-options")||{};var s=t(e).data("sameheight");s?(s=this.getGroup(s),s.add(e)):(s=this.getGroup("group"+this.ns),t(e).find(".js-sameheight-item").each(function(){s.add(this)}));var o=t(e).data("sameheight-reset");return o&&i.isOrBelow(o).then(function(){s.disable()}).otherwise(function(){s.enable()}),n(),this},o.prototype.getGroup=function(t){return l[t]||(l[t]=new u(this.options)),l[t]},o.prototype.destroy=function(){};var h;t(window).resize(n);var u=function(t){this.elements=[],this.ns=a+r++,this.enabled=!0,this.options=t||{},this.property=this.options.useHeight?"height":"min-height"};return u.prototype.add=function(t){this.elements.push(t)},u.prototype.enable=function(){this.enabled||(this.enabled=!0,n())},u.prototype.disable=function(){this.enabled&&(this.enabled=!1,n())},u.prototype.destroy=function(){t(this.elements).css(this.property,""),this.elements=[]},u.prototype.validate=function(){var e=t(this.elements);if(e.css(this.property,""),this.enabled){e.css("transition",this.property+" 0s");var i=0;e.each(function(){var e=t(this).height();e>i&&(i=e)}),e.css(this.property,i),e.css("transition","")}},o}),define("app/modules/helpers/noScroll",["jquery","app/modules/BaseModule"],function(t,e){var i,n=".autocomplete",s=0;return i=function(){this.$el=null,this.ns=n+s++},i.prototype=new e,i.prototype.init=function(e){return this.$el=t(e),this.on("scroll",this.resetScroll),this.resetScroll.call(e),!1},i.prototype.resetScroll=function(){var t=this;t.scrollLeft=0,t.scrollTop=0},i}),define("app/modules/forms/maxlengthJumper",["jquery","app/modules/BaseModule","app/util/DOMUtil"],function(t,e,i){var n,s=".MaxlengthJumper",o=0;return n=function(){this.$el=null,this.ns=s+o++},n.prototype=new e,n.prototype.init=function(e){this.$el=t(e),navigator.userAgent.match(/(iPhone|iPod|iPad)/i)||(this.maxlength=this.$el.attr("maxlength"),this.maxlength&&this.on("keyup",this.bind(this.checkChars)))},n.prototype.checkChars=function(t){var e=this,n=String.fromCharCode(t.keyCode);if(!(t.keyCode<47||n.match(/\s/))&&n){var s=e.$el,o=this.maxlength,a=o-s.val().length;0>=a&&(s.val(s.val().substr(0,o)),i.focusNextInput(this.$el))}},n}),define("app/modules/helpers/loadLater",["jquery","app/modules/BaseModule","app/plugins/mediaDispatcher","lib/util/contextTrigger"],function(t,e,i,n){var s,o=".LoadLater",a=0;return s=function(){this.$el=null,this.ns=o+a++},s.prototype=new e,s.prototype.init=function(e){var n=this,s=t(e).data("load-later-when");s?i.isOrAbove(s).then(function(){n.exec(e)}):this.exec(e)},s.prototype.exec=function(e){var i=t(e),s=t("<div></div>").append(i.val()).children();s.hide(),i.after(s),i.remove(),setTimeout(function(){n.run(s),s.slideDown()},500)},s.prototype.destroy=function(){},s}),define("app/modules/booking/timetable",["jquery","app/modules/BaseModule"],function(t,e){var i,n=".Timetable",s=0;return i=function(){this.$el=null,this.ns=n+s++},i.prototype=new e,i.prototype.init=function(e){var i=this;return this.$el=t(e),this.$dateSelects=i.$el.find(".js-timetable-date-select").find("a"),this.$dateSelectsFlyout=this.$dateSelects.closest(".js-flyout"),this.$timetableInputs=this.$el.find(".js-timetable-input"),i.setFlightStatus(),this.$timetableInputs.on("change",function(e){var n=t(this),s=t(e.currentTarget);if(s.prop("checked")){var o=i.$el.find("th, td");i.$el.find("input").prop("checked",!1),o.removeClass("is-active is-active-before js-timetable-active-day");var a=s.parents("th, td").eq(0),r=a.index()+1;o.filter(":nth-child("+r+")").addClass("is-active js-timetable-active-day").find("input").prop("checked",!0),o.filter(":nth-child("+(r-1)+")").addClass("is-active-before"),i.setFlightStatus(),i.$dateSelects.removeClass("selected"),i.$el.find(".js-timetable-selected-date").text(n.val())}}),this.$dateSelects.on("click",function(e){e.preventDefault();var n=t(this),s=n.data("date");i.$el.find('.js-timetable-input[value="'+s+'"]').prop("checked",!0).change(),n.addClass("selected"),i.$el.trigger("flyout.close")}),this},i.prototype.setFlightStatus=function(){var e=this.$el.find(".js-timetable-active-day");e.each(function(e,i){var n=t(i),s=n.data("flight-status"),o=n.closest("tr").find("th");"cancelled"===s?o.removeClass("flightstatus--available flightstatus--not-available").addClass("flightstatus--cancelled"):"not-available"===s?o.removeClass("flightstatus--available flightstatus--cancelled").addClass("flightstatus--not-available"):"available"===s&&o.removeClass("flightstatus--cancelled flightstatus--not-available").addClass("flightstatus--available")})},i}),define("lib/net/ImagePreloader",["jquery"],function(t){function e(e,i){var n=t.Deferred();n.always(i);var s=new Image;return s.src=e,s.complete?n.resolve(s):t(s).load(function(){n.resolve(s)}),n.promise()}return e}),define("app/modules/content/image",["jquery","app/modules/BaseModule","lib/net/ImagePreloader"],function(t,e,i){var n,s=".DeferredImage",o=0;return n=function(){this.$el=null,this.ns=s+o++},n.prototype=new e,n.prototype.init=function(e){this.$el=t(e);var i=this.bind(this.start);return"complete"==document.readyState?i():t(window).on("load",i),this},n.prototype.start=function(){var t=this.$el.data("image-src"),e=this.$el.data("image-width"),n=this.$el.data("image-height");if(e&&n)this.createImage(t,e,n);else{var s=new i(t);s.done(this.bind(this.imageLoaded))}},n.prototype.imageLoaded=function(t){var e=t.width,i=t.height;this.createImage(t.src,e,i)},n.prototype.createImage=function(e,i,n){var s;Modernizr.backgroundsize?(s=t("<div></div>"),s.css({backgroundImage:"url("+e+")",paddingTop:100*(n/i)+"%",backgroundSize:"cover"})):s=t('<img src="'+e+'"/>'),s.addClass("img").appendTo(this.$el),this.destroy()},n}),define("app/modules",["lib/util/contextTrigger"],function(t){function e(t,e){var i;n(),i=(new t).init(e);var a;i&&(a=$(e),a.data("moduleInstance",i),i.___el=e,o.push(i),$(e).attr("data-has-module","yes")),s(i?i.ns:"unknown module")}function i(){for(var t,e,i=o.length,n=i-1;n>=0;n--)if(e=o[n],t=e.___el,!jQuery.contains(document.documentElement,t)){try{e.___el=null,e.destroy()}catch(s){}o.splice(n,1)}}function n(){a=new Date}function s(){r+=new Date-a}var o=[];new Date,t.add(".js-mainnavigation",function(){var t=this;require(["app/modules/nav/nav"],function(i){e(i,t)})}),t.add(".js-ajax-content",function(){var t=this;require(["app/modules/helpers/ajaxContent"],function(i){e(i,t)})}),t.add(".js-ajax-update",function(){var t=this;require(["app/modules/helpers/ajaxUpdate"],function(i){e(i,t)})}),t.add(".js-multirow",function(){var t=this;require(["app/modules/forms/multirow"],function(i){e(i,t)})}),t.add(".js-form-submit-action",function(){var t=this;require(["app/modules/forms/formSubmitAction"],function(i){e(i,t)})}),t.add(".js-range-picker",function(){var t=this;require(["app/modules/forms/rangePicker"],function(i){e(i,t)})}),t.add(".js-flyout-trigger",function(){var t=this;require(["app/modules/helpers/flyout-trigger"],function(i){e(i,t)})}),t.add(".js-flyout-tooltip",function(){var t=this;require(["app/modules/content/flyout-tooltip"],function(i){e(i,t)})}),t.add(".js-notification",function(){var t=this;require(["app/modules/content/notification"],function(i){e(i,t)})}),t.add(".js-autocomplete",function(){var t=this;require(["app/modules/helpers/autocomplete"],function(i){e(i,t)})}),t.add(".js-collapsable-trigger",function(){var t=this;require(["app/modules/helpers/collapsable-trigger"],function(i){e(i,t)})}),t.add(".js-origin-chooser-dropdown",function(){var t=this;require(["app/modules/nav/originChooser"],function(i){e(i,t)})}),t.add(".js-skiplinks",function(){var t=this;require(["app/modules/nav/skipNav"],function(i){e(i,t)})}),t.add(".js-stage",function(){var t=this;require(["app/modules/stages/stages"],function(i){e(i,t)})}),t.add(".js-watch-change",function(){var t=this;require(["app/modules/forms/watchChange"],function(i){e(i,t)})}),t.add(".js-date-input",function(){var t=this;require(["app/modules/forms/dateInput"],function(i){e(i,t)})}),t.add(".js-date-range",function(){var t=this;require(["app/modules/forms/dateRangeRemote"],function(i){e(i,t)})}),t.add(".js-date-multirange",function(){var t=this;require(["app/modules/forms/dateMultirange"],function(i){e(i,t)})}),t.add(".js-char-counter",function(){var t=this;require(["app/modules/forms/charCounter"],function(i){e(i,t)})}),t.add(".js-slide",function(){var t=this;require(["app/modules/content/slider"],function(i){e(i,t)})}),t.add(".js-bookingbar",function(){var t=this;require(["app/modules/booking/bookingbar"],function(i){e(i,t)})}),t.add(".js-book-options",function(){var t=this;require(["app/modules/booking/bookOptions"],function(i){e(i,t)})}),t.add(".js-book-matrix",function(){var t=this;require(["app/modules/booking/bookMatrix"],function(i){e(i,t)})}),t.add(".js-widget-stage",function(){var t=this;require(["app/modules/widgets/widgetStage"],function(i){e(i,t)})}),t.add(".js-auto-accordion-tabs",function(){var t=this;require(["app/modules/content/autoAccordionTabs"],function(i){e(i,t)})}),t.add(".js-checkin-options",function(){var t=this;require(["app/modules/booking/checkInOptions"],function(i){e(i,t)})}),t.add(".tabs-navigation",function(){var t=this;require(["app/modules/content/responsiveTabsNavigation"],function(i){e(i,t)})}),t.add(".js-tabs",function(){var t=this;require(["app/modules/content/tabs"],function(i){e(i,t)})}),t.add(".js-accordion",function(){var t=this;require(["app/modules/content/accordion"],function(i){e(i,t)})}),t.add(".js-mashup-grid",function(){var t=this;require(["app/modules/explore/mashupGrid"],function(i){e(i,t)})}),t.add(".js-stack-hover",function(){var t=this;require(["app/modules/explore/stackHover"],function(i){e(i,t)})}),t.add(".js-currency-convert",function(){var t=this;require(["app/modules/widgets/currencyConvert"],function(i){e(i,t)})}),t.add(".js-widget-slider-top",function(){var t=this;require(["app/modules/widgets/widgetSlider"],function(i){e(i,t)})}),t.add(".js-route-network",function(){var t=this;require(["app/modules/maps/routeNetwork"],function(i){e(i,t)})}),t.add(".js-seatselection",function(){var t=this;require(["app/modules/booking/seatselection"],function(i){e(i,t)})}),t.add(".js-seatmap",function(){var t=this;require(["app/modules/booking/seatmap"],function(i){e(i,t)})}),t.add(".js-sticky",function(){var t=this;require(["app/modules/layout/sticky"],function(i){e(i,t)})}),t.add(".js-sameheight",function(){var t=this;require(["app/modules/layout/sameheight"],function(i){e(i,t)})}),t.add(".js-no-scroll",function(){var t=this;require(["app/modules/helpers/noScroll"],function(i){e(i,t)})}),t.add(".js-maxlength-jumper",function(){var t=this;require(["app/modules/forms/maxlengthJumper"],function(i){e(i,t)})}),t.add(".js-load-later",function(){var t=this;require(["app/modules/helpers/loadLater"],function(i){e(i,t)})}),t.add(".js-timetable",function(){var t=this;require(["app/modules/booking/timetable"],function(i){e(i,t)})}),t.add(".js-image",function(){var t=this;require(["app/modules/content/image"],function(i){e(i,t)})}),setInterval(i,250);var a,r=0;return setTimeout(function(){},5e3),{connect:function(t,i){e(t,i)},add:function(i){"string"==typeof Module?t.add(".js-stage",function(){var t=this;require([i],function(i){e(i,t)})}):t.add(".js-stage",function(){var t=this;e(i,t)})},checkGarbage:i}}),function(){try{console.log()}catch(t){window.console={}}return window.console}(),function(t){function e(){}for(var i,n="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(",");i=n.pop();)t[i]||(t[i]=e)}(console),function(){var t,e=document.getElementsByTagName("html")[0];e.className+=" is-loading",t=setTimeout(function(){e.className+=" is-loaded is-load-error"},15e3),require(["app/Config"],function(e){function i(e){e&&e.attach&&e.attach(document.body),require(["jquery","app/modules","app/plugins"],function(e){function i(){e(window).trigger("complete")}"complete"==document.readyState?i():e(window).on("load",i),e(document).on("click",'a[href^="#"]',function(t){setTimeout(function(){if(!t.isDefaultPrevented()){var i=e(e(t.currentTarget).attr("href"));i.offset(),"undefined"==typeof i.attr("tabindex")&&i.attr("tabindex",-1),i.focus()}},100)}),e("html").addClass("is-loaded").removeClass("is-loading"),clearTimeout(t),e('<div class="picto"></div>').css({position:"absolute",left:-1e3}).appendTo("body")})}var n=navigator.userAgent,s=" "+document.getElementsByTagName("html")[0].className+" ",o=n.match(/(BlackBerry|BB\d)/),a="ontouchstart"in window,r=s.indexOf(" lt-ie9 ")>-1,l=[];
!o&&a&&(require(["vendor/fastclick"],function(){}),l.push("vendor/fastclick")),r&&require(["lib/shim/ie8IconFontFix"],function(t){t(".picto")});var h=e.get("language");"en"!=h&&l.push("vendor/moment/"+h),require(l,i)})}(),define("main",function(){});